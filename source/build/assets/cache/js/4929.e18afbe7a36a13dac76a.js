(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[4929],{mdgW:(e,t,r)=>{var a={"./ar-EG":["7l11",7,2639],"./ar-EG.js":["7l11",7,2639],"./bg-BG":["NtN9",7,6430],"./bg-BG.js":["NtN9",7,6430],"./cs-CZ":["dgFL",7,4617],"./cs-CZ.js":["dgFL",7,4617],"./da-DK":["qQ/l",7,8372],"./da-DK.js":["qQ/l",7,8372],"./de-DE":["kRj5",7,6222],"./de-DE.js":["kRj5",7,6222],"./en-GB":["dZvM",7,2308],"./en-GB.js":["dZvM",7,2308],"./en-US":["OTNr",7,2443],"./en-US.js":["OTNr",7,2443],"./es-ES":["NORb",7,9448],"./es-ES.js":["NORb",7,9448],"./es-MX":["qqpM",7,2387],"./es-MX.js":["qqpM",7,2387],"./fi-FI":["8F/y",7,1818],"./fi-FI.js":["8F/y",7,1818],"./fr-FR":["SLhx",7,84],"./fr-FR.js":["SLhx",7,84],"./he-IL":["U/0q",7,2292],"./he-IL.js":["U/0q",7,2292],"./hr-HR":["hqkm",7,9544],"./hr-HR.js":["hqkm",7,9544],"./hu-HU":["b3Ex",7,6878],"./hu-HU.js":["b3Ex",7,6878],"./id-ID":["1cQq",7,3374],"./id-ID.js":["1cQq",7,3374],"./it-IT":["plFM",7,7870],"./it-IT.js":["plFM",7,7870],"./ja-JP":["6c9a",7,6059],"./ja-JP.js":["6c9a",7,6059],"./ko-KR":["Bd6v",7,1533],"./ko-KR.js":["Bd6v",7,1533],"./metas":["vOvo",3,6563],"./metas.json":["vOvo",3,6563],"./mk-MK":["ROwi",7,3368],"./mk-MK.js":["ROwi",7,3368],"./ms-MY":["QHPW",7,5298],"./ms-MY.js":["QHPW",7,5298],"./nb-NO":["MBpd",7,8673],"./nb-NO.js":["MBpd",7,8673],"./nl-NL":["wtD0",7,5372],"./nl-NL.js":["wtD0",7,5372],"./pl-PL":["Evm0",7,9496],"./pl-PL.js":["Evm0",7,9496],"./pt-BR":["c8u7",7,8032],"./pt-BR.js":["c8u7",7,8032],"./pt-PT":["kUuF",7,4808],"./pt-PT.js":["kUuF",7,4808],"./ro-RO":["GQt0",7,1038],"./ro-RO.js":["GQt0",7,1038],"./ru-RU":["Gutp",7,8330],"./ru-RU.js":["Gutp",7,8330],"./sk-SK":["Nb4h",7,9592],"./sk-SK.js":["Nb4h",7,9592],"./sl-SI":["F4AI",7,979],"./sl-SI.js":["F4AI",7,979],"./sq-AL":["FhSz",7,6867],"./sq-AL.js":["FhSz",7,6867],"./sr-RS":["LOwO",7,1068],"./sr-RS.js":["LOwO",7,1068],"./sv-SE":["O1GL",7,9213],"./sv-SE.js":["O1GL",7,9213],"./th-TH":["u1j9",7,5800],"./th-TH.js":["u1j9",7,5800],"./tr-TR":["q4St",7,2040],"./tr-TR.js":["q4St",7,2040],"./uk-UA":["6ZeV",7,9586],"./uk-UA.js":["6ZeV",7,9586],"./zh-CN":["TM5q",7,9113],"./zh-CN.js":["TM5q",7,9113]};function s(e){if(!r.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],s=t[0];return r.e(t[2]).then((()=>r.t(s,16|t[1])))}s.keys=()=>Object.keys(a),s.id="mdgW",e.exports=s},vbKs:(e,t,r)=>{"use strict";r.d(t,{AT:()=>n,B6:()=>s,I6:()=>o,Iv:()=>i,KE:()=>l,aC:()=>_,cn:()=>u,h5:()=>A,jE:()=>E,mu:()=>c,ts:()=>a,v4:()=>d});const a="AppOffline",s="AppRestart",i="EndOfFlash",n="FlowSkip",o="FullExplicitContent",c="NoLogged",d="PreviewNotAllowed",l="RadioNotAllowed",u="StreamingDesktopNotAllowed",_="StreamingLimitedDuration",A="StreamingNotAllowed",E="WelcomeNewApp"},WrS5:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});let a=function(e){return e.AUTH_MODAL="AUTH_MODAL",e.GENERIC_ERROR="ERROR",e.GENERIC_CONFIRM="CONFIRM",e.GENERIC_IFRAME="IFRAME",e.MISSING_INFO_JOURNEY="MISSING_INFO_JOURNEY",e.PROFILE_MIGRATION_CONFIRMED="PROFILE_MIGRATION_CONFIRMED",e.THIRD_PARTY_CONFIRM_UNLINK="THIRD_PARTY_CONFIRM_UNLINK",e.EDIT_MP3="EDIT_MP3",e.MSISDN_PHONE_ACTIVATION="MSISDN_PHONE_ACTIVATION",e.LIGHTBOX_GIFT_RESULT="LIGHTBOX_GIFT_RESULT",e}({})},pJNj:(e,t,r)=>{"use strict";r.d(t,{E9:()=>i,F$:()=>n,IY:()=>d,ix:()=>o,uP:()=>c});var a=r("3mue"),s=r("PIVb");function i(e){return t=>{t({type:s.Kx,status:e.status,active:e.active,chunksInfo:e.chunksInfo}),t((0,a.WI)()),t((0,a.eK)())}}function n(e){return t=>{t({type:s.tM,status:e.status,chunksInfo:e.chunksInfo}),t((0,a.WI)()),t((0,a.eK)())}}function o(e){return t=>{t({type:s.qC,status:e.status,active:e.active,chunksInfo:e.chunksInfo}),t((0,a.WI)()),t((0,a.eK)())}}function c(e){return t=>{t({type:s.iY,loading:e.loading,active:e.active,chunksInfo:e.chunksInfo}),t((0,a.WI)()),t((0,a.eK)())}}function d(e){return t=>{t({type:s.Y0,skipLimited:e}),t((0,a.WI)()),t((0,a.eK)())}}},PIVb:(e,t,r)=>{"use strict";r.d(t,{Kx:()=>a,Y0:()=>o,iY:()=>n,qC:()=>i,tM:()=>s});const a="components/Player/chromecast/SET_AVAILABLE_STATUS",s="components/Player/chromecast/SET_CONNECTING_STATUS",i="components/Player/chromecast/SET_CASTING_STATUS",n="components/Player/chromecast/SET_ACTIVE_STATE",o="components/Player/chromecast/SET_SKIP_LIMITED"},"3mue":(e,t,r)=>{"use strict";r.d(t,{Li:()=>i,UD:()=>d,V6:()=>p,WI:()=>_,XP:()=>o,YI:()=>E,eK:()=>u,ej:()=>T,ls:()=>c,oD:()=>A,qq:()=>l,r1:()=>n});var a=r("JPje"),s=r("BcXB");const i=e=>({type:a.EC,playing:e.playing}),n=e=>({type:a.oB,loading:e.loading}),o=e=>({type:a.yd,...e}),c=e=>({type:a.Iq,volume:e.volume}),d=e=>({type:a.RA,shuffle:e.shuffle}),l=()=>({type:a.vg});function u(){return(e,t)=>{const r=(0,s.oy)(t());r!==t().player.control.hasNext&&e({type:a.Qx,hasNext:r})}}function _(){return(e,t)=>{const r=(0,s.eX)(t());r!==t().player.control.hasPrev&&e({type:a.aw,hasPrev:r})}}function A(e){return t=>{t({type:a.f6,repeat:e.repeat,sync:e.sync}),t(_()),t(u())}}const E=e=>({type:a.tU,mute:e.mute}),p=e=>({type:a.Ym,buffer:e.buffer}),T=e=>({type:a.pU,normalized:e})},JPje:(e,t,r)=>{"use strict";r.d(t,{EC:()=>u,Iq:()=>l,Qx:()=>_,RA:()=>i,Ym:()=>o,aw:()=>A,f6:()=>s,oB:()=>c,pU:()=>E,tU:()=>n,vg:()=>a,yd:()=>d});const a="components/Player/control/FINISHED_TRACKLIST",s="components/Player/control/SET_REPEAT",i="components/Player/control/SET_SHUFFLE",n="components/Player/control/SET_MUTE",o="components/Player/control/SET_BUFFER",c="components/Player/control/SET_LOADING",d="components/Player/control/SET_PAUSED",l="components/Player/control/SET_VOLUME",u="components/Player/control/SET_PLAYING",_="components/Player/control/SET_HAS_NEXT",A="components/Player/control/SET_HAS_PREV",E="components/Player/control/SET_NORMALIZED"},BcXB:(e,t,r)=>{"use strict";r.d(t,{F4:()=>p,J2:()=>I,SG:()=>P,bE:()=>m,c$:()=>R,eX:()=>D,kQ:()=>f,lP:()=>T,m$:()=>g,m5:()=>S,mQ:()=>E,oy:()=>O,rt:()=>y,v_:()=>L,yk:()=>h});var a=r("G4qV"),s=r("Z64h"),i=r("AfN5"),n=r("xobL");const o=({player:e})=>e.music.mediaType,c=({player:e})=>e.config.isRadio,d=({player:e})=>e.config.playerType,l=({player:e})=>e.control.repeat!==i.EV.OFF,u=({player:e})=>e.chromecast.loading,_=({player:e})=>e.chromecast.casting,A=({player:e})=>e.chromecast.skipLimited,E=({player:e})=>e.control.normalized,p=({player:e})=>e.control.playing,T=({player:e})=>e.control.paused,g=e=>e.player.control.hasNext,S=e=>e.player.control.hasPrev,h=e=>e.player.control.mute,f=e=>e.player.control.repeat,m=e=>e.player.control.volume,y=(0,a.Mz)([d,o,c,e=>(0,n.ki)(e.user),u],((e,t,r,a,s)=>!(r&&!a||s||e===i.Cc.ADS||e===i.Cc.TRITON_AD||t===i.zu.LIVE_STREAM||""===t))),I=(0,a.Mz)([d,u],((e,t)=>!t&&e!==i.Cc.ADS&&e!==i.Cc.TRITON_AD&&s.$.HTML5Renderer)),L=(0,a.Mz)([o],(e=>""!==e&&s.$.HTML5Renderer)),R=(0,a.Mz)([o,c,u],((e,t,r)=>!t&&!r&&[i.zu.EPISODE,i.zu.LIVE_STREAM].indexOf(e)<0)),P=(0,a.Mz)([o,c,u,_],((e,t,r,a)=>!t&&!r&&!a&&[i.zu.EPISODE].indexOf(e)<0)),O=(0,a.Mz)([d,o,l,({player:e})=>e.music.isLastSong,c,u,_,({player:e})=>e.chromecast.chunksInfo,A],((e,t,r,a,n,o,c,d,l)=>{let u=!1;return o?u=!0:t===i.zu.LIVE_STREAM||""===t?u=!1:a&&!r||(u=e===i.Cc.MOD||n),!(u||!c)||!(void 0!==l&&l||!s.$.HTML5Renderer)&&Boolean(u)})),D=(0,a.Mz)([d,o,c,l,({player:e})=>e.music.index<=0,u,_,A,e=>(0,n.ki)(e.user)],((e,t,r,a,n,o,c,d,l)=>{let u=!1;return o?u=!0:t===i.zu.LIVE_STREAM||""===t?u=!1:n&&!a||(u=e===i.Cc.MOD||r&&l),!(u||!c)||!(void 0!==d&&d||!s.$.HTML5Renderer)&&Boolean(u)}))},lWgj:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>o,SP:()=>l,Y7:()=>d,a_:()=>s,fq:()=>c,rv:()=>i,se:()=>n});var a=r("qJB7");const s={codec:a.Codec.UNKNOWN,container:a.Container.UNKNOWN,enum:-1,name:"EXTERNAL"},i={codec:a.Codec.FLAC,container:a.Container.NONE,enum:9,name:"FLAC"},n={codec:a.Codec.MP3,container:a.Container.NONE,bitrate:64,enum:10,name:"MP3_64"},o={codec:a.Codec.MP3,container:a.Container.NONE,bitrate:128,enum:1,name:"MP3_128"},c={codec:a.Codec.MP3,container:a.Container.NONE,bitrate:320,enum:3,name:"MP3_320"},d={codec:a.Codec.MP3,container:a.Container.NONE,enum:0,name:"MP3_MISC"},l=[i,c,o,n,d]},"2TXL":(e,t,r)=>{"use strict";r.d(t,{A:()=>a});class a{constructor(e,t={}){this._expire=void 0,this._value=void 0,this._expire=t.expire,this._value=e}get expired(){return!!this._expire&&Date.now()/1e3>this._expire}toString(){return this._value}}},"5G9X":(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,Ho:()=>o,vn:()=>c});var a=r("Wp0Y");const s={Generic:"generic",Deeplink:"deeplink",Album:"album",Podcast:"podcast",Artist:"artist",ArtistLineUp:"artistLineUp",App:"app",ExternalLink:"external-link",Playlist:"playlist",Radio:"radio",Show:"show",Episode:"episode",Track:"track",Channel:"channel",Flow:"flow",MultiFlow:"multi_flow",FlowConfig:"flow_config",User:"user",Native:"native",Livestream:"livestream",LiveEvent:"live-event",Video:"video",Genre:"genre",VideoLink:"video-link",TalkShow:"talkShow",TalkEpisodes:"talkEpisodes",RelatedArtist:"related_artist",TopArtistFull:"topArtistFull",PersonalPlaylist:"personalPlaylist",CuratedChartsPlaylist:"curatedChartsPlaylist",ChartsPlaylist:"chartsPlaylist",CuratorPlaylist:"curatorPlaylist",CollaborativePlaylist:"collaborativePlaylist",Smarttracklist:"smarttracklist",BlindtestPlaylist:"blindtest_playlist",MyDeezerStory:"my_deezer_story_content",Song:"song"},i=s;let n;const o=e=>(n||(n={album:(0,a.AP)("generic_title_album_web"),artist:(0,a.AP)("Artiste"),playlist:(0,a.AP)("Playlist"),show:(0,a.AP)("Podcast"),livestream:(0,a.AP)("Radio"),radio:(0,a.AP)("Mix"),channel:(0,a.AP)("Univers"),song:(0,a.AP)("Titre"),track:(0,a.AP)("Titre"),user:(0,a.AP)("Profil")}),n[e]||"unknown"),c={[s.Album]:"ALB_ID",[s.Show]:"SHOW_ID",[s.Playlist]:"PLAYLIST_ID",[s.Artist]:"ART_ID",[s.Radio]:"RADIO_ID",[s.Podcast]:"SHOW_ID",[s.User]:"USER_ID",application:"APP_ID",[s.App]:"APP_ID",[s.Song]:"SNG_ID",[s.Genre]:"GENRE_ID",[s.Channel]:"id",[s.Livestream]:"LIVESTREAM_ID",[s.Episode]:"EPISODE_ID"}},"3R0U":(e,t,r)=>{"use strict";r.d(t,{u:()=>a});let a=function(e){return e.READ_ONLY="r",e.WRITE_ONLY="w",e.READ_WRITE="rw",e.NONE="none",e}({})},UyDI:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});let a=function(e){return e[e.NOT_PLAYED=0]="NOT_PLAYED",e[e.ONGOING=1]="ONGOING",e[e.PLAYED=2]="PLAYED",e}({});class s{constructor(e,t,r){this.offset=void 0,this.timestamp=void 0,this.playStatus=void 0,this.timestamp=e,this.offset=t,this.playStatus=r}}class i extends s{constructor(e){super(e,0,a.NOT_PLAYED)}}class n extends s{constructor(e,t){super(e,t,a.ONGOING)}}class o extends s{constructor(e){super(e,0,a.PLAYED)}}const c=e=>e<10,d=(e,t)=>!1===c(e)&&e>=.9*t&&t-e<=120,l={[a.PLAYED]:[a.NOT_PLAYED]},u=(e,t)=>void 0===l[e.playStatus]||!1===l[e.playStatus].includes(t);class p{constructor(e,t,r,a,s){this.id=void 0,this.type=void 0,this.state=void 0,this.id=e,this.type=t,this.state=((e,t,r)=>r?new o(e):c(t)?new i(e):new n(e,t))(a,r,s)}static createNotPlayedBookmark(e,t){return new p(e,t,0,Date.now(),!1)}static createPlayedBookmark(e,t){return new p(e,t,0,Date.now(),!0)}static createFromSerializedBookmark(e,t){return new p(e.id,t,e.offset,e.timestamp,e.playStatus===a.PLAYED)}serialize(){return{id:this.id,offset:this.offset,timestamp:this.timestamp,playStatus:this.playStatus}}updateProgress(e,t){this.state=((e,t,r)=>c(t)&&u(e,a.NOT_PLAYED)?new i(Date.now()):((e,t)=>!1===c(e)&&!1===d(e,t))(t,r)&&u(e,a.ONGOING)?new n(Date.now(),t):d(t,r)&&u(e,a.PLAYED)?new o(Date.now()):e)(this.state,e,t)}markAsPlayed(){this.state=(this.state,new o(Date.now()))}markAsNotPlayed(){this.state=(this.state,new i(Date.now()))}get timestamp(){return this.state.timestamp}get offset(){return this.state.offset}get playStatus(){return this.state.playStatus}get played(){return this.state.playStatus===a.PLAYED}get ongoing(){return this.state.playStatus===a.ONGOING}get notPlayed(){return this.state.playStatus===a.NOT_PLAYED}}},oB8A:(e,t,r)=>{"use strict";r.d(t,{x:()=>a});let a=function(e){return e.EPISODE="episode",e}({})},w2Jm:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,q:()=>n});var a=r("oB8A"),s=r("5G9X"),i=r("AfN5");const n=e=>e===i.zu.EPISODE?a.x.EPISODE:null,o=(e,t)=>{let r;return t===a.x.EPISODE?(r=s.vn[s.Ay.Episode],e[r]):null}},FdMc:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r("WKgy"),s=r("xobL");const i=()=>{const e=a.A.getState().user;return(0,s.mI)({SERVER_TIMESTAMP:e.SERVER_TIMESTAMP,clientTimestampDelta:e.clientTimestampDelta})}},AfN5:(e,t,r)=>{"use strict";r.d(t,{Cc:()=>i,EV:()=>o,JW:()=>s,Kk:()=>c,S:()=>n,zu:()=>a});let a=function(e){return e.ADS="ads",e.EPISODE="episode",e.SONG="song",e.EXTERNAL="external",e.LIVE_STREAM="live_stream",e}({}),s=function(e){return e.PLAY_LOG_FAILED="play_log_failed",e}({}),i=function(e){return e.ADS="ads",e.TRITON_AD="triton_ads",e.CHROMECAST="chromecast",e.JINGLE="jingle",e.LIVESTREAM="livestream",e.MOD="mod",e.RADIO="radio",e}({}),n=function(e){return e[e.NONE=-1]="NONE",e[e.DEEZER=0]="DEEZER",e[e.USER=1]="USER",e[e.AD=2]="AD",e[e.TALK=3]="TALK",e[e.EXTERNAL=4]="EXTERNAL",e[e.LIVE_STREAM=5]="LIVE_STREAM",e}({}),o=function(e){return e[e.OFF=0]="OFF",e[e.ALL=1]="ALL",e[e.SINGLE=2]="SINGLE",e}({}),c=function(e){return e.PLAYLIST="playlist",e.LIVESTREAM="livestream",e.PERSONAL_LOVED="personalLoved",e.SMARTTRACKLIST="smarttracklist",e.ALBUM="album",e.TRACK="track",e.TRACK_MIX="track_mix",e.RADIO="radio",e.ARTIST="artist",e.USER="user",e.SHOW="show",e.EPISODE="episode",e.HISTORY="history",e.PERSONAL_SONG="personal_song",e.SHUFFLED_COLLECTION="shuffled_collection",e.SEARCH="search",e.SEARCH_TAG="searchTag",e.TOP_ARTIST="topArtistFull",e.MULTI_FLOW="multi_flow",e.PLAYLIST_ASSISTANT="playlist_assistant",e}({})},u7vQ:(e,t,r)=>{"use strict";r.d(t,{k2:()=>Ie,S1:()=>Le,Ay:()=>Pe,_k:()=>ye}),r("W8Tb"),r("/eM8"),r("gS5K");var a=r("EVdn"),s=r.n(a),i=r("/jVK"),n=r("lXQd"),o=r("ucSm"),c=r("dn5u"),d=r.n(c),l=r("9yOc"),u=r("PKMp"),_=r("H/eQ"),A=r("nrKQ"),E=r("3R0U"),p=r("Wwhz"),T=r("CxZw"),g=r("WBQ7"),S=r("Vd8Q"),h=r("yyc2"),f=r("04sm"),m=r("XVw/"),y=r("3qOO"),I=r("AfN5"),L=r("WKgy"),R=r("tZCQ"),P=r("mUtM"),O=r("pJNj"),D=r("TqF5"),C=r("vbKs");const N={current:0,prev:null,next:null},v=class{constructor(e){this._dzPlayer=e,this._namespace=S.default.get(["chromecast","namespace"]),this._media={},this._contexts=[],this._accessToken=null,this._positionInterval=null,this._isCasting=!1,this._isLoading=!1,this._isConnecting=!1,this._isAvailable=!1,this._queueMaxItems=120,this._lastChunkIndex=null,this._ad=null}getAppId(){return R.A.isAllowed("gcast_force_beta")?S.default.get(["chromecast","betaId"]):S.default.get(["chromecast","id"])}getNamespace(){return this._namespace}getSession(){return window.cast.framework.CastContext.getInstance().getCurrentSession()&&window.cast.framework.CastContext.getInstance().getCurrentSession().getSessionObj()}getMedia(){return this._media}getPlayerState(){return this.hasCurrentMedia()?this.getMedia().playerState:""}getIdleReason(){return this.hasCurrentMedia()?this.getMedia().idleReason:""}getRepeatMode(){return this.hasCurrentMedia()?this.getMedia().repeatMode:""}getVolumeLevel(){return(100*((0,n.A)(this.getSession(),"receiver.volume.level")||0)).toFixed(2)}getMuteStatus(){return(0,n.A)(this.getSession(),"receiver.volume.muted")||!1}getQueueItems(){return this.hasCurrentMedia()?this.getMedia().items:[]}getQueueCurrentItem(){return this.hasCurrentMedia()?this.getMedia().media:{}}getCustomData(){return this.hasCurrentMedia()?this.getMedia().customData:{}}getChunksInfo(){return N}getEstimatedTime(){return this.hasCurrentMedia()?this.getMedia().getEstimatedTime():this._dzPlayer.getPosition()}getQueueMaxItems(){return this._queueMaxItems}hasCurrentMedia(){return 0!==(0,o.A)(this.getMedia())}hasSession(){return 0!==(0,o.A)(this.getSession())}isCasting(){return this._isCasting}isLoading(){return this._isLoading}isAvailable(){return this._isAvailable}isActive(){return this._isCasting||this._isLoading}initGCast(){_.A.ready(_.A.store.ready,(()=>{if(!window.chrome.cast)return;window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:this.getAppId(),autoJoinPolicy:"ORIGIN_SCOPED"});const e=window.cast.framework.CastContext.getInstance();e&&this._setAvailableStatus(window.chrome.cast.ReceiverAvailability.AVAILABLE);const{SESSION_STATE_CHANGED:t}=window.cast.framework.CastContextEventType;e.addEventListener(t,(e=>{switch(e.sessionState){case window.cast.framework.SessionState.SESSION_STARTED:case window.cast.framework.SessionState.SESSION_RESUMED:this._setSession();break;default:case window.cast.framework.SessionState.SESSION_ENDED:this._setCastingStatus(!1)}}))}))}requestSession(){this.isAvailable()&&window.cast.framework.CastContext.getInstance().requestSession((()=>{this._setSession()}),(e=>{0===(0,o.A)(this.getSession())&&this._setConnectingStatus(!1),(0,y.A)(e)&&"cancel"!==e.code.toLowerCase()&&u.A.error(new Error("GCastSender :: requestSession - "+JSON.stringify(e)))}))}executeAction(e,t){if(this.isLoading()||!this.hasSession())return;let r=e.split("_")[1]||e;switch(t=Array.isArray(t)?t:[],"appendTracks"===r&&(r="playTracks"),r){case"firstPlay":case"playTracks":this._setPlayingStatus(!1),this._setLoadingStatus(!0);var a="firstPlay"===r?t[0]:0;this._dzPlayer.setPropValue("position",a),this.loadQueueList((()=>this._setTrackList(this._media)),{startTime:a});break;case"play":this.getPlayerState()===window.chrome.cast.media.PlayerState.PAUSED&&(this.getMedia().play(),this._setPlayingStatus(!0));break;case"resume":if(!this.hasCurrentMedia()){this._setPlayingStatus(!1),this._setLoadingStatus(!0),a=t[1],this.loadQueueList((()=>this._setTrackList(this._media)),{startTime:a});break}this.executeAction("play",[]);break;case"playAtIndex":if(this._setPlayingStatus(!1),this._setLoadingStatus(!0),this._dzPlayer.setPropValue("position",0),!this.hasCurrentMedia()){const e=[[L.A.getState().player.music.list[t[0]]],0,!0];this.executeAction("firstPlay",e);break}this.getMedia().queueJumpToItem(this.getMedia().items[t[0]].itemId,(()=>{}),(()=>{this._setLoadingStatus(!1)}));break;case"pause":case"stop":this.getPlayerState()===window.chrome.cast.media.PlayerState.PLAYING&&(this.getMedia().pause(),this._setPlayingStatus(!1));break;case"prevSong":case"nextSong":if(this._dzPlayer.getRepeat()===I.EV.SINGLE)return void this.executeAction("seek",[0]);this._setPlayingStatus(!1),this._setLoadingStatus(!0),this._dzPlayer.setPropValue("position",0),this.getMedia()["nextSong"===r?"queueNext":"queuePrev"]((()=>{}),(e=>{"SKIP_LIMIT_REACHED"===e.details.reason&&L.A.dispatch((0,P.S7)(C.AT)),this._setLoadingStatus(!1)}));break;case"mute":this.getSession().setReceiverMuted(this._dzPlayer.isMuted(),(()=>{}),(()=>{}));break;case"setVolume":const e=Number(parseFloat(this._dzPlayer.getVolume()).toFixed(2));this.getSession().setReceiverVolumeLevel(e,(()=>{}),(()=>{}));break;case"seek":const{trackDuration:s}=L.A.getState().player.music;this._setPlayingStatus(!1),this._setLoadingStatus(!0);const i=new window.chrome.cast.media.SeekRequest;let n=t[0];n===Number(n)&&n%1!=0&&(n*=s||0),i.currentTime=n,this.getMedia().seek(i,(()=>{}),(()=>{this._setLoadingStatus(!1)}));break;case"repeatChanged":let o;switch(parseInt(t[0]||0,10)){case 1:o=window.chrome.cast.media.RepeatMode.ALL;break;case 2:o=window.chrome.cast.media.RepeatMode.SINGLE;break;default:o=window.chrome.cast.media.RepeatMode.OFF}this.getMedia().queueSetRepeatMode(o)}}loadQueueList(e,t){e="function"==typeof e?e:function(){},t=(0,y.A)(t)?t:{},this._formatQueueList((t=>{const r=this._createSplitLoadRequest(t.queueList);this._callLoadRequest(r[t.chunkLoadIndex||0],(function(){e()}))}),t)}getContexts(){return this._contexts}_createSplitLoadRequest(e){return function(e,t){if(0===t||0===e.length)return[];const r=[];for(let a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}(e.map((e=>e)),this.getQueueMaxItems())}_callSplitLoadRequest(e,t,r,a,s){s||(s=[]),"function"==typeof r&&(a=r,r=0),r!==e.length?this._callLoadRequest(e[r],(()=>{s.push(e[r]),t.splice(0,e[r].length),this._callSplitLoadRequest(e,t,r+1,a,s)})):a(s)}_callLoadRequest(e,t){t="function"==typeof t?t:function(){};let r=new window.chrome.cast.media.QueueLoadRequest(e);r=this._formatLoadRequest(r),this._setContexts(),r.customData={session:{accessToken:this._accessToken,liveToken:L.A.getState().user.USER_TOKEN,hq:L.A.getState().user.hasHqAudioRight||!1},queueMaxItems:this.getQueueMaxItems(),contexts:this._contexts},r.items.forEach((e=>{delete e.activeTrackIds,delete e.media.customData,delete e.media.tracks,delete e.metadata})),this.getSession().queueLoad(r,(e=>{this._setCurrentMedia(e,t)}),(e=>{u.A.error(new Error("GCastSender :: _callLoadRequest (loadRequest) - "+JSON.stringify(e))),this._setLoadingStatus(!1)}))}_setContexts(){let e=this._dzPlayer.getTrackList(!0),t=[],r=[];e.forEach((function(e){if(e.context.TYPE&&-1===t.indexOf(e.context.ID)){let a={type:S.default.get("log_contexts")[e.context.TYPE],id:e.context.ID};r.push(a),t.push(e.context.ID)}})),this._contexts=r}_setCurrentMedia(e,t){if(t="function"==typeof t?t:function(){},!(0,y.A)(e))return void u.A.error(new Error('GCastSender :: _setCurrentMedia - "media" is not a valid Object'));this._media=e,this.getMedia().addUpdateListener(this._onCurrentMediaUpdate.bind(this)),this._dzPlayer.setPropValue("duration",e.media.duration),this._dzPlayer.setPropValue("pourcentLoaded",100);const r=this.getMedia().customData||{};r.playerType&&this._dzPlayer.setPlayerType(r.playerType),r.queueMaxItems&&this._setQueueMaxItems(r.queueMaxItems),t()}_onCurrentMediaUpdate(e){if(e)switch(this._manageAd(),this.getMedia().playerState){case window.chrome.cast.media.PlayerState.PAUSED:case window.chrome.cast.media.PlayerState.PLAYING:this._setLoadingStatus(!1),this._setPlayingStatus(this.getMedia().playerState===window.chrome.cast.media.PlayerState.PLAYING,this.getCustomData().queueIndex!==this._dzPlayer.getIndexSong())}else null===this._dzPlayer.getNextSong()&&this._stopPlayer()}_manageAd(){const e=this.getMedia();e.media.breakClips&&e.media.breakClips[0]?(this._dzPlayer.setPlayerType(I.Cc.ADS),this._ad=e.media.breakClips[0],L.A.dispatch((0,D.qf)({name:"GCAST_AD_BREAK",props:{posterUrl:this._ad.posterUrl,clickThroughUrl:this._ad.clickThroughUrl}}))):null!==this._playerType&&null!==this._ad&&(this._dzPlayer.setPlayerType(I.Cc.MOD),this._ad=null)}_onFinishedTrackList(){_.A.trigger(_.A.player.finishTrackList),this._dzPlayer.setIndexSong(0),this._dzPlayer._play(!1,!0)}_onNetworkStatusChange(){window.navigator.onLine?setTimeout((()=>{this.getMedia().getStatus()}),1e3):this._stopPlayer()}_onReceiverAction(){this.isCasting()||this._setConnectingStatus(!0)}_addListeners(){this.getSession().addMediaListener((e=>{this._setCurrentMedia(e)}));const e=this;this.getSession().addMessageListener(this.getNamespace(),((t,r)=>{void 0!==(r=JSON.parse(r)).isFinished&&r.isFinished&&e._onFinishedTrackList(),void 0!==r.skipLimited&&r.skipLimited?L.A.dispatch((0,O.IY)(!0)):L.A.dispatch((0,O.IY)(!1))})),this.getSession().addUpdateListener((e=>{if(!e)return void this._stopReceiver();const t=this.getVolumeLevel(),r=this.getMuteStatus();_.A.trigger(_.A.player.volume_changed,t),_.A.trigger(_.A.player.mute_changed,r)})),window.addEventListener("online",this._onNetworkStatusChange.bind(this)),window.addEventListener("offline",this._onNetworkStatusChange.bind(this))}_getAccessToken(e){this._accessToken?setTimeout(e.bind(this,this._accessToken),0):A.A.call({method:"application.authChromecast",success:t=>{this._accessToken=t,e(this._accessToken)}})}_unprefix(e){var t=(e=e||"").split(".");return String(t[1]||t[0])}_getLastChunkIndex(){return this._lastChunkIndex}_setLastChunkIndex(e){return this._lastChunkIndex=Number(e),this}_setPlayingStatus(e,t){_.A.ready(_.A.player.playerReady,(()=>{if(e=Boolean(e),this._dzPlayer.setPropValue("playing",e),this._dzPlayer.setPropValue("paused",!e),!e)return void this._clearPositionInterval();this._setPositionInterval(),this._dzPlayer.setPropValue("duration",this.getMedia().media.duration),this._dzPlayer.setPropValue("pourcentLoaded",100);let r="SNG_ID";"3"===this.getMedia().media.contentId.split(".")[0]&&(r="EPISODE_ID");let a=this.getMedia().media.contentId.split(".")[1],s=this._dzPlayer.getTrackList().map((e=>e[r])).indexOf(a);this._dzPlayer.setIndexSong(s),t&&(_.A.trigger(_.A.player.play,{value:this._dzPlayer.getCurrentSong()}),_.A.trigger(_.A.player.displayCurrentSong,this._dzPlayer.getCurrentSong()))}))}_setCastingStatus(e){return this._isCasting=Boolean(e),_.A.ready(_.A.player.playerReady,(()=>{_.A.trigger(_.A.chromecast.casting,this._isCasting)})),this}_setLoadingStatus(e){return this._isLoading=Boolean(e),_.A.ready(_.A.player.playerReady,(()=>{_.A.trigger(_.A.chromecast.loading,this._isLoading)})),this}_setConnectingStatus(e){return this._isConnecting=Boolean(e),_.A.ready(_.A.player.playerReady,(()=>{_.A.trigger(_.A.chromecast.connecting,this._isConnecting)})),this}_setAvailableStatus(e){return this._isAvailable="available"===e,_.A.ready(_.A.player.playerReady,(()=>{_.A.trigger(_.A.chromecast.available,this._isAvailable)})),this}_setSession(){this._setConnectingStatus(!1),this._setCastingStatus(!0),this._addListeners();const e=this._dzPlayer.getPosition(),t=this._dzPlayer.isPlaying();return this._stopPlayer((()=>{if(h.A.socket&&h.A.disconnect(),!this.getSession().media.length){const r=Number(parseFloat(this._dzPlayer.getVolume()).toFixed(2));return this.getSession().setReceiverVolumeLevel(r,(function(){}),(function(){})),this.getSession().setReceiverMuted(this._dzPlayer.isMuted(),(function(){}),(function(){})),void(t&&this.executeAction("firstPlay",[e]))}this._setCurrentMedia(this.getSession().media[0],(()=>{this._setTrackList(this._media);const e=this.getVolumeLevel(),t=this.getMuteStatus();switch(_.A.trigger(_.A.player.volume_changed,e),_.A.trigger(_.A.player.mute_changed,t),this.getMedia().playerState){case window.chrome.cast.media.PlayerState.PAUSED:case window.chrome.cast.media.PlayerState.PLAYING:this._dzPlayer.setPropValue("position",this.getEstimatedTime()),this._setPlayingStatus(this.getMedia().playerState===window.chrome.cast.media.PlayerState.PLAYING)}}))})),this}_setQueueMaxItems(e){return this._queueMaxItems=parseInt(e,10),this}_setTrackList(e,t){t="function"==typeof t?t:function(){};let r=0;const a=e.items||[];0===a.length&&e.media&&a.push(e.media);for(var s=0,i=a.length;s<i;++s)if(e.currentItemId===a[s].itemId){r=s;break}this._formatReceiverQueueList(a,(e=>{this._dzPlayer.setTrackList({data:e,chromecast:!0,index:r,autoplay:!1,callbackTrack:t})}))}_setPositionInterval(){this._clearPositionInterval(),this._positionInterval=setInterval(this._updatePosition.bind(this),900)}_clearPositionInterval(){clearInterval(this._positionInterval),this._positionInterval=null}_updatePosition(){const e=this.getEstimatedTime();this._dzPlayer.setPropValue("position",e)}_extractPropertiesFromItems(e){const t={ids:[],contexts:[],type:null};for(let r=0,a=(e=e||this.getQueueItems()).length;r<a;++r){const a=(0,n.A)(e[r],"media.contentId")||"";let s=(0,n.A)(e[r],"media.customData.context")||{};if(void 0===s.TYPE&&(s=this.getCustomData().contexts[0]),s.type&&-1===s.type.indexOf("_page")&&(s.type+="_page"),0===r){switch(parseInt(String(a).charAt(0),10)){case I.S.USER:t.type=I.S.USER;break;case I.S.TALK:t.type=I.S.TALK;break;case I.S.DEEZER:t.type=I.S.DEEZER}if(null===t.type)break}const i=this._unprefix(a);t.ids.push(t.type===I.S.USER?-i:i),t.contexts.push(s)}return t}_formatTrackData(e,t){if(!(0,y.A)(e))return void u.A.error(new Error('GCastSender :: _formatTrackData - "trackData" is not a valid Object'));const r=["SNG_ID","EPISODE_ID","LIVE_ID"],a=["ALB_ID","SHOW_ID"],s=e.context||{},i="show"===S.default.get("log_contexts")[s.TYPE],n="livestream"===S.default.get("log_contexts")[s.TYPE];let o,c;o=i?e.data[r[1]]:n?e.data[r[2]]:e.data[r[0]],c=i?e.data[a[1]]:n?null:e.data[a[0]],o=String(this._getTrackType(o,i,n)+"."+(parseInt(o,10)<0?-o:o)),c=String(c);const d=new window.chrome.cast.media.MediaInfo(o),l=S.default.get("log_contexts")[s.TYPE];return d.customData={contexts:[{id:isNaN(s.ID)?c:String(s.ID),type:l}],session:{access_token:t,live_token:L.A.getState().user.USER_TOKEN,hq:L.A.getState().user.hasHqAudioRight||!1,quality:L.A.getState().user.currentCastAudioQuality||"standard"}},d.customData.track={id:o},d}_getTrackType(e,t,r){return e=parseInt(e,10),t?I.S.TALK:r?I.S.LIVE_STREAM:I.S[e<0?"USER":"DEEZER"]}_formatQueueList(e,t){e="function"==typeof e?e:function(){},t=(0,y.A)(t)?t:{};const r=parseInt(t.startTime||0,10),a=(0,y.A)(t.trackList)?t.trackList:this._dzPlayer.getTrackList(!0);this._getAccessToken((t=>{const s=[];let i=0,n=0,o=a,c=o.length;if(0===c)return s;for(let e=0,a=c;e<a;++e){e%this.getQueueMaxItems()==0&&s.length&&++n;const a=new window.chrome.cast.media.QueueItem(this._formatTrackData(o[e],t));this._dzPlayer.getIndexSong()===e&&(a.startTime=r,i=n),s.push(a)}e({queueList:s,chunkLoadIndex:i})}))}_formatLoadRequest(e){if((0,y.A)(e)){switch(parseInt(this._dzPlayer.getRepeat()||0,10)){case 1:e.repeatMode=window.chrome.cast.media.RepeatMode.ALL;break;case 2:e.repeatMode=window.chrome.cast.media.RepeatMode.SINGLE;break;default:e.repeatMode=window.chrome.cast.media.RepeatMode.OFF}return e.startIndex=this._dzPlayer.getIndexSong()%this.getQueueMaxItems(),e}u.A.error(new Error('GCastSender :: _formatLoadRequest - "request" is not a valid Object'))}_formatReceiverQueueList(e,t){e=e||this.getQueueItems(),t="function"==typeof t?t:function(){};const r=["song.getListData","episode.getListData"],a=this._extractPropertiesFromItems(e),s=a.type===I.S.TALK?r[1]:r[0],i={};i[s===r[0]?"sng_ids":"episode_ids"]=a.ids,A.A.call({method:s,data:i,success:e=>{const r=[],s=e.data||[];for(let e=0,t=s.length;e<t;++e)r.push({data:s[e],context:{ID:parseInt(a.contexts[e].id,10),TYPE:a.contexts[e].type}});t(r)}})}_unsetMedia(){this._media={}}_stopPlayer(e){e="function"==typeof e?e:function(){},this._dzPlayer.trigger("audioPlayer_stop",["flashAction"]),setTimeout(e,500)}_stopReceiver(){const e=this._dzPlayer.getPosition(),t=this._dzPlayer.getIndexSong(),r=this._dzPlayer.isRadio(),a=this._dzPlayer.getTrackList(!0);let s=this._dzPlayer.getContext();void 0===s.TYPE&&(s=this._contexts[0]),"user_page"===s&&(s="user"),this._setPlayingStatus(!1),this._setLoadingStatus(!1),this._setCastingStatus(!1),this._setConnectingStatus(!1),this._clearPositionInterval(),this._stopPlayer((()=>{this.hasSession()&&(this.getSession().removeMediaListener(this.getNamespace()),this.getSession().removeMessageListener(this.getNamespace()),this.getSession().removeUpdateListener(this.getNamespace()),this.getSession().stop((()=>{}),(()=>{}))),this.hasCurrentMedia()&&(this.getMedia().removeUpdateListener(this._onCurrentMediaUpdate.bind(this)),this._unsetMedia()),window.removeEventListener("online",this._onNetworkStatusChange.bind(this)),window.removeEventListener("offline",this._onNetworkStatusChange.bind(this)),h.A.init(),this._dzPlayer._play(!0,!1,{data:r?[]:a,context:r?{}:s,offset:e,index:t,radio:r,autoplay:e>0})}))}};var w=r("WmA5"),M=r("Z64h"),b=r("LjZa"),x=r("Vynx"),U=r("YaJs"),F=r("ZoPi"),G=r("xobL"),B=r("aHAS"),V=r("w2Jm"),K=r("RuKb"),Y=r("zCrf"),H=r("ISNy"),X=r("OPhi"),z=r("34sk"),j=r("eC9Z"),W=r("4cGQ"),q=r("IjN+"),Z=r("bvZM"),$=r("7E8A"),Q=r("jaKc"),J=r("6yJ+"),ee=r("pUfN"),te=r("Vzbh"),re=r("5G9X"),ae=r("SLMx");function se(e=self.fetch){return async(t,r)=>{const a=null!==new Headers(null==r?void 0:r.headers).get("range"),s=d()(),i=`${t}#${s}`,n=await e(i,r).catch((e=>{throw(0,U.n7)(s),e}));if(null!=n&&n.headers&&!a){const e=n.headers.get("x-deezer-client-ip")||"",t=n.status||U.yl;ae.A.set(e),(0,U.qB)(s,i,t,e)}return n}}var ie=r("lWgj"),ne=r("iwso"),oe=r("Uat9");function ce(e=self.fetch){return async(t,r)=>{null!==new Headers(null==r?void 0:r.headers).get("range")||x.A.markTimeToPlayAction(x.Z.START_TRACK_FETCHING);const a=await e(t,r);return null!=r&&r.size||x.A.markTimeToPlayAction(x.Z.START_BUFFERING),a}}var de=r("2TXL"),le=r("D/zM"),ue=r("+pY+");let _e,Ae;const Ee=1209600;let pe=!1;function Te(e,t){var r;if("audioPlayer_startPreview"===e){pe=Re.isPlaying(),("pause"in _e?_e.pause:_e.audioPlayer_pause).call(_e),Ae.muted=_e.muted;const{normalized:e}="settings"in _e?_e.settings:_e,{normalizationTarget:r}="TARGET"in _e.constructor?{normalizationTarget:_e.constructor.TARGET}:_e,a=e?Math.min((0,W.K$)(t[1],r),1):1;return Ae.volume=a*_e.volume,void Ae.load(t[0])}if("audioPlayer_endPreview"===e)return pe&&(("play"in _e?_e.play:_e.audioPlayer_play).call(_e),pe=!1),void Ae.stop();(_e.constructor.prototype[e]||(null===(r=_e.constructor.legacy)||void 0===r?void 0:r[e])||b.A).apply(_e,t),"audioPlayer_playTracks"===e&&"next"in _e&&(_e.next={context:Re.getContextByIndex(Re.getIndexSong()+1),track:Re.getNextSong()})}function ge(e,t){let r;return r=r||"up_next_artist"!==t?r:"up_next_artist",r=r||"dynamic_page_user_radio"!==t&&"search_user_radio"!==t?r:I.Kk.USER,r=r||S.default.get("log_contexts")[t]!==re.Ay.MultiFlow?r:I.Kk.MULTI_FLOW,r=r||"artist_smartradio"!==t?r:"artist",r=!r&&t.endsWith("flow")?"user":r,r=r||e,r=r||"livestream",r}let Se,he={trackList:[],trackListOriginal:[],trackListIndex:0,trackListDuration:0,lyrics:{}},fe={queue:[],delayed:null,trigger:function(e,...t){null!==fe.delayed&&clearTimeout(fe.delayed),fe.queue.push({evt_name:e,args:t}),fe.delayed=setTimeout(fe.triggerAll,0)},triggerAll:function(){for(let e=0;e<fe.queue.length;e++)_.A.trigger(fe.queue[e].evt_name,...fe.queue[e].args);fe.queue=[],clearTimeout(fe.delayed),fe.delayed=null}},me={setIndex:function(e){(e<0||e>he.trackList.length-1)&&(e=0),he.trackListIndex=e},calculateDuration:function(){try{he.trackListDuration=0;for(var e=0;e<he.trackList.length;e++)he.trackListDuration+=parseInt(he.trackList[e].data.DURATION||0,10);return he.trackListDuration}catch(e){u.A.error(e)}},reIndexWithMediaId:function(e){const t=Re.getMediaId();let r;for(r=0;r<he.trackList.length;r++)if(String(he.trackList[r].data[t])===String(e)){he.trackListIndex=r;break}return r<he.trackList.length},getOriginalIndexWithSngId:function(e){let t=0;for(let r=0;r<he.trackListOriginal.length;r++)if(he.trackListOriginal[r].data.SNG_ID===e){t=r;break}return t},order:function(e){const t=Re.getCurrentSong("MEDIA_ID"),r=Re.getMediaId();let a=[];for(let t=0;t<e.length;t++){const s=e[t];for(let e=0;e<he.trackList.length;e++)if(String(he.trackList[e].data[r])===String(s)){a.push(he.trackList[e]),he.trackList.splice(e,1);break}}return he.trackList.length>0&&(a=a.concat(he.trackList)),he.trackList=a.slice(),me.reIndexWithMediaId(t),me.emitChange({type:"order"}),!0},remove:function(e,t){if(e<0||e>he.trackList.length-1)return!1;if(void 0===t)t=1;else if(t<=0)return!1;e<he.trackListIndex&&he.trackListIndex--;const r=he.trackList.splice(e,t);if(0!==r.length){const e=r[0].data.SNG_ID,a=me.getOriginalIndexWithSngId(e);he.trackListOriginal.splice(a,t)}return me.calculateDuration(),me.emitChange({type:"remove",song:r}),!0},shuffle:function(e){-1===(e="number"==typeof e?e:he.trackListIndex)&&(e=Math.round(Math.random()*(he.trackList.length-1)),me.setIndex(e));const t=Re.getCurrentSong("MEDIA_ID");let r=null;return-1!==e&&(r=he.trackList.splice(e,1),r=0===r.length?null:r[0]),he.trackList=(0,i.A)(he.trackList),null!==r&&he.trackList.unshift(r),me.reIndexWithMediaId(t),me.emitChange({type:"shuffle"}),!0},unShuffle:function(){const e=Re.getCurrentSong("MEDIA_ID");return he.trackList=he.trackListOriginal.slice(),me.reIndexWithMediaId(e),me.emitChange({type:"unShuffle"}),!0},addNext:function(e,t,r=!0){if(t=t||"user",0===e.length)return!1;if(!Re.chromecast.isActive()){if(Re.isRadio())return!1;var a=Re.getCurrentSong("MEDIA_ID"),s=he.trackListIndex,i=me.getOriginalIndexWithSngId(a);return Array.prototype.splice.apply(he.trackList,[s+1,0].concat(e)),a>0?Array.prototype.splice.apply(he.trackListOriginal,[i+1,0].concat(e)):he.trackListOriginal=he.trackList.slice(),me.calculateDuration(),me.emitChange({type:"addNext",song:e,caller:t,notify:r}),!0}},addToQueue:function(e,t){if(t=t||"user",0===e.length)return!1;if(!Re.chromecast.isActive()){he.trackList=he.trackList.concat(e),he.trackListOriginal=he.trackListOriginal.concat(e),me.calculateDuration();var r={type:"addToQueue",song:e,caller:t};return Re.isRadio()&&(r.type="lazyLoad"),me.emitChange(r),!0}},skipByGroup:function(){const e=Re.getCurrentSong("GROUP"),t=Re.getTrackList(!0).slice(Re.getIndexSong()+1).filter((t=>t.data.GROUP!==e));if(t.length>0){let e=Re.getTrackList(!0).slice(0,Re.getIndexSong()+1);me.set(e.concat(t))}},set:function(e,t){return t=t||{},!ye(Re.getPlayerType())&&("boolean"==typeof t.addNext&&t.addNext?me.addNext(e,t.caller,(0,n.A)(t,"notify",!0)):"boolean"==typeof t.addQueue&&t.addQueue?me.addToQueue(e,t.caller):(he.trackListOriginal=e.slice(),he.trackList=e,me.calculateDuration(),me.emitChange({...t,type:"set"}),!0))},save:function(e){return!e.addQueue&&!e.addNext&&(e.id!=Re.getContext("ID")||e.type!==S.default.get("log_contexts")[Re.getContext("TYPE")])&&void(me.backup={trackList:Re.getTrackList(!1),trackListIndex:he.trackListIndex,trackOffset:Re.position,radio:Re.getPlayerType()===I.Cc.RADIO,context:Re.getContext()})},restore:function(){if(!Re.chromecast.isActive()){if(0===(0,o.A)(me.backup))return!1;if(Re.getPlayerType()===I.Cc.ADS)return _.A.subscribeOnce(_.A.player.finishAds,Re.restoreTrackList),!1;Re.play({data:me.backup.trackList,index:me.backup.trackListIndex,offset:me.backup.trackOffset,context:me.backup.context,autoplay:me.backup.trackOffset>0,radio:me.backup.radio,saveCurrentTrackList:!1}),me.backup={}}},first_list_already_set:!1,emitChange:function(e){var t;if("set"!==e.type||me.first_list_already_set||(me.first_list_already_set=!0,e.first=!0),"set"===e.type&&fe.trigger(_.A.player.tracklistReset,e),"player"!==e.caller&&("addNext"===e.type||"addToQueue"===e.type)&&"up_next_artist"!==e.contextType){const t=e.song[0].data||(0,H.UE)(L.A.getState().entities,{id:e.song[0][0]});_.A.trigger("addNext"===e.type?_.A.player.trackAddNext:_.A.player.trackAddToQueue,{count:e.song.length,notify:(0,n.A)(e,"notify",!0),trackTitle:1===e.song.length?t.SNG_TITLE:""})}!_e||!("next"in _e)||"addToQueue"===e.type&&null!==(t=e.song)&&void 0!==t&&t.length&&"up_next_artist"===e.song[0].context.TYPE||(_e.next={context:Re.getContextByIndex(Re.getIndexSong()+1),track:Re.getNextSong()}),fe.trigger(_.A.player.tracklist_changed,{...e,contextType:Re.getContext("TYPE")})}};const ye=e=>e===I.Cc.ADS||e===I.Cc.TRITON_AD,Ie=()=>!Re.isRadio()&&!Re.chromecast.isLoading()&&[I.zu.EPISODE,I.zu.LIVE_STREAM].indexOf(Re.getMediaType())<0,Le=()=>!Re.isRadio()&&!Re.chromecast.isActive()&&[I.zu.EPISODE].indexOf(Re.getMediaType())<0,Re={LOG_INTERVAL_LIVE_STREAM:300,LOG_UID:0,SUPPORTED_CODECS:["mp3","aac"],volume:.5,cover:"",songId:0,muted:!1,paused:!1,playing:!1,loading:!1,lastPosition:0,position:0,duration:0,repeat:0,shuffle:!1,pourcentLoaded:0,nextSongInfo:[],playerType:I.Cc.MOD,previousPlayerType:I.Cc.MOD,numSong:-1,nbSongs:-1,playerLoaded:!1,audioAds:null,previousSkipAction:"",appId:0,appType:"",radioType:"",radioSkipInterval:36e5,radioSkipIntervalId:0,radioSkipCounter:0,cached:{},get chromecast(){return Se||(Se=function(e){const t=new v(e);if(!l.A.is("chrome")&&!l.A.is("chromium"))return t;try{window.__onGCastApiAvailable=e=>{e&&t.initGCast()}}catch(e){u.A.error(new Error("GCastSender :: _initialization - "+JSON.stringify(e)))}const r=document.getElementsByTagName("script")[0],a=document.createElement("script");return a.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",r.parentNode.insertBefore(a,r),t}(Re))},fetching:!1,context:{},currentLinkedDevice:null,logTrackTemplate:{media:{id:0,type:0},type:0,stat:{seek:0,pause:0,sync:0},lt:0,ctxt:{},payload:{},dev:{v:S.default.get("releaseNumeric"),t:0},ls:[],ts_listen:0},logTrack:{},user_status:{},renewLicense:async function(){const e=await new Promise(((e,t)=>A.A.call({method:"deezer.getUserData",success:e,error:t})));return await L.A.dispatch((0,B.b6)(e)),(0,G.Ay)(e)},renewToken:async function(e){switch(e.type){case"episode":{const t=await new Promise(((t,r)=>A.A.call({method:"episode.getData",data:{episode_id:e.id},success:t,error:r})));e.token=new de.A(t.TRACK_TOKEN,{expire:t.TRACK_TOKEN_EXPIRE})}break;case"song":{const t=await new Promise(((t,r)=>A.A.call({method:"song.getData",data:{SNG_ID:e.id},success:t,error:r})));e.token=new de.A(t.TRACK_TOKEN,{expire:t.TRACK_TOKEN_EXPIRE})}}},hasValidLicense:function(){return new Promise((e=>{let t=L.A.getState().user;const r=(0,G.mI)({SERVER_TIMESTAMP:t.SERVER_TIMESTAMP,clientTimestampDelta:t.clientTimestampDelta});let a=Math.floor(Date.now()/1e3),s=t.USER.OPTIONS.timestamp;a-s>Ee||r-s>Ee?A.A.call({method:"deezer.getUserData",success:async i=>{await L.A.dispatch((0,B.b6)(i)),t=L.A.getState().user,a=Math.floor(Date.now()/1e3),s=t.USER.OPTIONS.timestamp,a-s>Ee||r-s>Ee?(L.A.dispatch((0,D.qf)({name:"RENEW_LICENSE"})),e(!1)):e(!0)},error(){L.A.dispatch((0,D.qf)({name:"RENEW_LICENSE"})),e(!1)}}):e(!0)}))},_play:async function(e,t,r={}){try{if(!Re.html5.supported)return!1;if(!await Re.hasValidLicense())return!1;if(null===Re.getCurrentSong())return!1;if(e&&L.A.getState().user.USER.OPTIONS.ads_audio&&L.A.getState().adsConfig.profile.reg>=90&&L.A.getState().adsConfig.profile.offer_type!==J.u.DEEZER_NOW&&!L.A.getState().adsConfig.profile.hasConsent)return L.A.dispatch((0,D.qf)({name:"CONSENT_WALL",size:"small"})),Re.control.pause(),!1;if(e&&L.A.getState().user.USER.OPTIONS.ads_audio){const e=new URLSearchParams(window.location.search).get("forceAdBlocker");if(L.A.getState().app.hasAdBlock||e)return L.A.dispatch((0,D.qf)({name:"ADBLOCK_DETECTION",size:"small"})),Re.control.pause(),!1}if(!0===Re.hasAudioAds&&Re.isAdvertisingAllowed()&&L.A.getState().user.USER.OPTIONS.ads_audio)return Re.eventAudio||(_.A.trigger(_.A.ads.callAudio),Re.eventAudio=!0),!1;const a=(0,V.q)(Re.getMediaType());if(null!==a&&!("OFFSET"in he.trackList[he.trackListIndex].data)){const e=(0,V.D)(he.trackList[he.trackListIndex].data,a);if(e){const r=(0,K.v6)(L.A.getState().bookmarks,a,e),s=null!==r&&r.played,i=null===r?0:r.offset;if(t&&s)return Re.isLastSong()?Re.control.pause():Re.control.nextSong();he.trackList[he.trackListIndex].data.OFFSET=i}}if(0===Re.getNbSongs())return!1;if("boolean"!=typeof e&&(e=!0),"boolean"!=typeof t&&(t=!1),Re.getPlayerType()===I.Cc.JINGLE||ye(Re.getPlayerType()))return!1;if(e)Re.LOG_UID=(0,Z.A)(),Re.logManager(),Re.trigger("audioPlayer_playTracks",[[Re.getCurrentSong()],0,e,{context:Re.getContext(),offset:r.offset}]),_.A.trigger(_.A.player.notify,"start"),_.A.trigger(_.A.player.play,{value:Re.getCurrentSong()}),Re.duration=Re.isLimited()?30:Re.getCurrentSong("DURATION"),_.A.trigger(_.A.player.duration,Re.duration);else{if(!e&&t){const e=Re.getCurrentSong();return Re.trigger("audioPlayer_playTracks",[[e],0,!1,{context:Re.getContext()}]),fe.trigger(_.A.player.playing,!1),fe.trigger(_.A.player.displayCurrentSong,e,r),fe.trigger(_.A.player.updateCurrentTrack,e),!1}Re.trigger("audioPlayer_stop",[!0])}return delete he.trackList[he.trackListIndex].data.OFFSET,fe.trigger(_.A.player.displayCurrentSong,Re.getCurrentSong(),r),he.trackList.length-he.trackListIndex<=4&&!1!==r.sync&&!Re.isFetching()&&(Re.isRadio()?Re.loadTracks({id:Re.getRadioId(),type:Re.getRadioType(),radio:!0,addQueue:!0,context:Re.getContext()}):Re.getContext("TYPE")===I.Kk.SHUFFLED_COLLECTION&&Re.loadTracks({id:Re.getContext("ID"),type:I.Kk.SHUFFLED_COLLECTION,addQueue:!0,context:Re.getContext()})),Re.getMediaType()===I.zu.LIVE_STREAM&&Re.fingerprintSubscribe(),!0}catch(e){return u.A.error(e),!1}},onInterstitialAdsReady:function(){window.addEventListener(_.A.ads.adBegin,Re._startAudioAds),window.addEventListener(_.A.ads.adEnd,Re.stopAudioAds),window.addEventListener(_.A.ads.adError,Re.noAudioAds)},onAudioAdsReady:function(){Re.hasAudioAds=!0,window.removeEventListener(_.A.ads.adBegin,Re._startAudioAds),window.removeEventListener(_.A.ads.adEnd,Re.stopAudioAds),window.removeEventListener(_.A.ads.adDuration,Re._setAudioAdsProgression),window.removeEventListener(_.A.ads.adError,Re.noAudioAds),window.addEventListener(_.A.ads.adBegin,Re._startAudioAds),window.addEventListener(_.A.ads.adDuration,Re._setAudioAdsProgression),window.addEventListener(_.A.ads.adError,Re.noAudioAds),window.addEventListener(_.A.ads.adEnd,Re.stopAudioAds)},noAudioAds:function(){window.removeEventListener(_.A.ads.adBegin,Re._startAudioAds),window.removeEventListener(_.A.ads.adEnd,Re.stopAudioAds),window.removeEventListener(_.A.ads.adDuration,Re._setAudioAdsProgression),window.removeEventListener(_.A.ads.adError,Re.noAudioAds),Re.hasAudioAds=!1,Re.eventAudio=!1,he.trackListIndex--,Re.control.nextSong()},_startAudioAds:function(){window.removeEventListener(_.A.ads.adBegin,Re._startAudioAds),Re.control.pause(),he.trackListIndex--,Re.previousPlayerType=Re.getPlayerType(),Re.setPlayerType(I.Cc.ADS)},stopAudioAds:function(e=!0){window.removeEventListener(_.A.ads.adEnd,Re.stopAudioAds),window.removeEventListener(_.A.ads.adError,Re.noAudioAds),Re.hasAudioAds=!1,Re.eventAudio=!1,Re.setPlayerType(Re.previousPlayerType),e||he.trackListIndex--,Re.control.nextSong(!0),_e&&"audioPlayer_play"in _e&&Re.control.play(),clearInterval(Re._adsPosInterval)},_setAudioAdsProgression:function(e){window.removeEventListener(_.A.ads.adDuration,Re._setAudioAdsProgression);var t=e.videoDuration,r=0;Re.setPropValue("duration",t),Re._adsPosInterval=setInterval((function(){Re.setPropValue("position",r),(r+=.5)>=t&&clearInterval(Re._adsPosInterval)}),500)},_adsPosInterval:null,hasAudioAds:!1,setTriforceIndex(e){const t=he.trackList[e],r=Re.helper.getTrackTypeByIndex(e);if(r===I.Cc.RADIO){const e=ge(void 0,t.context.TYPE);Re.radioStartListen(t.context.ID,e)}Re.playTrackAtIndex(e,!1,r,{sync:!1}),Re.duration=Re.isLimited()?30:Re.getCurrentSong("DURATION")||0,_.A.trigger(_.A.player.duration,Re.duration),_.A.trigger(_.A.player.updateCurrentTrack)},setTriforceState(e){e.tracks.filter((e=>"livestream"===e.data.__TYPE__)).forEach((e=>e.data=Re.getLivestreamData(e.data)[0])),[...e.tracks,...e.recommended].filter((e=>e.data.FALLBACK)).forEach((e=>{e.data.SNG_ID_ORIGIN=e.data.SNG_ID,e.data={...e.data,...e.data.FALLBACK}})),e.radio?(Re.setPlayerType(I.Cc.RADIO),Re.radioStartListen(e.tracks[0].context.ID,ge(e.radio,e.tracks[0].context.TYPE))):Re.setPlayerType(I.Cc.MOD),he.trackList=[...e.tracks,...e.recommended],he.trackListOriginal=[...e.original],he.nbSongsTotal=he.trackList.length,me.setIndex("index"in e?e.index:he.trackListIndex),me.calculateDuration(),me.emitChange({sync:!1,type:"set"}),Re.isPlaying()||(Re.paused=!1,_.A.trigger(_.A.player.paused,!1,{sync:!1}),Re.setPropValue("playing",!1)),Re.position=0,_.A.trigger(_.A.player.position,0),Re.duration=Re.isLimited()?30:Re.getCurrentSong("DURATION")||0,_.A.trigger(_.A.player.duration,Re.duration),e.shuffled!==Re.shuffle&&(Re.shuffle=e.shuffled,_.A.trigger(_.A.player.shuffle_changed,Re.shuffle))},setUserLogged:function(e){Re.trigger("audioPlayer_setToken",[e])},setUserUnlogged:function(){try{return Re.trigger("audioPlayer_setToken",[""]),!0}catch(e){u.A.error(e)}},setEmptyPlayer:function(){try{if(Re.chromecast.isActive())return;return ye(Re.getPlayerType())||Re.getPlayerType()===I.Cc.JINGLE||(he.trackList=[],he.trackListOriginal=[],he.trackListIndex=0,Re.trigger("audioPlayer_playTracks",[[],0,!1]),fe.trigger(_.A.player.displayEmptyPlayer)),!1}catch(e){u.A.error(e)}},play:async function(e){try{if(!await Re.hasValidLicense())return!1;if(Re.chromecast.isLoading())return!1;if("object"==typeof e.context&&0!==Object.keys(e.context).length||F.A.log(new Error("Empty context"),e),e=s().extend(!0,{},{type:"",id:0,radio:!1,index:-1,autoplay:!0,context:{ID:"",TYPE:"",CONTEXT_ID:""},data:[],offset:0,addNext:!1,addQueue:!1,saveCurrentTrackList:!0,callbackTrack:function(){}},e),_e&&e.autoplay&&(("autoplay"in _e?_e:_e.element).autoplay=!0),ye(Re.getPlayerType())||Re.getPlayerType()===I.Cc.JINGLE)return!1;if(0===e.data.length){if(e.initializing&&he.trackList.length)return;return Re.loadTracks(e),!1}const{filteredTrack:t,unavailableTrackCode:r}=Re._getFilteredTrackListData(e);if("function"==typeof e.callbackTrack&&e.callbackTrack(t),0===t.length)return r.every((e=>e===T.A.EXPLICIT_LYRICS))&&(0,G.UJ)(L.A.getState().user)&&L.A.dispatch((0,P.S7)(C.I6,{onLinkClick:()=>L.A.dispatch((0,P.Hd)(C.I6))})),!1;Number(Re.appId)>0&&"inapp"===Re.appType&&(e.context.ID=Re.appId,e.context.TYPE=Re.appType),e.saveCurrentTrackList&&me.save(e);const a=w.A.location.query.sng_id;return a&&(e.index=Math.max(e.data.findIndex((e=>(e.SNG_ID||e.EPISODE_ID||e.id)===a)),0)),e.index>e.data.length&&(e.index=0),Re.setPlayerType(e.radio?I.Cc.RADIO:I.Cc.MOD),!0===e.radio&&!1===e.addQueue&&!1===e.addNext&&Re.radioStartListen(e.id,e.type),Re.chromecast.isCasting()&&(e.playOnChromecast=!0),Re.liveStreamChannel&&(h.A.deleteChannel(Re.liveStreamChannel),_.A.unsubscribe(_.A.live.livestream,Re.onGetLiveStreamTrack),Re.liveStreamChannel=!1),e.type===I.Kk.LIVESTREAM&&(Re.setPlayerType(I.Cc.RADIO),e.data=Re.getLivestreamData(e.data[0])),Re.setNbSongsTotal(e.total),Re.setTrackList(e,e.addQueue,e.addNext),Re.setTrackListType(e.type),!0}catch(e){return u.A.error(e),!1}},loadTracks:function(e){try{e.id||F.A.log(new Error("Play without id"),e),e.type||F.A.log(new Error("Play without type"),e);var t=e.start||0;let r={[I.Kk.LIVESTREAM]:{api_method:"livestream.getData",api_param:{livestream_id:e.id,supported_codecs:["mp3","aac"]}},[I.Kk.PLAYLIST]:String(e.id)===(0,G.G8)(L.A.getState().user)&&R.A.isAllowed("unlimited_favorite_tracks")?()=>(0,z.G5)(re.Ay.Song)(L.A.dispatch,L.A.getState).then((()=>{(0,Y.bm)({start:t,nb:(0,X.pp)(L.A.getState().feedbacks,re.Ay.Song,!1)},{cacheUsage:E.u.READ_ONLY})(L.A.dispatch,L.A.getState).then((()=>{Re.onLoadedTracks((0,H.VL)(L.A.getState()),e)}))})):{api_method:"playlist.getSongs",api_param:{playlist_id:e.id,start:t,nb:2e3}},[I.Kk.PERSONAL_LOVED]:R.A.isAllowed("unlimited_favorite_tracks")?()=>(0,z.G5)(re.Ay.Song)(L.A.dispatch,L.A.getState).then((()=>{(0,Y.bm)({start:t,nb:(0,X.pp)(L.A.getState().feedbacks,re.Ay.Song,!1)},{cacheUsage:E.u.READ_ONLY})(L.A.dispatch,L.A.getState).then((()=>{Re.onLoadedTracks((0,H.VL)(L.A.getState()),e)}))})):{api_method:"playlist.getSongs",api_param:{playlist_id:e.id,start:t,nb:2e3}},[I.Kk.SMARTTRACKLIST]:{api_method:"smartTracklist.getSongs",api_param:{smartTracklist_id:e.id}},[I.Kk.ALBUM]:{api_method:"song.getListByAlbum",api_param:{alb_id:e.id,start:t,nb:500}},[I.Kk.TRACK]:{api_method:"song.getListData",api_param:{sng_ids:Array.isArray(e.id)?e.id:[e.id]}},[I.Kk.TRACK_MIX]:{api_method:"song.getSearchTrackMix",api_param:{sng_id:e.id,start_with_input_track:e.forceAsFirstTrack}},[I.Kk.RADIO]:{api_method:"radio.getSongs",api_param:{radio_id:e.id}},[I.Kk.ARTIST]:{api_method:!0===e.radio?"smart.getSmartRadio":"song.getTopArtist",api_param:{art_id:e.id}},[I.Kk.USER]:{api_method:"radio.getUserRadio",api_param:{user_id:e.id,tuner:e.tuner}},[I.Kk.MULTI_FLOW]:{api_method:"radio.getUserRadio",api_param:{config_id:e.id,user_id:(0,G.F6)(L.A.getState().user),tuner:e.tuner}},[I.Kk.SHOW]:{api_method:"episode.getListByShow",api_param:{show_id:e.id,start:t,nb:1e3}},[I.Kk.EPISODE]:{api_method:"episode.getData",api_param:{episode_id:e.id}},[I.Kk.HISTORY]:{api_method:"user.getSongsHistory",api_param:{start:t,nb:1e3}},[I.Kk.PERSONAL_SONG]:{api_method:"personal_song.getList",api_param:{start:t,nb:1e3}},[I.Kk.SHUFFLED_COLLECTION]:{api_method:"tracklist.getShuffledCollection",api_param:{start:t,nb:50}},[I.Kk.SEARCH]:{api_method:"search.music",api_param:{query:e.id,start:t,nb:1e3,filter:"ALL",output:Re.getOutputByContextPage(e.context&&e.context.TYPE||"")}},[I.Kk.SEARCH_TAG]:{api_method:"search.music",api_param:{query:e.id,start:t,nb:1e3,filter:"TAG",output:Re.getOutputByContextPage(e.context&&e.context.TYPE||"")}},[I.Kk.TOP_ARTIST]:{api_method:"artist.getTopTrack",api_param:{art_id:e.id,start:t,nb:100}}};r.talkShow=r.show,r.collaborativePlaylist=r.playlist,r.curatedChartsPlaylist=r.playlist,r.curatorPlaylist=r.playlist,r.personalPlaylist=r.playlist,r.loved=r.playlist,r.favorite=r.personalLoved,r.topArtist=r.topArtistFull,r.discographyArtist=r.album,r.personalSong=r.personal_song,r.flow=r.user,r.chartsPlaylist=r.playlist,"object"==typeof r[e.type]?(Re.fetching=!0,A.A.call({method:r[e.type].api_method,data:r[e.type].api_param,success:Re.onLoadedTracks,error:()=>{Re.fetching=!1},callback_parameters:e})):"function"==typeof r[e.type]&&r[e.type]()}catch(e){u.A.error(e)}},onLoadedTracks:function(e,t){Re.fetching=!1;try{if(t&&t.initializing&&he.trackList.length)return;if(e.data?t.data=e.data:Array.isArray(e)?t.data=e:t.data=[e],"player_default_playlist"!==(0,n.A)(t,"context.TYPE")&&0===t.data.length&&!t.addQueue&&!t.addNext){const e=L.A.getState().user.PLAYLIST_WELCOME_ID,r="player_default_playlist";return void Re.play({autoplay:t.autoplay,context:{ID:e,TYPE:r},id:e,radio:!1,sync:!1,type:S.default.get("log_contexts")[r]})}if(e.tuner&&e.tuner!==L.A.getState().user.USER.OPTIONS.tuner&&L.A.dispatch((0,B.mZ)("tuner",e.tuner)),0===t.data.length)return;t.offset>0&&t.data.length>0&&(t.data[0].OFFSET=t.offset),e.clearRemainingTracks&&me.remove(Re.getIndexSong()+1,Re.getNbSongs()),Re.play(t)}catch(e){F.A.log(e,t)}},playTrackAtIndex:async function(e,t=!0,r=Re.helper.getTrackTypeByIndex(e),a={}){try{return!(ye(Re.getPlayerType())||!await Re.hasValidLicense()||(Re.chromecast.isCasting()?(Re.chromecast.executeAction("playAtIndex",[e]),0):(me.setIndex(e),Re.setPlayerType(r),Re._play(t,!1,a),Re.getRepeat()===I.EV.SINGLE&&Re.control.setRepeat(I.EV.ALL),t||(Re.setPropValue("paused",!1),Re.setPropValue("playing",!1)),0)))}catch(e){return u.A.error(e),!1}},setIndexSong:function(e){try{me.setIndex(e)}catch(e){u.A.error(e)}},setTrackList:function(e,t,r){try{if(ye(Re.getPlayerType()))return!1;t=t||!1,r=r||!1;const{filteredTrack:a,futureIndex:s}=Re._getFilteredTrackListData(e);return!(0===a.length||(Re.chromecast.isCasting()||!t&&!r?(me.set(a,e),me.setIndex(s),e.index=s,e.offset>0&&(e.data[e.index].OFFSET=e.offset),Re.getRepeat()===I.EV.SINGLE&&Re.control.setRepeat(I.EV.ALL),Re.isShuffle()&&Re.getPlayerType()===I.Cc.MOD&&!Re.chromecast.isCasting()&&me.shuffle(e.index),Re.isMuted()&&Re.control.mute(!1),Re.chromecast.isCasting()?e.playOnChromecast?(Re.chromecast.executeAction("playTracks"),0):(_.A.trigger(_.A.player.displayCurrentSong,Re.getCurrentSong(),e),_.A.trigger(_.A.player.play,{value:Re.getCurrentSong()}),0):(void 0!==e.context&&e.context.TYPE.indexOf("adsTracking")>-1&&_.A.trigger(_.A.ads.playMusic,"interaction_play"),Re._play(e.autoplay,!1,{sync:e.sync}),0)):(me.set(a,{addQueue:t,addNext:r,caller:e.caller,notify:(0,n.A)(e,"notify",!0)}),void 0!==e.context&&e.context.TYPE.indexOf("adsTracking")>-1&&_.A.trigger(_.A.ads.addToQueueList,"interaction_queuelist"),_.A.trigger(_.A.player.displayCurrentSong,Re.getCurrentSong(),e),0)))}catch(e){return u.A.error(e),!1}},getTrackList:function(e,t){if(!0===e)return!0===t&&Re.isShuffle()?he.trackListOriginal:he.trackList;for(var r=[],a=0;a<he.trackList.length;a++)!0===t&&Re.isShuffle()&&he.trackListOriginal[a]?r.push(he.trackListOriginal[a].data):he.trackList[a]&&r.push(he.trackList[a].data);return r},_getFilteredTrackListData(e){let t=e.index,r=[],a=[];for(let i=0;i<e.data.length;i++){if("object"!=typeof e.data[i])continue;let n=!1;if(Re.chromecast.isCasting()&&e.chromecast)r.push({data:e.data[i].data,context:e.data[i].context}),n=!0;else{const t=T.A.checkSongAvailable(e.data[i]);e.data[i].UID=(0,Z.A)();const o=(0,V.q)(Re.getMediaType(e.data[i]));if(t===T.A.READABLE&&null!==o){const t=(0,V.D)(e.data[i],o);if(t){const r=(0,K.v6)(L.A.getState().bookmarks,o,t);r&&(e.data[i].OFFSET=r.offset)}r.push({data:e.data[i],context:e.context});continue}if(e.radio&&t===T.A.EXPLICIT_LYRICS)continue;t===T.A.READABLE?(r.push({data:e.data[i],context:e.context}),n=!0):"object"==typeof e.data[i].FALLBACK&&T.A.checkSongAvailable(e.data[i].FALLBACK)===T.A.READABLE?(e.data[i].SNG_ID_ORIGIN=e.data[i].SNG_ID,r.push({data:s().extend({},e.data[i],e.data[i].FALLBACK),context:e.context}),n=!0):a.push(t)}i===t&&(t=n?r.length-1:r.length)}return{filteredTrack:r,futureIndex:t,unavailableTrackCode:a}},getTrackListType:function(){return he.trackListType},setTrackListType:function(e){he.trackListType=e},getTrackListIndex:function(){return he.trackListIndex},getTrackListDuration:function(){return he.trackListDuration||0},fetchRecommendations:function(e){if(!L.A.getState().user.id||!L.A.getState().user.hasUpNext||0!==Number(Re.appId)||Re.getMediaType()===I.zu.LIVE_STREAM||Re.getMediaType()===I.zu.EPISODE)return e();if("up_next_artist"!==Re.getTrackListType()){for(var t,r=he.trackList.length-1;r>=0;r--)if(he.trackList[r].data.SNG_ID>0){t=he.trackList[r].data;break}t&&(he.recommendationsSngId=t.SNG_ID,he.recommendationsArtId=t.ART_ID)}A.A.call({method:"radio.getUpNext",data:{sng_id:he.recommendationsSngId,art_id:he.recommendationsArtId,limit:10},success:function(t){e(t.data)},error:function(){e()}})},getLivestreamData:function(e){const t={id:Number(e.LIVESTREAM_ID),title:e.LIVESTREAM_TITLE,picture:e.LIVESTREAM_IMAGE_MD5,isFingerprinted:Number(e.LIVESTREAM_IS_FINGERPRINTED)||0,codec:null,url:null},r=Object.keys(e.LIVESTREAM_URLS.data).sort((function(e,t){return Number(t)-Number(e)}));for(let a=0,s=r.length;a<s;a++){const s=r[a];for(let r in e.LIVESTREAM_URLS.data[s])if(-1!==Re.SUPPORTED_CODECS.indexOf(r)){t.codec=r,t.url=e.LIVESTREAM_URLS.data[s][r];break}if(null!==t.codec&&null!==t.url)break}return 1===Number(e.LIVESTREAM_IS_FINGERPRINTED)&&(Re.liveStreamChannel="-1_0_LIVESTREAM_"+e.LIVESTREAM_ID,h.A.addChannel(Re.liveStreamChannel),_.A.subscribe(_.A.live.livestream,Re.onGetLiveStreamTrack)),[{MD5_ORIGIN:t.url,LIVESTREAM_IMAGE_MD5:t.picture,LIVE_STREAM:!0,EXTERNAL:!0,FORMAT:t.codec,TYPE:1,LIVESTREAM_TITLE:t.title,LIVE_ID:t.id,IS_FINGERPRINTED:t.isFingerprinted}]},fingerprintSubscribe:function(){var e=Re.getCurrentSong();0!==e.IS_FINGERPRINTED&&(Re.liveStreamChannel="-1_0_LIVESTREAM_"+e.LIVE_ID,h.A.addChannel(Re.liveStreamChannel),_.A.subscribe(_.A.live.livestream,Re.onGetLiveStreamTrack),A.A.call({method:"livestream.getMedia",data:{LIVESTREAM_ID:e.LIVE_ID},success:function(e){!1!==e&&_.A.trigger(_.A.player.displayRecognizedTrack,e)}}))},onGetLiveStreamTrack:function(e,t){null!==t[0].VALUE.MEDIA?A.A.call({method:"song.getData",data:{SNG_ID:t[0].VALUE.MEDIA.ID},success:function(e){_.A.trigger(_.A.player.displayRecognizedTrack,e)}}):_.A.trigger(_.A.player.displayRecognizedTrack,null)},enqueueTracks:function(e,t){try{Re.setTrackList({data:e,context:t},!0,!1)}catch(e){u.A.error(e)}},addNextTracks:function(e,t){try{Re.setTrackList({data:e,context:t},!1,!0)}catch(e){u.A.error(e)}},isRadio:function(){return Re.getPlayerType()===I.Cc.RADIO},isWidget:function(){return"widget"===Re.appType},getIndexSong:function(){return he.trackListIndex},getNbSongs:function(){return he.trackList.length},getNbSongsTotal:function(){return he.nbSongsTotal},setNbSongsTotal:function(e){he.nbSongsTotal=e},isLastSong:function(){return!(Re.getRepeat()>0)&&he.trackListIndex>=Re.getNbSongs()-1&&(!Re.chromecast.isCasting()||null===Re.chromecast.getChunksInfo().next)},getTotalDuration:function(){let e=0;for(let t=0;t<he.trackList.length;t++)isNaN(he.trackList[t].data.DURATION)||(e+=parseInt(he.trackList[t].data.DURATION,10));return e},getNextSong:function(){let e=null;if(0==Re.repeat||Re.isRadio())e=he.trackListIndex+1<Re.getNbSongs()?he.trackList[he.trackListIndex+1].data:null;else if(1==Re.repeat){const t=he.trackListIndex==he.trackList.length-1?0:he.trackListIndex+1;e=he.trackList[t]?he.trackList[t].data:null}else 2==Re.repeat&&(e=Re.getCurrentSong());return null===e&&Re.chromecast.isCasting()&&null!==Re.chromecast.getChunksInfo().next&&(e={}),e},getPrevSong:function(){let e=null;if(0==Re.getRepeat()||Re.isRadio())e=he.trackListIndex>0?he.trackList[he.trackListIndex-1].data:null;else if(1==Re.getRepeat()){const t=0==he.trackListIndex?he.trackList.length-1:he.trackListIndex-1;e=he.trackList[t]?he.trackList[t].data:null}else 2==Re.getRepeat()&&(e=Re.getCurrentSong());if(null===e&&Re.chromecast.isCasting()){const t=Re.chromecast.getChunksInfo();null!=t&&void 0!==t.prev&&null!==t.prev&&(e={})}return e},getCurrentSong:function(e=""){try{e="MEDIA_ID"===e?Re.getMediaId():e;const t={SNG_ID:0,ART_ID:0,ALB_ID:0,ALB_PICTURE:"",URL:"",DURATION:0},r=he.trackList[he.trackListIndex],a=Re.getPlayerType();return void 0!==r&&void 0!==r.data&&a!==I.Cc.ADS&&a!==I.Cc.JINGLE?""===e?new p.A(r.data):r.data[e]||t[e]:""===e?null:t[e]}catch(e){u.A.error(e)}},isAdvertisingAllowed:function(){return!([I.zu.EPISODE].indexOf(Re.getMediaType())>-1&&!Number(Re.getCurrentSong("SHOW_IS_ADVERTISING_ALLOWED")))},getMediaType:function(e=Re.getCurrentSong()){return null===e?ye(Re.getPlayerType())?I.zu.ADS:null:void 0!==e.EPISODE_ID?I.zu.EPISODE:e.LIVE_STREAM?I.zu.LIVE_STREAM:e.EXTERNAL?I.zu.EXTERNAL:I.zu.SONG},getMediaId:function(e=Re.getCurrentSong()){if(null===e)return!1;switch(Re.getMediaType(e)){case I.zu.EPISODE:return"EPISODE_ID";case I.zu.LIVE_STREAM:return"LIVE_ID";case I.zu.EXTERNAL:return"EXTERNAL_ID";default:return"SNG_ID"}},getContext:function(e){try{const t={ID:"",TYPE:"",CONTEXT_ID:""};return ye(Re.getPlayerType())?t:void 0!==he.trackList[he.trackListIndex]&&void 0!==he.trackList[he.trackListIndex].context?"string"!=typeof e?he.trackList[he.trackListIndex].context:he.trackList[he.trackListIndex].context[e]:"string"!=typeof e?null:t[e]}catch(e){u.A.error(e)}},getContextByIndex:function(e){return(he.trackList[e]||{}).context||{ID:"",TYPE:"",CONTEXT_ID:""}},getContextByIndexFromOriginal:function(e){return(Re.getTrackList(!0,!0)[e]||{}).context||{ID:"",TYPE:"",CONTEXT_ID:""}},getRepeat:function(){return Ie()?("string"==typeof Re.repeat&&Re.repeat.length>1&&(Re.repeat=0),parseInt(Re.repeat,10)):0},getPosition:function(){return Re.position},getExactPosition:function(){return Re.trigger("audioPlayer_getPosition",[])},getDuration:function(){return Re.duration||(Re.getCurrentSong()||{}).DURATION},getRemainingTime:function(){return Re.duration-Re.position},getVolume:function(){return Re.volume},isShuffle:function(){return!!Le()&&Re.shuffle},removeTracks:function(e,t){if(parseInt(e,10)!=e||e<0){const e=new Error("removeTracks: index param must be a positive integer");throw e.name="DZPLAYER",e}if(void 0===t)t=1;else if(parseInt(t,10)!=t||t<=0){const e=new Error("removeTracks: length param must be a strictly positive integer");throw e.name="DZPLAYER",e}if(Re.getIndexSong()==e){if(1===he.trackList.length)return!1;const r=me.remove(e,t),a=he.trackList.length>1?e%(he.trackList.length-1):0;return Re.playTrackAtIndex(a,Re.isPlaying()),r}return me.remove(e,t)},replaceTracks:function(e,t,r){Re.removeTracks(e,Re.getNbSongs()-e),Re.enqueueTracks(t,r)},orderTracks:function(e){return me.order(e)},isMuted:function(){return Re.muted},isPlaying:function(){return Re.playing},isPaused:function(){return Re.paused},isFetching:function(){return Re.fetching},getArtistName:function(){return Re.getCurrentSong("ART_NAME")},getAlbumTitle:function(){return Re.getCurrentSong("ALB_TITLE")},getSongTitle:function(){return Re.getCurrentSong("SNG_TITLE")},getPlayerType:function(){return Re.playerType},getPlayerTypeId:function(){return Re.playerType===I.Cc.RADIO?1:0},setPlayerType:function(e){Re.getPlayerType()!==e&&(Re.playerType=e,e===I.Cc.RADIO&&Re.radioSkipSetTimer(),Re.trigger("audioPlayer_setType",[e])),fe.trigger(_.A.player.changePlayerType,Re.playerType)},getSongId:function(){return Re.getCurrentSong("MEDIA_ID")},isLoading:function(){return Re.loading},getCover:function(){return Re.getCurrentSong("ALB_PICTURE")},setOffline:function(e){Re.trigger("audioPlayer_setOffline",[e])},sendFile:function(e){Re.trigger("audioPlayer_sendFile",[e])},isLimited:function(){return(0,o.A)(Re.user_status)>0&&(void 0===Re.user_status.limited||Re.user_status.limited)},getRadioType:function(){return Re.radioType},getRadioId:function(){return Re.radioId},radioStartListen:function(e,t){Re.radioType=t,Re.radioId=e,fe.trigger(_.A.radio.start,{type:t,id:e})},radioSkipSetTimer:function(e=!1){clearTimeout(Re.radioSkipIntervalId),Re.radioSkipIntervalId=0,!0===e&&(Re.radioSkipCounter=0),Re.isRadio()&&(Re.radioSkipIntervalId=setTimeout(Re.radioSkipSetTimer,Re.radioSkipInterval,!0))},helper:{isPlayingFlow:function(){const e=Re.getContext();return(0,n.A)(Re.chromecast.getMedia(),"customData.playingFlow")||null!==e&&/user_radio|flow_tab_flow|flow_config/.test(e.TYPE)},isPlayingUserFlow:function(){const e=Re.getContext();return(0,n.A)(Re.chromecast.getMedia(),"customData.playingFlow")||null!==e&&/user_radio|flow_tab_flow/.test(e.TYPE)&&String(L.A.getState().user.id)===String(Re.getContext("ID"))},getTrackTypeByIndex:function(e){if(e>he.trackList.length)return Re.getPlayerType();const t=he.trackList[e];return/radio(s)?$|^(smart)?radio|livestream|mix|up_next_artist|flow$/.test(t.context.TYPE)?I.Cc.RADIO:I.Cc.MOD}},control:{canSeek:function(){return!(Re.chromecast.isLoading()||Re.getMediaType()===I.zu.LIVE_STREAM||(!Re.isRadio()||!(0,G.ki)(L.A.getState().user))&&Re.getPlayerType()!==I.Cc.MOD)},play:async function(){try{if(Re.chromecast.isLoading())return!1;if(!1===Re.isPlaying()&&!1===Re.isPaused()){if(!await Re.hasValidLicense())return!1;0!==Re.getCurrentSong("MEDIA_ID")&&(Re._play(!0),Re.getNbSongs()<Re.getNbSongsTotal()&&Re.loadTracks({id:Re.getContext("ID"),type:Re.getTrackListType(),start:Re.getNbSongs(),radio:Re.isRadio(),context:Re.getContext(),addQueue:!0,caller:"player"}))}else fe.trigger(_.A.player.resume,{value:Re.getCurrentSong()}),Re.trigger("audioPlayer_play",["resume",Re.getPosition()]);return!0}catch(e){return u.A.error(e),!1}},pause:function(){try{if(Re.chromecast.isLoading())return!1;if(ye(Re.getPlayerType()))return!1;Re.trigger("audioPlayer_pause"),(0,o.A)(Re.logTrack)>0&&void 0!==Re.logTrack.stat&&Re.logTrack.stat.pause++}catch(e){u.A.error(e)}},stop:function(){let e=!0;Re.chromecast.isLoading()&&(e=!1),Re.chromecast.isCasting()&&Re.getMediaType()===I.zu.LIVE_STREAM&&Re.chromecast.executeAction("stop"),ye(Re.getPlayerType())&&(e=!1),Re.getMediaType()!==I.zu.LIVE_STREAM&&Re.getMediaType()!==I.zu.EPISODE&&(e=!1),Re.getMediaType()===I.zu.EPISODE&&(e=!1),Re.liveStreamChannel&&_.A.trigger(_.A.player.displayRecognizedTrack,null),Re.trigger("audioPlayer_stop",[!1]),e&&Re.logManager(!1)},nextSong:async function(e){try{if(x.A.intent(x.A.TIME_TO_NEXT),!await Re.hasValidLicense())return!1;if(Re.chromecast.isLoading())return!1;if(ye(Re.getPlayerType()))return!1;if(Re.getMediaType()===I.zu.LIVE_STREAM)return!1;"boolean"!=typeof e&&(e=!1),e||(Re.chromecast.isCasting()||(0===(0,o.A)(Re.logTrack)&&Re.logManager(!1),(0,o.A)(Re.logTrack)>0&&void 0!==Re.logTrack.stat&&(Re.logTrack.stat.next=!0)),Re.isRadio()&&Re.radioSkipCounter++);var t=!0;if(e&&Re.playerType===I.Cc.MOD&&(t=!Re.isLimited()),Re.previousSkipAction="next",Re.chromecast.isCasting())return Re.chromecast.executeAction("nextSong"),!0;if(e||_.A.trigger(_.A.player.trackSkipped,Re.getCurrentSong()),Re.isRadio()&&Re.getCurrentSong("GROUP")){const e=Re.getCurrentSong("GROUP");null!==Re.getNextSong()&&Re.getNextSong().GROUP===e&&me.skipByGroup()}if(Re.getRepeat()!==I.EV.SINGLE||e||Re.control.setRepeat(I.EV.ALL),Re.getRepeat()===I.EV.OFF&&he.trackListIndex<he.trackList.length-1)he.trackListIndex++;else if(Re.getRepeat()===I.EV.ALL&&he.trackListIndex<he.trackList.length-1)he.trackListIndex++;else if(Re.getRepeat()===I.EV.ALL&&he.trackListIndex==he.trackList.length-1)he.trackListIndex=0;else if(Re.getRepeat()!==I.EV.SINGLE&&!Re.helper.isPlayingFlow())return Re.fetchRecommendations((function(r){r&&r.length?"up_next_artist"===Re.getTrackListType()?(Re.setTrackList({data:r,context:{TYPE:"up_next_artist",ID:Number(he.recommendationsSngId)}},!0,!1),he.trackListIndex++,Re._play(t,e)):(Re.setTrackList({data:r,context:{TYPE:"up_next_artist",ID:Number(he.recommendationsArtId)},index:0},!1,!1),Re.setTrackListType("up_next_artist"),Re.radioStartListen(Number(he.recommendationsSngId),"up_next_artist"),me.setIndex(0),Re.setPlayerType(I.Cc.RADIO),Re._play(t,e)):(Re.playing=!1,Re.logManager(!1),Re.setPlayerType(I.Cc.MOD),he.trackListIndex=0,Re._play(!1,!0),fe.trigger(_.A.player.finishTrackList))})),!1;return await Re._play(t,e)}catch(e){return u.A.error(e),!1}},prevSong:async function(){try{if(x.A.intent(x.A.TIME_TO_PREVIOUS),!await Re.hasValidLicense())return!1;if(Re.chromecast.isLoading())return!1;if(ye(Re.getPlayerType()))return!1;if(Re.getMediaType()===I.zu.LIVE_STREAM)return!1;if(!Re.chromecast.isCasting()&&(0,o.A)(Re.logTrack)>0&&void 0!==Re.logTrack.stat&&(Re.logTrack.stat.prev=!0),Re.previousSkipAction="prev",Re.chromecast.isCasting())return Re.chromecast.executeAction("prevSong"),!0;if(_.A.trigger(_.A.player.trackSkipped,Re.getCurrentSong()),Re.getRepeat()===I.EV.SINGLE&&Re.control.setRepeat(I.EV.ALL),Re.getRepeat()===I.EV.OFF&&he.trackListIndex>0)he.trackListIndex--;else if(Re.getRepeat()===I.EV.ALL&&he.trackListIndex>0)he.trackListIndex--;else{if(Re.getRepeat()!==I.EV.ALL||0!=he.trackListIndex)return!1;he.trackListIndex=he.trackList.length-1}return await Re._play(!0)}catch(e){return u.A.error(e),!1}},togglePause:function(){try{if(Re.chromecast.isLoading())return!1;Re.isPlaying()?(x.A.intent(x.A.TIME_TO_PAUSE),Re.control.pause()):(x.A.intent(x.A.TIME_TO_PLAY),Re.control.play())}catch(e){u.A.error(e)}},setRepeat:function(e,t){try{return!!Ie()&&(Re.repeat=e,_.A.trigger(_.A.player.repeat_changed,Re.repeat,t),f.A.set({site:{player_repeat:Re.repeat}}),Re.chromecast.isCasting()&&Re.chromecast.executeAction("repeatChanged",[Re.repeat]),!0)}catch(e){return u.A.error(e),!1}},setVolume:function(e,t){try{if(Re.chromecast.isLoading())return!1;if(ye(Re.getPlayerType()))return!1;t=t||!1,Re.volume=e,Re.trigger("audioPlayer_setVolume",[e]),_.A.trigger(_.A.player.volume_changed,Math.round(100*e)),Re.isMuted()&&e>0&&Re.control.mute(!1),Re.isMuted()||0!==e||Re.control.mute(!0),t&&g.default.set("volume",Re.volume)}catch(e){u.A.error(e)}},setShuffle:function(e){try{if(!Le())return;Re.shuffle=e,!Re.chromecast.isCasting()&&Re.getCurrentSong()&&(Re.shuffle?me.shuffle():me.unShuffle()),fe.trigger(_.A.player.shuffle_changed,Re.shuffle)}catch(e){u.A.error(e)}},mute:function(e){try{if(Re.chromecast.isLoading())return!1;if(ye(Re.getPlayerType()))return!1;if(0===Re.volume&&Re.muted)return!1;Re.muted=!Re.muted,Re.trigger("audioPlayer_mute",[e]),_.A.trigger(_.A.player.mute_changed,Re.muted)}catch(e){u.A.error(e)}},setSmartNotLike:function(){try{Re.chromecast.isCasting()||A.A.call({method:"smart_notLikeSong",data:{sng_id:Re.getCurrentSong("MEDIA_ID")}}),Re.control.nextSong()}catch(e){u.A.error(e)}},seek:function(e){x.A.intent(x.A.TIME_TO_SEEK);try{if(!Re.control.canSeek()||Re.chromecast.isCasting()&&!(0,G.ki)(L.A.getState().user))return!1;Re.trigger("audioPlayer_seek",[e]),(0,o.A)(Re.logTrack)>0&&void 0!==Re.logTrack.stat&&Re.logTrack.stat.seek++,_.A.trigger(_.A.player.seek,e)}catch(e){u.A.error(e)}},setAudioQuality:function(e){try{if(!Object.values(te.en).includes(e))throw new Error(`Invalid quality : ${e}`);_e.quality=e}catch(e){u.A.error(e)}},getAudioQuality:function(){return _e.quality},setNormalized:function(e){const t=Boolean(e);("settings"in _e?_e.settings:_e).normalized=t,_.A.trigger(_.A.player.normalizedChanged,t)},loadLyrics:function(){if(Re.hasLyrics())if(Re.hasLoadedLyrics())_.A.trigger(_.A.lyrics.load);else{const e=Re.getCurrentSong("MEDIA_ID"),t=Re.getCurrentSong("LYRICS_ID");A.A.call({method:"song.getLyrics",data:{SNG_ID:e},success:function(e){e.LYRICS_TEXT&&(e.LYRICS_TEXT=e.LYRICS_TEXT.split(/\r\n|\r|\n/g)),he.lyrics["LYRICS_"+t]=e,_.A.trigger(_.A.lyrics.load)}})}}},getLinkedDevice:function(){return Re.currentLinkedDevice},setLinkedDevice:function(e){if(!e)return void(Re.currentLinkedDevice=null);const{type:t,device_type:r,name:a}=e;Re.currentLinkedDevice={device_type:r,name:a,type:t}},getLyrics:function(){if(Re.hasLoadedLyrics()){const e="LYRICS_"+Re.getCurrentSong("LYRICS_ID");if(Re.hasSyncLyrics())return he.lyrics[e].LYRICS_SYNC_JSON;const t=he.lyrics[e].LYRICS_TEXT;return t&&t.length?t:[]}return null},getLyricsMetadata:function(){if(Re.hasLoadedLyrics()){const e="LYRICS_"+Re.getCurrentSong("LYRICS_ID");return{copyrights:he.lyrics[e].LYRICS_COPYRIGHTS,writers:he.lyrics[e].LYRICS_WRITERS}}return null},hasLyrics:function(){const e=Re.getCurrentSong("LYRICS_ID");return void 0!==e&&0!==e},hasLoadedLyrics:function(){if(!Re.hasLyrics())return!1;const e="LYRICS_"+Re.getCurrentSong("LYRICS_ID");return void 0!==he.lyrics[e]},hasSyncLyrics:function(){if(!Re.hasLoadedLyrics())return!1;const e="LYRICS_"+Re.getCurrentSong("LYRICS_ID"),t=he.lyrics[e].LYRICS_SYNC_JSON,r=(L.A.getState().user.USER.ABTEST.lyrics||{}).behaviour,a="full"!==r&&void 0!==r;return void 0!==t&&0!==t.length&&!a},logManager:function(e){try{if(Re.chromecast.isActive())return;if(void 0===e&&(e=!0),(0,o.A)(Re.logTrack)>0){let t={};if(e&&(0,o.A)(Re.logStartedTrack())>0&&(t=Re.logStartedTrack()),void 0!==Re.user_status.timestamp&&(Re.logTrack.timestamp=Re.user_status.timestamp),Re.logTrack.sng_id>0&&Re.getPlayerType()===I.Cc.MOD&&_.A.trigger(_.A.player.updateRestrictTime,Re.logTrack.lt),Re.sendLog(Re.logTrack,t),!e)return void(Re.logTrack={})}else(0,o.A)(Re.logStartedTrack())&&e&&Re.sendLog(Re.logTrack,Re.logStartedTrack());Re.logTrack=s().extend(!0,{},Re.logTrackTemplate),Re.isLimited()&&(Re.logTrack.l_30sec=1),Re.getLinkedDevice()&&(Re.logTrack.linked_devices=[Re.getLinkedDevice()]),Re.logTrack.media.id=Re.getCurrentSong("MEDIA_ID"),Re.logTrack.media.type=Re.getLogType();const t=Re.getCurrentSong("__PAYLOAD__");(0,o.A)(t)>0&&(Re.logTrack.payload=t),"inapp"===Re.getContext("TYPE")?Re.logTrack.app={id:Re.getContext("ID"),t:Re.getContext("TYPE")}:0!==Number(Re.appId)&&(Re.logTrack.app={id:Re.appId,t:Re.appType}),""!=Re.getContext("TYPE")&&(Re.logTrack.ctxt.t=Re.getContext("TYPE")),""!=Re.getContext("ID")&&(Re.logTrack.ctxt.id=Re.getContext("ID")),""!=Re.getContext("CONTEXT_ID")&&(Re.logTrack.ctxt.c=Re.getContext("CONTEXT_ID")),Re.logTrack.ts_listen=(0,G.mI)(L.A.getState().user),"live"===Re.getLogType()&&(Re.logTrack.session_id=Re.LOG_UID),Re.logTrack.type=Re.getPlayerTypeId()}catch(e){u.A.error(e)}},logStartedTrack:function(){try{let e={};return null!==Re.getCurrentSong()&&L.A.getState().user.id>0&&(e={id:Re.getCurrentSong("MEDIA_ID"),type:Re.getLogType()}),e}catch(e){u.A.error(e)}},getLogType:function(){let e=Re.getMediaType();return e===I.zu.LIVE_STREAM&&Re.getCurrentSong("MEDIA_ID")>0&&(e="live"),e===I.zu.EPISODE&&(e="talk"),e},sendLog:function(e,t){try{if(Re.chromecast.isActive())return;let r={};if((0,o.A)(e)>0)switch(!1===Re.isPaused()&&_.A.trigger(_.A.player.trackChange,{previousTrack:{id:e.media.id,type:e.media.type,offset:Re.getPosition(),duration:Re.getDuration()}}),r.params=e,r.params.is_shuffle=Re.shuffle,r.params.stream_id=d()(),Re.getRepeat()){case I.EV.ALL:r.params.repeat_type="repeat_all";break;case I.EV.SINGLE:r.params.repeat_type="repeat_one"}(0,o.A)(t)>0&&(r.next_media={media:t});const a=["MP3_128","MP3_320","MP3_64","MP3_MISC","AAC_96","FLAC","MP4_RA1","MP4_RA2","MP4_RA3"];if(r.params&&!a.includes(r.params.media.format)){const{format:e,id:t,type:a}=r.params.media||{},{id:s,t:i}=r.params.ctxt||{},n=(0,G.F6)(L.A.getState().user),o=new le.A({id:ue.Ps.DEBUG_LOG_LISTEN,tags:{contextId:String(s),contextType:String(i),mediaFormat:String(e),mediaID:String(t),mediaType:String(a),userID:String(n)}});o.increment(),o.send()}return A.A.call({method:"log.listen",data:r,success:function(e){Re.token=e,!1!==Re.token&&Re.trigger("audioPlayer_setToken",[Re.token])},error:()=>{const e=A.A.getRequest({method:"log.listen",data:r});_.A.trigger(I.JW.PLAY_LOG_FAILED,{request:e})}}),!0}catch(e){u.A.error(e)}},setLogQuality(e){Re.logTrack&&Re.logTrack.media&&(Re.logTrack.media.format=e)},setLogCacheStatus(e){Re.logTrack&&Re.logTrack.stat&&(Re.logTrack.stat.sync=e?1:0)},restoreSetting:function(e){try{if(0==(0,o.A)(e))return!1;const t=Re.chromecast.isCasting()?L.A.getState().user.currentCastAudioQuality:L.A.getState().user.currentAudioQuality;return Re.volume=g.default.get("volume",.5),void 0!==e.site.player_repeat&&(Re.repeat=e.site.player_repeat),_.A.trigger(_.A.player.volume,Re.volume),_.A.trigger(_.A.player.shuffle_changed,Re.shuffle),_.A.trigger(_.A.player.repeat_changed,Re.repeat,{sync:!1}),Re.control.setVolume(Re.volume),Re.control.setAudioQuality(t),!0}catch(e){u.A.error(e)}},setAppId:function(e){try{Re.appId=e}catch(e){u.A.error(e)}},setApp:function(e){try{Re.appId=e.id,Re.appType=e.type}catch(e){u.A.error(e)}},setPropValue:function(e,t){try{if("onError"===e)return Re.control.stop(),L.A.dispatch({type:Q.f.SHOW_MODAL,name:"PLAYER_ERROR",props:{error:t,retry:()=>Re.control.play()}}),A.A.call({method:"deezer.playerLoadingError",data:{id:Re.getCurrentSong("MEDIA_ID"),type:Re.getLogType()}}),!1;if("qualityChanged"===e)return _.A.trigger(_.A.player.qualityChanged,t),!1;if("preloadComplete"===e||"preloadAborted"===e)return _.A.trigger(_.A.player[e],t),"preloadComplete"===e?Re.cached[t]=!0:delete Re.cached[t],!1;if("duration"==e&&0==t)return!1;if("loadingStats"==e)return t.partIndex<=2&&t.sngId>0&&t.sngId==Re.getCurrentSong("MEDIA_ID")&&(Re.logTrack.ls[t.partIndex]={duration:t.loadingTime,size:t.size,host:t.hostname}),!1;if("position"==e&&t>0){if(!Number.isFinite(t))return!1;if(Re.lastPosition!=Math.floor(t)&&(Re.logTrack.lt+=1,Re.getMediaType()===I.zu.LIVE_STREAM&&Re.logTrack.lt%Re.LOG_INTERVAL_LIVE_STREAM==0&&Re.logManager()),Re.lastPosition=Math.floor(t),ye(Re.getPlayerType())&&void 0!==t&&_.A.trigger(_.A.player.adsVastPlaying,{position:t}),Math.floor(t)==Re.getDuration()-20&&!Re.isLimited()&&ye(Re.getPlayerType())&&Re.getPlayerType()!==I.Cc.JINGLE){const e=Re.getNextSong();null!==e&&void 0!==e.DURATION&&e.DURATION>60&&void 0===Re.cached[e.SNG_ID]&&(Re.cached[e.SNG_ID]=!1,Re.trigger("audioPlayer_preloadTrack",[[Re.getNextSong()]]))}}if("finish"==e&&_.A.trigger(_.A.player.track_end,t),Re[e]=t,"user_status"===e){const{audio_qualities:e,license_token:r}=t,a=[te.en.STANDARD,te.en.HIGH];if(Re.html5.flac&&a.push(te.en.LOSSLESS),_.A.trigger(_.A.player.licenseChanged,t),L.A.dispatch((0,B.mZ)("license_token",r)),L.A.dispatch((0,B.Ju)(e,a)),Re.user_status.limited&&L.A.getState().user.id>0&&(0,G.ki)(L.A.getState().user)){const e=new Error("user_status limited:"+Re.token);throw e.name="DZPLAYER",e}}if("string"!=typeof _.A.player[e]){const e=new Error("Unknown Event : "+JSON.stringify(arguments));throw e.name="DZPLAYER",e}_.A.trigger(_.A.player[e],t)}catch(e){u.A.error(e)}},trigger:function(e,t=[]){try{if(!1===Re.user_status.preview)return;if(Re.playerLoaded){if(Re.chromecast.isLoading())return;if(Re.chromecast.isCasting()){switch(t[0]){case"flashAction":Te(e,t);break;case"resume":Re.chromecast.executeAction("resume",t);break;default:Re.chromecast.executeAction(e,t)}return}Te(e,t)}else"audioPlayer_playTracks"===e&&_e.ready.then((()=>Re.trigger(e,t)))}catch(e){u.A.error(e)}},getOutputByContextPage:function(e){switch(e){case $.CONTEXT_PAGE_SEARCH_TAB_EPISODE:return"EPISODE";case $.CONTEXT_PAGE_SEARCH_TAB_LYRICS:return"LYRICS";default:return"TRACK"}},setForbiddenListen:function(){}};Re.html5={async init(){if(!Re.html5.supported||_e)return;if(R.A.isAllowed("cdn_metrics")&&(0,U.Ts)(),Ae=new m.A(Re),R.A.isAllowed("gapless_playback")){var e;const{default:t,DEFAULT_NORMALIZATION_TARGET:a}=await Promise.all([r.e(26),r.e(247),r.e(7396),r.e(3831),r.e(8538)]).then(r.bind(r,"mwoR")),{isRadio:s,isWidget:i,setLogCacheStatus:n,setLogQuality:o,setPropValue:c}=Re,{user:d}=L.A.getState();return _e=new t({license:(0,G.Ay)(d),logger:(0,j.WV)({itemType:ee.Wi.FEATURE,itemName:"player-logger"})?console:void 0,muted:Re.muted,normalizationTarget:null!==(e=(0,G.nd)(d))&&void 0!==e?e:a,normalized:(0,G.ZR)(d),quality:(0,G.z2)(d),volume:Re.volume,cdn:/^https/.test(self.location.origin)?`https://${S.default.get("template_host_stream_cdn_url_ssl")}`:`http://${S.default.get("template_host_stream_cdn_url")}`,fetch:se(ce(self.fetch)),getCurrentTimestamp:()=>(0,G.mI)(d),isConnected:()=>(0,G.UJ)(d),isRadio:s,isWidget:i,mediaServiceURL:(0,j.WV)({itemType:ee.Wi.CONFIG,itemName:"media-service"})||(0,G.zJ)(d),renewLicense:()=>Re.renewLicense(),renewToken:e=>Re.renewToken(e),setPropValue:(e,t)=>{var r;const[a=[]]="loading"===e?t:(null===(r=_e)||void 0===r?void 0:r.loaded.current)||[],[,s]=a;if(a.length&&(function([[{track:e},t]],{property:r,value:a}){e.type===ne.xh&&t.format===ie.a_&&("loading"===r&&oe.Ay.mark(oe.ts.FETCH_REQUEST),"metadata"===r&&(oe.Ay.mark(oe.ts.FETCH_RESPONSE),oe.Ay.log({episodeId:e.id,podcastId:e.parent.id,response:206,url:t.sources[0].url||"unknown"})),"onError"===r&&(oe.Ay.mark(oe.ts.FETCH_RESPONSE),oe.Ay.log({episodeId:e.id,podcastId:e.parent.id,response:"cause"in a&&a.cause instanceof MediaError?a.cause:666,url:t.sources[0].url||"unknown"})))}([a],{property:e,value:t}),function(e,{property:t,value:r}){const[[{context:a,track:s},i]]=e;if((0,W.bU)(i))return;const n={...a,format:i.format.name,id:s.id,type:s.type};"paused"===t&&!0===r&&x.A.measure(x.A.TIME_TO_PAUSE,n),"playing"===t&&!0===r&&(x.A.measure(x.A.TIME_TO_NEXT,n),x.A.measure(x.A.TIME_TO_PLAY,n),x.A.measure(x.A.TIME_TO_PREVIOUS,n),x.A.measure(x.A.TIME_TO_RESUME,n)),"seekCompleted"===t&&x.A.measure(x.A.TIME_TO_SEEK,n)}([a],{property:e,value:t})),"loading"===e)return o(s.format.name),c("pourcentLoaded",100),c("qualityChanged",(0,q.Nc)(s.format)),void c(e,!1);var i;"metadata"===e&&n(null===(i=_e._source)||void 0===i?void 0:i.fromCache),["metadata","muted","normalized"].includes(e)||c(e,t)}}),await _e.ready,c("playerLoaded",!0),void _.A.trigger(_.A.player.normalizedChanged,(0,G.ZR)(d))}const{default:t}=await Promise.all([r.e(247),r.e(3831),r.e(6034)]).then(r.bind(r,"lnC4"));t.TARGET=(0,G.nd)(L.A.getState().user)||t.TARGET,_e=new t(Re),Re.control.setNormalized(((e=!0)=>Boolean(e))(L.A.getState().user.USER.SETTING.site.player_normalize))},flac:(!l.A.is("safari")||l.A.satisfies({safari:">=14"}))&&self.MediaSource&&self.MediaSource.isTypeSupported&&new self.MediaSource&&self.MediaSource.isTypeSupported(te.bH.FLAC_IN_MP4),supported:M.$.HTML5Renderer},window.dzPlayer=Re;const Pe=Re},CyAC:(e,t,r)=>{"use strict";r.d(t,{AP:()=>c,Gr:()=>_,Q3:()=>A,Wh:()=>p,bA:()=>E,cV:()=>l,ek:()=>d,vp:()=>u});var a=r("lXQd"),s=r("sAMA"),i=r("xobL"),n=r("eC9Z"),o=r("pUfN");function c(e){return(0,a.A)(e,"EXPLICIT_TRACK_CONTENT.EXPLICIT_LYRICS_STATUS",0)===s.Os}function d(e="",t=[]){return t.includes(e)}function l(e){const t=Object.keys(e).includes("EXPLICIT_ALBUM_CONTENT")?"EXPLICIT_ALBUM_CONTENT.EXPLICIT_COVER_STATUS":"EXPLICIT_TRACK_CONTENT.EXPLICIT_COVER_STATUS";return(0,a.A)(e,t,0)===s.Os}function u(e,t){return(0,n.WV)({itemType:o.Wi.FEATURE,itemName:"ForceExplicit"})||l(t)&&_(e)}function _(e){const t=(0,n.WV)({itemType:o.Wi.FEATURE,itemName:"ForceExplicit"}),r=(0,i.Uw)(e);return t||r===s.g}function A(e){const t=(0,a.A)(e,"EXPLICIT_ALBUM_CONTENT.EXPLICIT_LYRICS_STATUS",0);return l(e)||t===s.B3||t===s.Os?s.zf:s.yC}function E(e,t){return(0,i.Uw)(e)===s.g&&(0,a.A)(t,"EXPLICIT_ALBUM_CONTENT.EXPLICIT_LYRICS_STATUS",0)===s.Os}function p(e){return Number((0,a.A)(e,"SHOW_IS_EXPLICIT",0))===s.Os}},fJgm:(e,t,r)=>{"use strict";r.d(t,{A:()=>p}),r("/eM8");var a=r("lXQd"),s=r("H/eQ"),i=r("vXsw"),n=r("FdMc"),o=r("Wp0Y"),c=r("5G9X"),d=r("fkXJ"),l=r("WKgy"),u=r("34sk"),_=r("OPhi"),A=r("xobL");const E={removeSoftDelay:3e3,removeSoftTimers:{},isFavorite:(e,t)=>(0,_.BA)(l.A.getState().feedbacks,t,e),toggle:e=>!1===(0,A.UJ)(l.A.getState().user)?(i.g.goToConnection(),Promise.resolve()):new Promise(((t,r)=>{s.A.ready(s.A.user.userReady,(()=>{E.isFavorite(e.type,e.id)?E.remove(e).then(t).catch(r):E.add(e).then(t).catch(r)}))})),async add({id:e,type:t,context:r}){if(window.clearTimeout(this.getRemoveSoftTimerId(e,t)),!1===(0,A.UJ)(l.A.getState().user))return void i.g.goToConnection();if(e=String(e),E.isFavorite(t,e))return;const _=this.formatContext(r);try{await l.A.dispatch((0,u.c2)(e,t,(0,n.A)(),_)),(0,a.A)(r,"TYPE","").indexOf("adsTracking")>-1&&s.A.trigger(s.A.ads.addToFavorite,"interaction_add_favorite")}catch(e){const r=((e,t)=>{switch(e){case c.Ay.Artist:return(0,o.AP)("Impossible d'ajouter cet artiste  vos favoris. Vous avez atteint le nombre maximum d'artistes favoris.");case c.Ay.Album:return(0,o.AP)("Impossible d'ajouter cet album  votre musique prfre. Vous avez atteint le nombre maximum d'albums ajouts.");case c.Ay.Song:return"QUOTA_ERROR"===t.name?(0,o.AP)("notification_text_maxnumberoftracksreached_web"):null;case c.Ay.Radio:return"QUOTA_ERROR"===t.name?(0,o.AP)("Impossible d'ajouter ce mix  votre musique prfre. Vous avez atteint le nombre maximum de mix ajouts."):null;default:return null}})(t,e);r&&(0,d.A)({body:r})}},async remove({id:e,type:t,context:r}){if(!1===(0,A.UJ)(l.A.getState().user))return void i.g.goToConnection();if(!Array.isArray(e)&&!E.isFavorite(t,String(e)))return;const a=this.formatContext(r),s=Array.isArray(e)?(0,u.Oo)(e.map(String),t,a):(0,u.$S)(String(e),t,a);try{await l.A.dispatch(s)}catch(e){}},removeSoft({id:e,type:t,context:r}){if(!1===(0,A.UJ)(l.A.getState().user))return void i.g.goToConnection();e=String(e);const a=this.formatContext(r);l.A.dispatch((0,u.Ti)(e,t,a)),this.removeSoftTimers[this.getRemoveSoftTimerKey(e,t)]=window.setTimeout((()=>{l.A.dispatch((0,u.$S)(e,t,a,!0))}),this.removeSoftDelay)},restore({id:e,type:t}){e=String(e),window.clearTimeout(this.getRemoveSoftTimerId(e,t)),l.A.dispatch((0,u.ZP)(e,t))},getFavoriteTimestamp:(e,t)=>(e=String(e),(0,_.vN)(l.A.getState().feedbacks,e,t)),getRemoveSoftTimerKey:(e,t)=>`${e}_${t}`,getRemoveSoftTimerId(e,t){const r=this.getRemoveSoftTimerKey(e,t);return this.removeSoftTimers[r]},formatContext:e=>"object"==typeof e&&Object.keys(e).length>=2?{id:e.ID,t:e.TYPE,c:e.CONTEXT_ID}:{}},p=E},Wp0Y:(e,t,r)=>{"use strict";r.d(t,{AP:()=>i,Ts:()=>s,WI:()=>n}),r("/eM8");var a=r("DL/y");async function s(e="en-US"){try{const t=await r("mdgW")(`./${e}`);(0,a.i)(e,t,{nsSeparator:":::",keySeparator:"::"})}catch(t){throw new Error(`Could not load translations for language ${e}`)}}function i(e,t={}){if(!e)throw new Error("gettext called with an empty key");return(0,a.T)(e,t)}function n(e,t,r={}){if(!arguments.length||arguments.length<3)throw new Error(`ngettext() called with incorrect number of arguments ${[e,t,r].join(",")}`);if(void 0===r.count)throw new Error(`ngettext() called with no "count" attribute ${[e,t,r].join(",")}`);const s=Number(r.count);return(0,a.T)(e,{...r,count:s})}},iooo:(e,t,r)=>{"use strict";r.d(t,{Tn:()=>o,Uv:()=>i,jd:()=>n});var a=r("WKgy");const s={"/":!0,channels:!0,artist:!0,album:!0,playlist:!0,company:!0,jobs:!0,offers:!0,devices:!0,download:!0,features:!0,track:!0,show:!0,shows:!0,profile:!0,episodes:!0,episode:!0,explore:!0,activate:!0,sync:!0,exclusions:!0,smarttracklist:!0,concert:!0,concerts:!0};function i(e){let t={};return-1!==e.indexOf("?")&&e.substring(e.indexOf("?")+1).split("&").forEach((function(e){if("undefined"!==e.split("=")[0]&&"undefined"!==e.split("=")[1]){let r=e.split("=")[0],a=e.split("=")[1];t[r]=decodeURIComponent(a)}})),t}function n(e,t=!1){if(!e||"undefined"===e)return"";let r=location.search,n=i(location.search);r.match(/(?:\?|&)(?:utm_source|utm_campaign|utm_term|utm_content|utm_medium)=/g)&&([r,n]=function(e,t){["utm_campaign","utm_content","utm_medium","utm_term","utm_source"].forEach((e=>delete t[e]));const r=encodeURIComponent;return["?"+Object.keys(t).map((e=>r(e)+"="+r(t[e]))).join("&"),t]}(0,n)),"string"==typeof e&&-1!==e.indexOf("?")&&(r=r.replace(/\?/g,"&"));const o="string"==typeof(e+=r)?e.split(/\/|\?/):[],c=void 0===o[1]?"/":o[1];return(void 0!==s[c]&&!0===s[c]||"/"===e)&&(e="string"==typeof e?`/${a.A.getState().user.SETTING_LANG}${e}`:e),"string"==typeof e&&n.origin&&(e=function(e,t){let r=i(e),a="";return-1!==e.indexOf("?")&&(e=e.split("?")[0]),Object.keys(t).forEach((e=>{r[e]=t[e]})),Object.keys(r).forEach(((e,t,s)=>{a+=encodeURIComponent(e),"undefined"!==r[e]&&(a+="="+encodeURIComponent(r[e])),t<s.length-1&&(a+="&")})),e+"?"+a}(e,{origin:n.origin})),function(e,t,r=location.search){let a=i(r);return void 0!==a[e]&&a[e]===t}("lg","1")&&!0===t&&(e=function(e,t){let r=i(e),a="";return-1!==e.indexOf("?")&&(e=e.split("?")[0]),["rg","lg"].forEach((e=>{delete r[e]})),Object.keys(r).forEach(((e,t,s)=>{a+=encodeURIComponent(e),"undefined"!==r[e]&&(a+="="+encodeURIComponent(r[e])),t<s.length-1&&(a+="&")})),e+"?"+a}(e)),e}function o(e){return`https://www.deezer.com/explore/${{us:"en-us",es:"es-es",mx:"es",br:"pt-br",cn:"zh"}[e]||e}/features/`}},YaJs:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>d,n7:()=>u,qB:()=>l,yl:()=>i}),r("EV0h"),r("gS5K");var a=r("LOQS"),s=r("GXXn");const i=600,n=new Map,o="undefined"!=typeof PerformanceObserver;let c;const d=()=>{o&&(c&&"disconnect"in c&&c.disconnect(),c=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{if((e=>"resource"===e.entryType)(e)){const t=new URL(e.name);if(37!==t.hash.length)return;const r=t.hash.replace("#",""),i=n.get(r);i&&(((e,t,r)=>{const i=e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,n=new URL(e.name),o={scheme:"http:"===n.protocol?"http":"https",host:n.host,uri:n.pathname,response_code:t,dns_resolution_ms:Math.round(e.domainLookupEnd-e.domainLookupStart),tcp_connect_ms:Math.round(e.connectEnd-e.connectStart-i),ssl_handshake_ms:Math.round(i),wait_ms:Math.round(e.responseStart-e.requestStart),answer_download_ms:Math.round(e.responseEnd-e.responseStart),answer_headers_bytes:e.transferSize-e.encodedBodySize,answer_body_bytes:e.encodedBodySize};r&&(o.client_ip=r),a.A.log((0,s.L)("network.cdn_metrics","3.0.0",o))})(e,i.response_code,i.client_ip),n.delete(r))}}))})),c.observe({entryTypes:["resource"]}))},l=(e,t,r,a)=>{if(!o)return;const s={uri:t,response_code:r};a&&(s.client_ip=a),n.set(e,s)},u=e=>{o&&n.delete(e)}},ZoPi:(e,t,r)=>{"use strict";r.d(t,{A:()=>p}),r("WpbS");var a=r("LOQS"),s=r("tZCQ"),i=r("2oWs"),n=r("UWRA"),o=r("dgCO"),c=r("D+Zh"),d=r("UfUf"),l=r("KBFD"),u=r("lWgj"),_=r("SLMx"),A=r("GXXn"),E=r("ZQ26");const p=new class{constructor(e,t,r){this._gatekeeper=void 0,this._logCenter=void 0,this._userContext=void 0,this._logCenter=e,this._gatekeeper=t,this._userContext=r}log(e,t){if(!this._gatekeeper.isAllowed("metric.playback_errors"))return;const r=Object.entries(this._getPayload(e,t)).filter((([,e])=>void 0!==e)).reduce(((e,[t,r])=>Object.assign(e,{[t]:r})),{}),a=(0,E.M)(r);this._logCenter.log((0,A.L)("playback.playback_errors","1.0.0",a))}_getPayload(e,t){var r,a;const s=_.A.get(),{offer_id:i,user_id:A}=this._userContext.get(),E={type:l.T.LAN};if(void 0===t)return{error:{type:d.By.OTHER_ERROR,subtype:d.fP.OTHER,message:e.message||"Player is empty"},client_ip:s,offer_id:i,user_id:A,network:E,media:{id:"undefined",type:d.zu.SONG}};const p={id:String(t.id),type:String(null!==(r=t.type)&&void 0!==r?r:d.zu.SONG),format:(null===(a=t.format)||void 0===a?void 0:a.name)===u.a_.name?"MP3_MISC":t.format.name,version:String(t.version),container_type:t.containerType};return t.idOrigin&&(p.id=String(t.idOrigin),p.fallback_id=String(t.id)),e instanceof o.LV?{error:{type:d.By.STREAM_BLANK_ERROR,message:e.message||e.name},client_ip:s,offer_id:i,user_id:A,network:E,media:{...p,url:t.url,sources:t.sources}}:(0,n.l)(e)?{error:{type:d.By.DECRYPTION_ERROR,message:e.message||e.name},client_ip:s,offer_id:i,user_id:A,network:E,media:{...p,url:t.url,sources:t.sources}}:e instanceof c.Dr?{error:{type:d.By.NETWORK_ERROR,message:e.message||e.name},client_ip:s,offer_id:i,user_id:A,network:E,media:p}:{error:{type:d.By.OTHER_ERROR,subtype:d.fP.OTHER,message:e.message||e.name},client_ip:s,offer_id:i,user_id:A,network:E,media:p}}}(a.A,s.A,i.It)},UfUf:(e,t,r)=>{"use strict";r.d(t,{By:()=>a,fP:()=>s,lD:()=>n,zu:()=>i});let a=function(e){return e.DECRYPTION_ERROR="DecryptionError",e.STREAM_BLANK_ERROR="StreamBlankError",e.NETWORK_ERROR="NetworkError",e.OTHER_ERROR="OtherError",e}({}),s=function(e){return e.NO_NETWORK="NoNetwork",e.TIMEOUT="Timeout",e.OTHER="Other",e}({}),i=function(e){return e.EPISODE="episode",e.EXTERNAL="external",e.LIVE="live",e.SONG="song",e}({}),n=function(e){return e.SMARTRADIO="smart_radio",e.MOD="music_on_demand",e}({})},Vynx:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T,A:()=>I});var a=r("tZCQ"),s=r("lWgj"),i=r("LOQS"),n=r("GXXn"),o=r("SLMx"),c=r("RxH4"),d=r("D/zM"),l=r("+pY+");const u=class{constructor(e){this._counter=void 0,this._counter=new d.A({id:l.Ps.PLAYBACK_ATTEMPTS,tags:e})}log(){a.A.isAllowed("metric.playback_attempts")&&(this._counter.increment(),this._counter.send())}};var _=r("2oWs"),A=r("5G9X"),E=r("PKMp"),p=r("ZQ26");let T=function(e){return e.ANY_PLAYBACK_ACTION="anyPlaybackAction",e.GET_URL="getUrl",e.START_TRACK_FETCHING="startTrackFetching",e.START_RENEW_URL="startRenewUrl",e.END_RENEW_URL="endRenewUrl",e.START_BUFFERING="startBuffering",e.END_OF_PLAYBLACK_ACTION="endOfPlayblackAction",e}({});const g=["external","live",A.Ay.Livestream,A.Ay.Song,A.Ay.Episode,"undefined"],S=[],h=[T.ANY_PLAYBACK_ACTION,T.GET_URL,T.START_TRACK_FETCHING,T.START_RENEW_URL,T.END_RENEW_URL,T.START_BUFFERING,T.END_OF_PLAYBLACK_ACTION];function f(){const e={};for(let t=0;t<h.length-1;t++){const r=h[t];let a,s=1,i=null;for(;null===i&&s<h.length;)a=h[t+s],i=(0,c.pm)(r,a),null===i&&s++;c.FO.clearMarks(r),e[r]=i||0}const t=Math.round(e[T.ANY_PLAYBACK_ACTION]),r=Math.round(e[T.GET_URL]+e[T.START_RENEW_URL]),a=Math.round(e[T.START_TRACK_FETCHING]),s=Math.round(e[T.START_BUFFERING]);return{player_init:t,drm_call:r,track_fetch:a,buffer:s,total:t+r+a+s}}let m;const y={TIME_TO_NEXT:"next",TIME_TO_PAUSE:"pause",TIME_TO_PLAY:"play",TIME_TO_PREVIOUS:"previous",TIME_TO_RESUME:"resume",TIME_TO_SEEK:"seek",intent(e){m=e,h.forEach(c.FO.clearMarks.bind(c.FO)),y.markTimeToPlayAction(T.ANY_PLAYBACK_ACTION),S.push({fulfilled:!1,name:e,time:c.FO.now()}),(e===y.TIME_TO_PLAY||e===y.TIME_TO_NEXT||e===y.TIME_TO_PREVIOUS)&&new u({playback_action:e}).log()},markTimeToPlayAction(e){c.FO.mark(e)},measure(e,t={}){const r=function(e){let t=S.length;for(;t--;)if(S[t].name===e)return S[t];return null}(e),{offer_id:d,user_id:l}=_.It.get();if(!r)return;if(!0===r.fulfilled||void 0===r.fulfilled)return;y.markTimeToPlayAction(T.END_OF_PLAYBLACK_ACTION);const u=c.FO.now()-r.time;r.context={container:t.container||t.name||t.TYPE||"unknown",format:"EXTERNAL"===t.format?"MP3_MISC":t.format||"unknown",id:t.id||t.ID||0,type:(t.type||"unknown").replace("_","")};const A={context:r.context,duration:u,name:`${r.name}:end`,time:c.FO.now()};S.push(A);const h={action:"next"===m||"previous"===m?`skip${m}`:m,elapsed:f(),media:{container:String(r.context.container),format:String(r.context.format),id:String(r.context.id),type:String(r.context.type)},source:"online",drm_version:"0",offer_id:d,user_id:l},I=o.A.get();I&&(h.client_ip=I),h.media.format!==s.a_.name&&a.A.isAllowed("use_media_service")&&(h.drm_version="1");const L=h.elapsed.total>6e4;if(!L&&a.A.isAllowed("metric.timetoplay")&&g.includes(h.media.type)){const e=(0,p.M)(h);i.A.log((0,n.L)("playback.time_to_play","3.0.0",e))}else L&&E.A.error("Time To Play Impossible Value",h);r.fulfilled=!0}},I=y},Uat9:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,ts:()=>d}),r("EV0h"),r("gS5K");var a=r("tZCQ"),s=r("LOQS"),i=r("RxH4"),n=r("GXXn"),o=r("KBFD"),c=function(e){return e[e.NETWORK_ERROR=600]="NETWORK_ERROR",e[e.FORMAT_ERROR=603]="FORMAT_ERROR",e[e.RESET_BY_PEER=604]="RESET_BY_PEER",e[e.CONNECTION_TIMED_OUT=610]="CONNECTION_TIMED_OUT",e[e.CONNECTION_REFUSED=611]="CONNECTION_REFUSED",e[e.HOST_IS_DOWN=612]="HOST_IS_DOWN",e[e.BAD_RESPONSE=674]="BAD_RESPONSE",e[e.UNKNOWN_ERROR=666]="UNKNOWN_ERROR",e}(c||{});let d=function(e){return e.FETCH_REQUEST="podcast_fetch_request",e.FETCH_RESPONSE="podcast_fetch_response",e}({});function l(e){switch(e.code){case MediaError.MEDIA_ERR_ABORTED:return c.RESET_BY_PEER;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return c.CONNECTION_REFUSED;case MediaError.MEDIA_ERR_DECODE:return c.BAD_RESPONSE;case MediaError.MEDIA_ERR_NETWORK:default:return c.NETWORK_ERROR}}const u=new class{constructor(e,t){this.logCenter=void 0,this.gatekeeper=void 0,this.logCenter=e,this.gatekeeper=t}log(e){if(!this.gatekeeper.isAllowed("metric.podcastdownload"))return;const t=(0,i.pm)(d.FETCH_REQUEST,d.FETCH_RESPONSE);if(!(t&&e.podcastId&&e.episodeId&&e.response))return;const r=new URL(e.url);this.logCenter.log((0,n.L)("network.podcast_download_metrics","2.0.0",{host:r.host,network:{type:o.T.LAN},podcast_episode_id:e.episodeId,podcast_id:e.podcastId,request_ms:Math.round(t),response_code:e.response instanceof MediaError?l(e.response):e.response,scheme:"http:"===r.protocol?"http":"https",uri:r.pathname}))}mark(e){this.gatekeeper.isAllowed("metric.podcastdownload")&&i.FO.mark(e)}}(s.A,a.A)},KBFD:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});let a=function(e){return e.LAN="LAN",e.Mobile="mobile",e.Plane="plane",e.OfflineForced="offline_forced",e}({})},ZQ26:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var a=r("UfUf"),s=r("5G9X");const i={[a.zu.EPISODE]:"talk",[a.zu.EXTERNAL]:a.zu.EXTERNAL,[a.zu.LIVE]:a.zu.LIVE,[a.zu.SONG]:a.zu.SONG,[s.Ay.Track]:s.Ay.Album,[s.Ay.Livestream]:s.Ay.Album};function n(e){return e.media.type?{...e,media:{...e.media,type:(t=e.media.type,i[t]||t)}}:e;var t}},"o+h5":(e,t,r)=>{"use strict";r.d(t,{Ay:()=>g,H9:()=>E,QE:()=>p,Tg:()=>A,fn:()=>n,kv:()=>c,qy:()=>_,r4:()=>i,r8:()=>o,t6:()=>u,yz:()=>d});var a=r("Vd8Q"),s=r("CyAC");const i={name:"xxx-small",width:40,height:40},n={name:"xx-small",width:56,height:56},o={name:"x-small",width:60,height:60},c={name:"small",width:250,height:250},d={name:"medium",width:500,height:500},l=[i,n,o,c,d,{name:"large",width:1e3,height:1e3}],u="album",_="playlist",A="show",E="virtual",p=[u,_,A,E],T={covers(e){const t=e.EPISODE_IMAGE_MD5||e.SHOW_ART_MD5?"talk":"cover",r=e.ALB_PICTURE||e.EPISODE_IMAGE_MD5||e.LIVESTREAM_IMAGE_MD5||e.PLAYLIST_PICTURE||e.SHOW_ART_MD5||"d41d8cd98f00b204e9800998ecf8427e";return l.map((({name:e,width:s,height:i})=>({name:e,width:s,height:i,url:`https://${a.default.get("host_img_url_ssl")}/${t}/${r}/${i}x${s}-000000-80-0-0.jpg`})))},hasExplicitCover:e=>(0,s.cV)(e),id:e=>String(e.ALB_ID||e.LIVE_ID||e.LIVESTREAM_ID||e.PLAYLIST_ID||e.SHOW_ID||""),name:e=>e.ALB_TITLE||e.LIVESTREAM_TITLE||e.SHOW_NAME||e.TITLE||"",path(e){const t=T.id(e);switch(T.type(e)){case u:return`/album/${t}`;case _:return`/playlist/${t}`;case A:return`/show/${t}`;default:return null}},type:e=>e.ALB_ID?u:e.PLAYLIST_ID?_:e.SHOW_ID?A:null};class g{constructor(e,t=Object.keys(T)){const r=Object.keys(T);(Array.isArray(t)?t:r).filter((e=>r.includes(e))).forEach((t=>Object.defineProperty(this,t,{enumerable:!0,value:T[t](e)}))),Object.freeze(this)}cover(e=c){const t=(e||{}).name;return this.covers.find((e=>e.name===t))}}g.parser=T},iwso:(e,t,r)=>{"use strict";r.d(t,{QE:()=>p,xh:()=>u,R$:()=>E,Ay:()=>g}),r("Ukb7"),r("WpbS"),r("W8Tb"),r("hjmM");var a=r("lXQd"),s=r("lWgj"),i=r("CxZw"),n=r("CyAC");const o={id:e=>e.ART_ID,name:e=>e.ART_NAME,path(e){const t=o.id(e);return"0"===String(t)?null:`/artist/${e.ART_ID}`}};class c{constructor(e,t=Object.keys(o)){const r=Object.keys(o);(Array.isArray(t)?t:r).filter((e=>r.includes(e))).forEach((t=>Object.defineProperty(this,t,{enumerable:!0,value:o[t](e)}))),Object.freeze(this)}}c.parser=o;var d=r("o+h5"),l=r("Vzbh");const u="episode",_="external",A="live",E="song",p=[u,_,A,E],T={artist:e=>T.type(e)===E?new c(e):null,artists:e=>(e.ARTISTS||[e]).map((e=>new c(e))).filter(((e,t,r)=>r.findIndex((t=>t.id===e.id))===t)),covers:e=>T.type(e)===u?e.EPISODE_PICTURE_MD5:T.parent(e).covers,date:e=>Number(e.DATE_FAVORITE||e.DATE_UPDATE||e.DATE_ADD||e.EPISODE_PUBLISHED_TS||e.TS||0),description:e=>e.EPISODE_DESCRIPTION||e.SHOW_DESCRIPTION||void 0,disk:e=>Number(e.DISK_NUMBER)||null,duration:e=>T.type(e)===A?1/0:Number(e.DURATION||e.duration)||T.sources(e).filter((e=>e.size&&e.format.bitrate)).map((e=>Math.round(8*e.size/(1e3*e.format.bitrate)))).reduce(((e,t,r,{length:a})=>e+t/a),0),fallback:e=>e.FALLBACK&&!e.SNG_ID_ORIGIN?new g(e.FALLBACK):null,featuring(e){const t=(0,a.A)(e,"MULTI_ARTIST",[]);return 0===t.length?t:t.map((e=>{if(e.ROLE_ID&&(0===Number(e.ROLE_ID)||5===Number(e.ROLE_ID)))return new c(e)}))},gain:e=>Number(e.GAIN),hasExplicitLyrics:e=>T.type(e)===u?(0,n.Wh)(e):(0,n.AP)(e),id(e){if(e.SNG_ID_ORIGIN)return e.SNG_ID_ORIGIN;switch(T.type(e)){case u:return String(e.EPISODE_ID||"");case _:return String(e.EXTERNAL_ID||"");case A:return String(e.LIVE_ID||e.LIVESTREAM_ID||"");default:return String(e.SNG_ID||"")}},lyricsId:e=>e.LYRICS_ID?String(e.LYRICS_ID):null,md5:e=>e.MD5_ORIGIN||"",number:e=>Number(e.TRACK_NUMBER)||null,parent:e=>new d.Ay(e),popularity:e=>e.RANK_SNG?Math.round(Number(e.RANK_SNG)/1e5):0,preview(e){const t=(e.MEDIA||[]).filter((e=>"preview"===e.TYPE)).map((e=>Array.isArray(e.HREF)?e.HREF[0]:e.HREF)).shift();return t?{format:s.Fy,url:t,usePipeline:!1}:null},right:e=>i.A.checkSongAvailable(e.FALLBACK||e),sources(e){if(e.EPISODE_DIRECT_STREAM_URL&&Boolean(Number(e.SHOW_IS_DIRECT_STREAM)))return[{format:s.a_,url:e.EPISODE_DIRECT_STREAM_URL,usePipeline:!1}];if(e.LIVESTREAM_URLS){const t=["aac","mp3"];return Object.keys(e.LIVESTREAM_URLS.data).sort(((e,t)=>Number(t)-Number(e))).map((r=>Object.entries(e.LIVESTREAM_URLS.data[r]).filter((([e])=>t.includes(String(e).toLowerCase()))).map((([,e])=>({format:s.a_,url:e,usePipeline:!1}))))).flat()}return e.EXTERNAL||e.LIVE_STREAM?[{format:s.a_,url:T.md5(e),usePipeline:!1}]:s.SP.map((t=>({format:t,size:Number(e[`FILESIZE_${t.name}`])}))).filter((e=>e.size))},title:e=>(e[{[u]:"EPISODE_TITLE",[A]:"LIVESTREAM_TITLE"}[T.type(e)]]||e.SNG_TITLE)+(e.VERSION?` ${e.VERSION}`:""),token:e=>e.TRACK_TOKEN||"",type:e=>e.EPISODE_ID?u:e.LIVE_ID||e.LIVESTREAM_ID?A:e.EXTERNAL?_:E,variation:e=>Number(e.VARIATION)||0,version:e=>Number(e.MEDIA_VERSION)||0};class g{constructor(e,t=Object.keys(T)){this.legacy=e;const r=Object.keys(T),a=void 0===e?{}:e;(Array.isArray(t)?t:r).filter((e=>r.includes(e))).forEach((e=>this[e]=T[e](a)))}cover(e){return this.parent.cover(e)}source(e=l.en.STANDARD,{previous:t}={}){const r=Math.max(this.sources.indexOf(t)+1,0);if(1===this.sources.length&&this.sources[0].format===s.a_)return this.sources.slice(r).shift();let a=s.SP;return e===l.en.HIGH?a=[s.Y7,...s.SP.slice(s.SP.indexOf(s.fq))]:e===l.en.STANDARD&&(a=[s.Y7,...s.SP.slice(s.SP.indexOf(s.Fy))]),a.map((e=>this.sources.find((t=>t.format===e)))).filter(Boolean).slice(r).shift()}}g.parser=T},Wwhz:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const a=class{constructor(e){this.set(e)}set(e){for(let t in e)({}).hasOwnProperty.call(e,t)&&(this[t]=e[t]);return this}};class s extends a{getFallback(){if(this.hasFallback())return new s(this.FALLBACK).set({ORIGIN_ID:Number(this.SNG_ID||this.EPISODE_ID),UNSEEN:this.UNSEEN,DATE_ADD:this.DATE_ADD})}hasFallback(){return this.FALLBACK}isUnseen(e){return e&&this.DATE_ADD?this.DATE_ADD>e:null}static hydrate(e){var t=[];for(let r=0,a=e.length;r<a;++r)t[r]=new this(e[r]);return t}}const i=s},LjZa:(e,t,r)=>{"use strict";function a(){}r.d(t,{A:()=>a})},"7E8A":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CONTEXT_PAGE_ALBUM:()=>s,CONTEXT_PAGE_ALBUM_DISCOGRAPHY:()=>i,CONTEXT_PAGE_ALBUM_SIMILAR_ARTIST:()=>n,CONTEXT_PAGE_ARTIST_DISCOGRAPHY:()=>l,CONTEXT_PAGE_ARTIST_DISCOGRAPHY_RELATED_ARTIST:()=>_,CONTEXT_PAGE_ARTIST_DISCOGRAPHY_RELATED_PLAYLIST:()=>u,CONTEXT_PAGE_ARTIST_HIGHLIGHT_ALBUM:()=>A,CONTEXT_PAGE_ARTIST_HIGHLIGHT_PLAYLIST:()=>E,CONTEXT_PAGE_ARTIST_HIGHLIGHT_SHOW:()=>p,CONTEXT_PAGE_ARTIST_TAB_RELATED_ARTIST:()=>c,CONTEXT_PAGE_ARTIST_TAB_RELATED_PLAYLIST:()=>d,CONTEXT_PAGE_ARTIST_TAB_TOP_TRACK:()=>o,CONTEXT_PAGE_DYNAMIC_PAGE:()=>a,CONTEXT_PAGE_EPISODE:()=>oe,CONTEXT_PAGE_EXCLUSIONS_TAB_ARTIST:()=>de,CONTEXT_PAGE_EXCLUSIONS_TAB_TRACK:()=>le,CONTEXT_PAGE_MIXES:()=>ce,CONTEXT_PAGE_PLAYLIST:()=>ie,CONTEXT_PAGE_PROFILE:()=>S,CONTEXT_PAGE_PROFILE_RECENTLY_PLAYED:()=>D,CONTEXT_PAGE_PROFILE_TAB_ALBUMS:()=>m,CONTEXT_PAGE_PROFILE_TAB_ARTISTS:()=>y,CONTEXT_PAGE_PROFILE_TAB_DOWNLOADS:()=>h,CONTEXT_PAGE_PROFILE_TAB_FOLLOWERS:()=>I,CONTEXT_PAGE_PROFILE_TAB_FOLLOWING:()=>L,CONTEXT_PAGE_PROFILE_TAB_HOME:()=>f,CONTEXT_PAGE_PROFILE_TAB_PLAYLISTS:()=>R,CONTEXT_PAGE_PROFILE_TAB_RADIOS:()=>P,CONTEXT_PAGE_PROFILE_TAB_SHOWS:()=>O,CONTEXT_PAGE_SEARCH:()=>C,CONTEXT_PAGE_SEARCH_ONBOARDING:()=>ae,CONTEXT_PAGE_SEARCH_TAB_ALBUM:()=>M,CONTEXT_PAGE_SEARCH_TAB_ARTIST:()=>v,CONTEXT_PAGE_SEARCH_TAB_CHANNEL:()=>F,CONTEXT_PAGE_SEARCH_TAB_EPISODE:()=>V,CONTEXT_PAGE_SEARCH_TAB_FLOW_CONFIG:()=>z,CONTEXT_PAGE_SEARCH_TAB_LIVESTREAM:()=>Y,CONTEXT_PAGE_SEARCH_TAB_LYRICS:()=>X,CONTEXT_PAGE_SEARCH_TAB_PLAYLIST:()=>x,CONTEXT_PAGE_SEARCH_TAB_RADIO:()=>U,CONTEXT_PAGE_SEARCH_TAB_SHOW:()=>B,CONTEXT_PAGE_SEARCH_TAB_TRACK:()=>k,CONTEXT_PAGE_SEARCH_TAB_USER:()=>H,CONTEXT_PAGE_SEARCH_TOP_ALBUM:()=>w,CONTEXT_PAGE_SEARCH_TOP_ARTIST:()=>N,CONTEXT_PAGE_SEARCH_TOP_LIVESTREAM:()=>K,CONTEXT_PAGE_SEARCH_TOP_PLAYLIST:()=>b,CONTEXT_PAGE_SEARCH_TOP_SHOW:()=>G,CONTEXT_PAGE_SHOW:()=>ne,CONTEXT_PAGE_SMART_TRACKLIST:()=>se,CONTEXT_PAGE_SONG:()=>T,CONTEXT_PAGE_SONG_RELATED_ALBUM:()=>g,CONTEXT_TOPBAR_POPPER_ALBUM:()=>q,CONTEXT_TOPBAR_POPPER_ARTIST:()=>W,CONTEXT_TOPBAR_POPPER_CHANNEL:()=>Q,CONTEXT_TOPBAR_POPPER_EPISODE:()=>ee,CONTEXT_TOPBAR_POPPER_LIVESTREAM:()=>te,CONTEXT_TOPBAR_POPPER_PLAYLIST:()=>Z,CONTEXT_TOPBAR_POPPER_RADIO:()=>$,CONTEXT_TOPBAR_POPPER_SHOW:()=>J,CONTEXT_TOPBAR_POPPER_TRACK:()=>j,CONTEXT_TOPBAR_POPPER_USER:()=>re});const a="dynamic_page",s="album_page",i="album_discography",n="album_similar_artist",o="top_track",c="related_artist",d="related_playlist",l="artist_discography",u="artist_discography_related_playlist",_="artist_discography_related_artist",A="artist_highlight_album",E="artist_highlight_playlist",p="artist_highlight_show",T="track_page",g="track_related_album",S="profile_page",h="profile_downloads",f="profile_home",m="profile_albums",y="profile_artists",I="profile_followers",L="profile_following",R="profile_playlists",P="profile_radios",O="profile_shows",D="profile_recently_played",C="search",k="search_track",N="search_top_artist",v="search_artist",w="search_top_album",M="search_album",b="search_top_playlist",x="search_playlist",U="search_radio",F="search_channel",G="search_top_show",B="search_show",V="search_episode",K="search_top_livestream",Y="search_livestream",H="search_user",X="search_lyrics",z="search_flow_config",j="topbar_popper_track",W="topbar_popper_artist",q="topbar_popper_album",Z="topbar_popper_playlist",$="topbar_popper_radio",Q="topbar_popper_channel",J="topbar_popper_show",ee="topbar_popper_episode",te="topbar_popper_livestream",re="topbar_popper_user",ae="onboarding",se="smart_tracklist_page",ie="playlist_page",ne="show_page",oe="episode_page",ce="mixes_page",de="exclusions_artists",le="exclusions_tracks"},UWRA:(e,t,r)=>{"use strict";r.d(t,{f:()=>FileError,l:()=>o});var a=r("4OMY"),s=r("/HWm"),i=r("8VJL"),n=(0,a.A)("FileError");class FileError extends i.A{constructor(...e){super(...e),Object.defineProperty(this,n,{writable:!0,value:void 0})}}function o(e){return e instanceof FileError||e instanceof s.f6}},dgCO:(e,t,r)=>{"use strict";r.d(t,{Au:()=>n,Ji:()=>i,LV:()=>c,SY:()=>FormatMismatchError,yw:()=>InsufficientDataError});var a=r("4OMY"),s=r("8VJL");class FormatMismatchError extends s.A{constructor({expected:e,received:t,media:r}){super(),this.expected=e,this.received=t,this.media=r}}class InsufficientDataError extends s.A{}class i extends s.A{constructor({buffer:e}){super(),this.buffer=e}}class n extends s.A{constructor({media:e}={}){super(),this.media=e}}var o=(0,a.A)("StreamBlankError");class c extends s.A{constructor(...e){super(...e),Object.defineProperty(this,o,{writable:!0,value:void 0})}}},"IjN+":(e,t,r)=>{"use strict";r.d(t,{Nc:()=>c,Rq:()=>d,Ug:()=>l,f$:()=>n,f6:()=>o,hR:()=>i}),r("Ukb7"),r("hjmM");var a=r("Vzbh"),s=r("lWgj");const i={[a.en.LOSSLESS]:[s.rv],[a.en.HIGH]:[s.fq],[a.en.STANDARD]:[s.Fy],[a.en.LOW]:[s.se],[a.en.UNKNOWN]:[s.Y7,s.a_]},n=e=>Object.values(i).flat().find((t=>t.enum===e)),o=e=>Object.values(i).flat().find((t=>t.name===e)),c=e=>i[a.en.LOSSLESS].includes(e)?a.en.LOSSLESS:i[a.en.HIGH].includes(e)?a.en.HIGH:i[a.en.STANDARD].includes(e)?a.en.STANDARD:i[a.en.LOW].includes(e)?a.en.LOW:a.en.UNKNOWN,d=e=>e===a.en.UNKNOWN?s.Y7:i[e].length?i[e][0]:s.Fy,l=(a.kM.NONE,a.kM.ALL,a.kM.ONE,30)},"XVw/":(e,t,r)=>{"use strict";r.d(t,{A:()=>s}),r("/eM8");const a={ended:function(){this.bridge.setPropValue("finishPreview",!0)}};class s{constructor(e){this.bridge=e,this.element=document.createElement("audio"),this.element.autoplay=!0,this._listeners={},Object.keys(a).forEach((e=>{this._listeners[e]=a[e].bind(this),this.element.addEventListener(e,this._listeners[e])}))}load(e){this.element.src=e,this.element.load()}get muted(){return this.element.muted}set muted(e){this.element.muted=Boolean(e)}pause(){return this.element.pause()||Promise.resolve()}play(){return this.element.play()||Promise.resolve()}stop(){return this.pause(),this.element.src="",Promise.resolve()}get volume(){return this.element.volume}set volume(e){this.element.volume=e}}},Z64h:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});const a={HTML5Renderer:!0};Object.keys(a)},Vzbh:(e,t,r)=>{"use strict";r.d(t,{bH:()=>a,en:()=>s,kM:()=>i});let a=function(e){return e.FLAC="audio/flac",e.FLAC_IN_MP4='audio/mp4; codecs="flac"',e.MP3="audio/mpeg",e.MP3_IN_MP4='audio/mp4; codecs="mp3"',e}({}),s=function(e){return e.HIGH="high",e.LOSSLESS="lossless",e.LOW="low",e.STANDARD="standard",e.UNKNOWN="unknown",e}({}),i=function(e){return e.ALL="all",e.NONE="none",e.ONE="one",e}({})},"4cGQ":(e,t,r)=>{"use strict";r.d(t,{K$:()=>n,bU:()=>c,r6:()=>o,rm:()=>i}),r("/eM8");var a=r("lWgj"),s=r("WzpB");async function i(e,t,r){if(null==e)throw new TypeError("asyncSome called on `null` or `undefined`");if("function"!=typeof t)throw new TypeError;const a=Object(e),s=e.length>>>0;for(let i=0;i<s;i++)if(i in e&&await t.call(r,a[i],i,a))return!0;return!1}function n(e,t){return e="number"!=typeof e||Number.isNaN(e)?t:e,Math.pow(10,(t-e)/20)}function o(e){if(!(0,s.zf)(e))throw e}function c(e){return e.format===a.Fy&&!1===e.usePipeline}},HGOC:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const a=new(r("XiPH").wQ.Entity)("SONGS",{},{idAttribute:"SNG_ID"})},"6yJ+":(e,t,r)=>{"use strict";r.d(t,{J:()=>a,u:()=>s});const a="ad_config/FETCH";let s=function(e){return e.DEEZER_GO="DeezerGo",e.DEEZER_NOW="DeezerNow",e.DEEZER="Deezer",e}({})},mUtM:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,Hd:()=>o,S7:()=>n});const a="components/Alert/ALERT_SHOW",s="components/Alert/ALERT_HIDE",i="components/Alert/ALERT_HIDE_ALL",n=(e,t={})=>({type:a,id:e,options:t}),o=e=>({type:s,id:e}),c=[];function d(e=c,t){switch(t.type){case a:return e.find((e=>e.id===t.id))?e:[...e,{id:t.id,options:t.options}];case s:return e.filter((e=>e.id!==t.id));case i:return[];default:return e}}},RuKb:(e,t,r)=>{"use strict";r.d(t,{F:()=>l,_l:()=>u,g:()=>_,pD:()=>d,v6:()=>c});var a=r("G4qV"),s=r("nLzw"),i=r("UyDI"),n=r("xobL");const o=(0,a.Ad)(a.UI,s.A)(((e,t)=>{const r=e[t.bookmarkType][t.id];return r?i.A.createFromSerializedBookmark(r,t.bookmarkType):null}),(e=>e)),c=(e,t,r)=>o(e,{bookmarkType:t,id:r}),d=(e,t,r=0)=>Object.values(e.bookmarks[t]).filter((a=>i.A.createFromSerializedBookmark(a,t).ongoing&&a.timestamp/1e3>(0,n.mI)(e.user)-r)).map((e=>e.id)),l=(e,t,r,a)=>{const s=c(e,t,r);return!!s&&s.timestamp>a},u=(e,t,r)=>{const a=c(e,t,r);return!!a&&a.played},_=(e,t,r)=>{const a=c(e,t,r);return!!a&&a.ongoing}},zCrf:(e,t,r)=>{"use strict";r.d(t,{Ax:()=>y,SM:()=>S,bm:()=>m,d0:()=>f,lj:()=>g,mF:()=>T,w8:()=>I}),r("WpbS"),r("/eM8");var a=r("XiPH"),s=r("7+7Q"),i=r("3R0U"),n=r("qlH3"),o=r("nrKQ"),c=r("tZCQ"),d=r("5G9X"),l=r("HGOC"),u=r("OPhi"),_=r("ISNy");let A=!1;const E=[];function p(e){return{...e.DATA,...e}}const T=e=>t=>new Promise(((r,s)=>{A=!0;const i=o.A.call({method:"deezer.pageTrack",data:{sng_id:e.id},success:s=>{const i=(0,a.S8)(p({...s,partial:!1}),l.A);t({type:n.z.FETCHED_TRACK,id:e.id,data:i}),A=!1,r()},error:e=>{A=!1,s(e)}});E.push(i)})),g=e=>({type:n.z.UPDATE_PERSONAL_TRACK,data:e}),S=e=>async(t,r)=>{const s=(0,_.UE)(r().entities,e);!s||s.partial?e.rehydrateData?t({type:n.z.REHYDRATED_TRACK,id:e.id,data:(0,a.S8)(p({...e.rehydrateData,partial:!1}),l.A)}):A||await t(T(e)):t({type:n.z.FETCHED_TRACK_FROM_CACHE,id:e.id})},h=(e,t,r,i)=>n=>new Promise(((d,u)=>{if(c.A.isAllowed("unlimited_favorite_tracks_parallel_fetch")){let n=[];for(;e.length>0;){const r=e.splice(0,t);n.push(o.A.callAsync({method:"song.getListData",data:{sng_ids:r},cachingPolicy:i}).catch((e=>{u(e)})))}return void Promise.all(n).then((e=>{const t=e.reduce(((e,t)=>(0,s.A)(e,...((null==t?void 0:t.data)||[]).map((e=>r?{...e,DATE_ADD:r}:{...e})).map((e=>(0,a.S8)(p(e),l.A))))),{});d(t)}))}const _=e.splice(0,t);0===_.length&&d();const A=o.A.call({method:"song.getListData",data:{sng_ids:_},cachingPolicy:i,error:e=>{u(e)},success:o=>{const c=(0,s.A)({},...o.data.map((e=>r?{...e,DATE_ADD:r}:{...e})).map((e=>(0,a.S8)(p(e),l.A))));e.length>0?n(h(e,t,r,i)).then((e=>{d((0,s.A)({},c,e))})).catch((e=>u(e))):d(c)}});E.push(A)})),f=(e,t=null)=>(r,a)=>new Promise(((s,i)=>{const o=a().entities,c=null!==t?e.ids:e.ids.map((e=>(!(0,_.UE)(o,{id:e})||!(0,_.UE)(o,{id:e}).ALB_ID)&&e)).filter(Boolean).filter(((e,t,r)=>r.indexOf(e)===t));return c.length?(r({id:c,type:n.z.FETCH_TRACKS}),r(h(c.slice(),500,e.DATE_ADD||null,t)).then((e=>{r({type:n.z.FETCH_TRACKS_SUCCESS,id:c,data:e}),s()})).catch((e=>{r({type:n.z.FETCH_TRACKS_FAILURE,id:c,error:e}),i(e)}))):s()})),m=({start:e,nb:t},r={cacheUsage:i.u.READ_ONLY})=>async(a,s)=>{const i=(0,u.ZL)(s().feedbacks,d.Ay.Song).slice(e,e+t);return await a(f({ids:i},r)),i},y=(e,t)=>async(r,a)=>{const s=(0,u.O6)(a().feedbacks,d.Ay.Song).slice(e,e+t);return await r(f({ids:s})),s};function I(){E.forEach(o.A.cancel),A=!1}},qlH3:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});let a=function(e){return e.FETCH_TRACKS="entities/songs/FETCH_TRACKS",e.FETCH_TRACKS_FAILURE="entities/songs/FETCH_TRACKS_FAILURE",e.FETCH_TRACKS_SUCCESS="entities/songs/FETCH_TRACKS_SUCCESS",e.FETCHED_TRACK="entities/songs/FETCHED_TRACK",e.FETCHED_TRACK_FROM_CACHE="entities/songs/FETCHED_TRACK_FROM_CACHE",e.REHYDRATED_TRACK="entities/songs/REHYDRATED_TRACK",e.FETCHED_FAVORITE_TRACKS="entities/songs/FETCHED_FAVORITE_TRACKS",e.UPDATE_PERSONAL_TRACK="entities/songs/UPDATE_PERSONAL_TRACK",e}({})},ISNy:(e,t,r)=>{"use strict";r.d(t,{EM:()=>A,KW:()=>_,UE:()=>u,VL:()=>p,w$:()=>E});var a=r("G4qV"),s=r("nLzw"),i=r("lXQd"),n=r("CxZw"),o=r("5G9X"),c=r("OPhi"),d=r("s026");const l=(0,a.Ad)(a.UI,s.A),u=(e,t)=>{const r=e.SONGS[String(t.id)];if(r)return{...r,SNG_ID:String(r.SNG_ID)}},_=(e,t)=>t.map((t=>u(e,{id:t}))).filter(Boolean),A=l([u,(e,t)=>{const r=u(e,t),a={};return r&&r.ARTISTS?r.ARTISTS.filter((e=>!a[e.ART_ID]&&(a[e.ART_ID]=!0,!0))):[]},(e,t)=>{const r=u(e,t);if(r&&r.LYRICS&&r.LYRICS_ID&&0!==r.LYRICS_ID)return{...r.LYRICS,HAS_SYNC_LYRICS:r.LYRICS.LYRICS_SYNC_JSON&&r.LYRICS.LYRICS_SYNC_JSON.length,LYRICS_TEXT:r.LYRICS.LYRICS_TEXT.split(/\r\n|\r|\n/g)}},(e,t)=>{const r=u(e,t);return(0,i.A)(r,"RELATED_ALBUMS.data")?r.RELATED_ALBUMS.data.filter((e=>n.A.checkSongAvailable(e)===n.A.READABLE)):r&&r.RELATED_ALBUMS?n.A.checkSongAvailable(r):void 0}],((e,t,r,a)=>({...e,FORMATTED_DURATION:(0,d.A)(e?e.DURATION:0),ARTISTS:t,LYRICS:r,RELATED_ALBUMS:a}))),E=l([e=>e.entities,e=>e.feedbacks,e=>(0,c.O6)(e.feedbacks,o.Ay.Song)],((e,t,r)=>r.map((r=>{const a=u(e,{id:r});return"object"==typeof a&&Object.keys(a).length>1?{...a,DATE_ADD:(0,c.A6)(t,o.Ay.Song,r)}:a})).filter(Boolean))),p=l([e=>e.entities,e=>e.feedbacks,e=>(0,c.ZL)(e.feedbacks,o.Ay.Song)],((e,t,r)=>r.map((r=>{const a=u(e,{id:r});return"object"==typeof a&&Object.keys(a).length>1?{...a,DATE_FAVORITE:(0,c.vN)(t,o.Ay.Song,r)}:a})).filter(Boolean)))},"34sk":(e,t,r)=>{"use strict";r.d(t,{$S:()=>E,E$:()=>l,G5:()=>I,G8:()=>y,HS:()=>g,Hq:()=>m,Oo:()=>T,TD:()=>d,Ti:()=>p,ZP:()=>h,c2:()=>_,hh:()=>L,jo:()=>A,rc:()=>R,u5:()=>S,zZ:()=>f}),r("/eM8");var a=r("qobR"),s=r("5G9X"),i=r("xSQY"),n=r("OPhi"),o=r("yJX9"),c=r("uDSo");const d=(e,t,r)=>({type:c.y.ADD_FEEDBACK,feedback:t,feedbackType:e,itemType:r}),l=(e,t,r,a=!1)=>({type:c.y.REMOVE_FEEDBACK,feedbackType:e,id:t,itemType:r,silent:a}),u=(e,t,r)=>({type:c.y.REMOVE_MULTIPLE_FEEDBACKS,feedbackType:e,ids:t,itemType:r}),_=(e,t,r,a)=>async(c,u)=>{await i.A.saveFavorite(e,t,a);const _={id:e,timestamp:r};t===s.Ay.Playlist&&(_.lastSeen=_.timestamp),c(d(o.Z.favorites,_,t)),(0,n.i8)(u().feedbacks,e,t)&&c(l(o.Z.dislikes,e,t,!0))},A=(e,t,r,s,d=!0)=>async(l,_)=>{const A=(0,a.A)(e);d&&await i.A.saveMultipleFavorites(A,t,s);const E=_().feedbacks,p={feedbacks:{},order:[]},T=[];A.forEach((e=>{(0,n.i8)(E,e,t)&&T.push(e),p.feedbacks[e]={id:e,timestamp:r},p.order.push(e)})),l(((e,t,r)=>({type:c.y.ADD_MULTIPLE_FEEDBACKS,feedbackType:e,feedbacks:t,itemType:r}))(o.Z.favorites,p,t)),T.length>0&&l(u(o.Z.dislikes,T,t))},E=(e,t,r,a=!1)=>async s=>{await i.A.removeFavorite(e,t,r),s(l(o.Z.favorites,e,t,a))},p=(e,t)=>r=>{r(((e,t,r)=>({type:c.y.REMOVE_SOFT_FEEDBACK,feedbackType:e,id:t,itemType:r}))(o.Z.favorites,e,t))},T=(e,t,r)=>async a=>{await i.A.removeMultipleFavorites(e,t,r),a(u(o.Z.favorites,e,t))},g=(e,t)=>async r=>{await i.A.removeMultipleDislikes(e,t),r(u(o.Z.dislikes,e,t))},S=(e,t,r)=>async a=>{await i.A.removeDislike(e,t,r),a(l(o.Z.dislikes,e,t))},h=(e,t)=>r=>{r(((e,t,r)=>({type:c.y.RESTORE_FEEDBACK,feedbackType:e,id:t,itemType:r}))(o.Z.favorites,e,t))},f=(e,t,r,a)=>async(s,c)=>{await i.A.saveDislike(e,t,a),s(d(o.Z.dislikes,{id:e,timestamp:r},t)),(0,n.BA)(c().feedbacks,e,t)&&s(l(o.Z.favorites,e,t,!0))},m=()=>async e=>{const t=await i.A.getUserFeedbacks();e({type:c.y.INIT_FEEDBACKS,feedbacks:t})},y=(e,t,r)=>({type:c.y.PRELOAD_FEEDBACKS,feedbackType:e,itemType:t,feedbacks:r}),I=e=>async t=>{t(((e,t)=>({type:c.y.REFRESH_FAVORITES,favorites:e,itemType:t}))(await i.A.getFavorites(e),e))},L=(e,t)=>async r=>{await i.A.updateFavoriteLastSeenDate(s.Ay.Playlist,e),r(((e,t,r,a)=>({type:c.y.UPDATE_LAST_SEEN_DATE,feedbackType:e,itemType:t,id:r,timestamp:a}))(o.Z.favorites,s.Ay.Playlist,e,t))},R=(e,t)=>async(r,a)=>{const s=(0,n.r$)(a().feedbacks,o.Z.favorites,e);r({type:c.y.REORDER_FAVORITES,itemType:e,newOrder:t});try{await i.A.reorderFavorites(e,t)}catch(t){throw r(((e,t)=>({type:c.y.RESTORE_FAVORITES_ORDER,itemType:e,order:t}))(e,s)),t}}},OPhi:(e,t,r)=>{"use strict";r.d(t,{A6:()=>S,BA:()=>p,M2:()=>f,O6:()=>P,YA:()=>I,ZL:()=>R,i8:()=>T,pp:()=>y,r$:()=>l,vN:()=>h});var a=r("nLzw"),s=r("lXQd"),i=r("XOWT"),n=r("G4qV"),o=r("5G9X"),c=r("yJX9");const d=(0,n.Ad)(n.UI,a.A),l=(e,t,r)=>(0,s.A)(e,`[${t}][${r}].order`,[]),u=d([(e,t,r)=>l(e,t,r),(e,t,r)=>(0,s.A)(e,`[${t}][${r}].feedbacks`,{})],((e,t)=>e.map((e=>t[e])))),_=d(((e,t,r,a)=>(0,s.A)(e,`[${t}][${r}].feedbacks[${a}]`,null)),(e=>e)),A=(e,t,r,a)=>{const s=_(e,t,a,r);return s&&s.isDeleted?s.isDeleted:null},E=(e,t,r,a)=>Boolean((0,i.A)(e,`[${t}][${a}].feedbacks[${r}]`)&&!A(e,t,r,a)),p=(e,t,r)=>E(e,c.Z.favorites,t,r),T=(e,t,r)=>E(e,c.Z.dislikes,t,r),g=(e,t,r,a)=>{const s=_(e,t,r,a);return s?s.timestamp:null},S=(e,t,r)=>g(e,c.Z.dislikes,t,r),h=(e,t,r)=>g(e,c.Z.favorites,t,r),f=(e,t)=>{const r=_(e,c.Z.favorites,o.Ay.Playlist,t);return r&&r.lastSeen?r.lastSeen:null},m=(e,t,r,a)=>{const s=u(e,t,r);return a?s.length:s.filter((a=>!A(e,t,a.id,r))).length},y=(e,t,r=!0)=>m(e,c.Z.favorites,t,r),I=(e,t,r=!0)=>m(e,c.Z.dislikes,t,r),L=(e,t,r)=>l(e,t,r),R=(e,t)=>L(e,c.Z.favorites,t),P=(e,t)=>L(e,c.Z.dislikes,t)},uDSo:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});let a=function(e){return e.INIT_FEEDBACKS="feedbacks/INIT_FEEDBACKS",e.PRELOAD_FEEDBACKS="feedbacks/PRELOAD_FEEDBACKS",e.REFRESH_FAVORITES="feedbacks/REFRESH_FAVORITES",e.ADD_FEEDBACK="feedbacks/ADD_FEEDBACK",e.ADD_MULTIPLE_FEEDBACKS="feedbacks/ADD_MULTIPLE_FEEDBACKS",e.REMOVE_FEEDBACK="feedbacks/REMOVE_FEEDBACK",e.REMOVE_MULTIPLE_FEEDBACKS="feedbacks/REMOVE_MULTIPLE_FEEDBACKS",e.REMOVE_SOFT_FEEDBACK="feedbacks/REMOVE_SOFT_FEEDBACK",e.RESTORE_FEEDBACK="feedbacks/RESTORE_FEEDBACK",e.REPLACE_FEEDBACK="feedbacks/REPLACE_FEEDBACK",e.UPDATE_LAST_SEEN_DATE="feedbacks/UPDATE_LAST_SEEN_DATE",e.REORDER_FAVORITES="feedbacks/REORDER_FAVORITES",e.RESTORE_FAVORITES_ORDER="feedbacks/RESTORE_FAVORITES_ORDER",e}({})},aHAS:(e,t,r)=>{"use strict";r.d(t,{C9:()=>T,CJ:()=>_,Cn:()=>v,Ff:()=>A,Iy:()=>R,Ju:()=>C,Km:()=>E,MZ:()=>f,SC:()=>g,Sk:()=>I,So:()=>m,XD:()=>N,Xx:()=>y,b6:()=>P,bB:()=>L,l8:()=>h,mZ:()=>D,me:()=>k,qO:()=>p,tj:()=>S,xf:()=>O}),r("/eM8");var a=r("7+7Q"),s=r("nLzw"),i=r("nrKQ"),n=r("H/eQ"),o=r("WBQ7"),c=r("Wp0Y"),d=r("6Va4"),l=r("xobL"),u=(r("uHHB"),r("IYB/"));const _=e=>({type:u.D.UPDATED_USER_ID,id:e}),A=e=>({type:u.D.UPDATED_USER_PICTURE,picture:e}),E=e=>({type:u.D.UPDATED_USER_NAME,name:e}),p=e=>({type:u.D.UPDATED_SESSION,session:e.SESSION,checkForm:e.CHECKFORM}),T=()=>e=>{i.A.call({method:"deezer.getChildAccounts",success:t=>{e({type:u.D.FETCHED_CHILD_ACCOUNT,data:t})}})},g=(e,t,r)=>a=>{i.A.call({method:"user.createAndGetChild",data:{blog_name:e.blogName,is_kid:e.isKid,kids_consent:e.kidsConsent,sex:e.sex,force_explicit_level:e.forceExplicitLevel,birthday:(new Date).getFullYear()-e.age+"-01-01"},success:e=>{Array.isArray(e)&&1===e.length&&a({type:u.D.CREATE_CHILD_ACCOUNT,data:e[0]}),t()},error:r})},S=e=>t=>new Promise(((r,a)=>{i.A.call({method:"user.updateFamilyAccount",data:{blog_name:e.blogName,sex:e.sex,birthday:e.birthday,is_kid:e.isKid,kids_consent:e.kidsConsent,...e.isExplicitLevelEditable&&{force_explicit_level:e.forceExplicitLevel},user_id_to_edit:e.userId},success:()=>{t((e=>({type:u.D.UPDATE_SUB_PROFILE,payload:e}))({...e,isExplicitLevelEditable:e.isExplicitLevelEditable,caption:e.isKid?(0,c.AP)("familyprofileswitcheraddprofile_title_kidprofile_web"):""})),r()},error:a})})),h=e=>t=>new Promise(((r,a)=>{i.A.call({method:"parentalcontrol.setSettingsForChildAccount",data:{disable_explicit_control:e.forceExplicitLevel,child_id:e.userId},success:()=>{t((e=>({type:u.D.UPDATE_SUB_ACCOUNT,payload:e}))(e)),r()},error:a})})),f=e=>t=>new Promise(((r,a)=>{i.A.call({method:"user.deleteChild",data:{child_id:e.id},success:()=>{t({type:u.D.DELETE_CHILD_ACCOUNT,data:e.id}),r()},error:a})})),m=e=>t=>new Promise(((r,a)=>{i.A.call({method:"family.unlinkUserFromFamily",data:{member_id:e.id},success:()=>{t({type:u.D.UNLINK_CHILD_ACCOUNT,data:e.id}),r()},error:e=>{a(e)}})})),y=(e,t=!1)=>(r,o)=>new Promise(((c,d)=>{const _=o().user,A=(0,l.mt)(_),E=(0,a.A)({},A,e);(0,s.A)(E,A)?c():(r({type:u.D.UPDATED_SETTINGS,data:{updatedSettings:e,notify:t}}),(0,l.UJ)(_)?(n.A.trigger(n.A.user.settingChanged,{notify:t,data:e}),i.A.call({method:"user.setSettings",data:{settings:e},success:()=>{n.A.trigger(n.A.user.settingUpdated,{notify:t,data:e}),c()},error:d})):c())})),I=e=>t=>{i.A.call({method:"deezer.getUserData",success:r=>{t({type:u.D.UPDATED_USER_DATA,data:(0,d.SY)({...r,clientTimestampDelta:0,currentAudioQuality:(0,d.iQ)(r),currentCastAudioQuality:(0,d.dK)(r)})}),e&&e(r)}})},L=e=>t=>{t(((e,t)=>r=>{r(y({site:{desktop_notifications:t}}))})(0,e))},R=e=>t=>new Promise(((r,a)=>{i.A.call({method:"user.updateRecommendationCountry",data:{RECOMMENDATION_COUNTRY:e},success:s=>{!0===s?(t({type:u.D.UPDATED_RECOMMENDATION_COUNTRY,payload:{recommendationCountry:e}}),r()):a(s)},error:a})})),P=e=>t=>{t({type:u.D.UPDATED_USER_DATA,data:(0,d.SY)(e)})},O=e=>t=>{i.A.call({method:"user.updateExplicitContentLevel",data:e,success:()=>{t({type:u.D.UPDATED_USER_LEVEL_DATA,data:e.EXPLICIT_CONTENT_LEVEL})}})},D=(e,t)=>({type:u.D.UPDATED_OPTIONS,key:e,value:t}),C=(e={},t=[])=>({type:u.D.UPDATED_QUALITIES,qualities:e,supported:t}),k=e=>()=>{o.default.set("selectedChildAccount",String(e),!0)},N=(e,t)=>(r,a)=>new Promise(((s,n)=>{r({type:u.D.TOGGLE_OPTIN,name:e,channel:t});const o=a().user,c=(0,l.yi)(o).optin.find((t=>t.name===e));void 0!==c?i.A.call({method:"user.setOptins",data:{OPTIN:[{name:e,channel:c.channel}]},success:s,error:n}):s()})),v=e=>(t,r)=>new Promise(((a,s)=>{t({type:u.D.UNSELECT_ALL_OPTINS,channel:e});const n=r().user;i.A.call({method:"user.setOptins",data:{OPTIN:(0,l.yi)(n).optin.map((e=>({name:e.name,channel:e.channel})))},success:a,error:s})}))},"IYB/":(e,t,r)=>{"use strict";r.d(t,{D:()=>a});let a=function(e){return e.UPDATED_USER_ID="user/UPDATED_USER_ID",e.UPDATED_USER_TOKEN="user/UPDATED_USER_TOKEN",e.UPDATED_SESSION="user/UPDATED_SESSION",e.UPDATED_LASTFM_TOKEN="user/UPDATED_LASTFM_TOKEN",e.UPDATED_RECOMMENDATION_COUNTRY="user/UPDATED_RECOMMENDATION_COUNTRY",e.UPDATED_SETTINGS="user/UPDATED_SETTINGS",e.UPDATING_SETTINGS="user/UPDATING_SETTINGS",e.UPDATED_USER_DATA="user/UPDATED_USER_DATA",e.UPDATED_USER_PICTURE="user/UPDATED_USER_PICTURE",e.UPDATED_USER_NAME="user/UPDATED_USER_NAME",e.UPDATED_USER_LEVEL_DATA="user/UPDATED_USER_LEVEL_DATA",e.UPDATED_OPTIONS="user/UPDATED_OPTIONS",e.UPDATED_QUALITIES="user/UPDATED_QUALITIES",e.UPDATED_CONSENT_STRING="user/UPDATED_CONSENT_STRING",e.FETCHED_CHILD_ACCOUNT="user/FETCHED_CHILD_ACCOUNT",e.CREATE_CHILD_ACCOUNT="user/CREATE_CHILD_ACCOUNT",e.DELETE_CHILD_ACCOUNT="user/DELETE_CHILD_ACCOUNT",e.UNLINK_CHILD_ACCOUNT="user/UNLINK_CHILD_ACCOUNT",e.UPDATE_SUB_PROFILE="user/UPDATE_SUB_PROFILE",e.UPDATE_SUB_ACCOUNT="user/UPDATE_SUB_ACCOUNT",e.TOGGLE_OPTIN="user/TOGGLE_OPTIN",e.UNSELECT_ALL_OPTINS="user/UNSELECT_ALL_OPTINS",e}({})},"6Va4":(e,t,r)=>{"use strict";r.d(t,{SY:()=>o,dK:()=>d,hY:()=>l,iQ:()=>c}),r("WpbS");var a=r("lXQd"),s=r("PKMp"),i=r("r2u9"),n=r("Vzbh");const o=e=>{const t=e.USER.SETTING.global.has_up_next&&e.USER.HAS_UPNEXT;return{...e,id:e.USER.USER_ID,isAuth:0!==e.USER.USER_ID,hasUpNext:void 0===t||t}},c=e=>{let t=(0,a.A)(e,"USER.SETTING.site.player_audio_quality");const r=Object.values(e.qualities||{}).reduce(((e,t)=>[...e,...t]),[]);if(void 0===t){const r=(0,a.A)(e,"USER.SETTING.site.player_hq");t=void 0===r?n.en.LOSSLESS:r?n.en.HIGH:n.en.STANDARD}return t!==n.en.LOSSLESS||r.includes(n.en.LOSSLESS)&&e.supportedQualities.includes(n.en.LOSSLESS)||(t=n.en.HIGH),t!==n.en.HIGH||r.includes(n.en.HIGH)||(t=n.en.STANDARD),[n.en.LOSSLESS,n.en.HIGH,n.en.STANDARD].includes(t)||(t=n.en.STANDARD),t},d=e=>{try{if(!(e.USER&&e.USER.SETTING&&e.USER.SETTING.site&&e.USER.SETTING.site.cast_audio_quality))throw new Error('"cast_audio_quality" key not found in data');const t=e.USER.SETTING.site.cast_audio_quality;if(!Object.values(n.en).includes(t))throw new Error("Not a handled quality");return t}catch(e){return s.A.error(e),n.en.STANDARD}},l=e=>!0===i.Ay.getIsUwpFlag()?`${e}&utm_source=electron&utm_medium=desktopapp&utm_campaign=conversion_banner_msft`:e},CxZw:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var a=r("ucSm"),s=r("Wp0Y"),i=r("CyAC"),n=r("5G9X"),o=r("fJgm"),c=r("WKgy"),d=r("xobL"),l=r("Z9d1"),u=r("sAMA");const _={READABLE:0,NOT_ENCODED:1,LOCALITY:2,MP3_FRIEND:3,PREMIUM_ONLY:4,NOT_RELEASE_FREE:5,NOT_RELEASE_PREMIUM:6,EXPLICIT_LYRICS:7,FAN_ONLY:8,checkEpisodeAvailable:function(e){return(0,d.jQ)(c.A.getState().user)||e.podcast.rights.ads.available||!e.podcast.rights.subs.available?_.READABLE:_.PREMIUM_ONLY},checkGqlSongAvailable:function(e){return e.id?e.id<0&&!(null!==(t=e.media.rights)&&void 0!==t&&t.ads.available||null!==(r=e.media.rights)&&void 0!==r&&r.subs.available)?0===e.contributors.edges[0].node.id?_.MP3_FRIEND:_.LOCALITY:(0,d.Uw)(c.A.getState().user)===u.g&&e.isExplicit?_.EXPLICIT_LYRICS:(0,d.jQ)(c.A.getState().user)||e.media.rights.ads.available||!e.media.rights.subs.available?_.READABLE:_.PREMIUM_ONLY:_.NOT_ENCODED;var t,r},checkSongAvailable:function(e){if("object"!=typeof e)return _.READABLE;if("boolean"==typeof e.AVAILABLE)return e.AVAILABLE?_.READABLE:_.LOCALITY;if(void 0!==e.EXTERNAL)return _.READABLE;const t=e.RIGHTS||{};if(parseInt(e.SNG_ID,10)<0){if(0===(0,a.A)(t)||!t.STREAM_ADS_AVAILABLE&&!t.STREAM_SUB_AVAILABLE)return 0===parseInt(e.ART_ID,10)?_.MP3_FRIEND:_.LOCALITY;if(1===parseInt(e.FAN_ONLY,10)&&!o.A.isFavorite(n.Ay.Artist,e.ART_ID))return _.FAN_ONLY}return(0,d.Uw)(c.A.getState().user)===u.g&&(0,i.AP)(e)?_.EXPLICIT_LYRICS:(0,d.jQ)(c.A.getState().user)||_.isAvailableAds(t)||!_.isAvailableSub(t)?_.isAvailableAds(t)||_.isAvailableSub(t)||{}.hasOwnProperty.call(t,"STREAM_ADS_TIMESTAMP")||{}.hasOwnProperty.call(t,"STREAM_SUB_TIMESTAMP")?!(0,d.jQ)(c.A.getState().user)&&_.getTimestampAds(t)>(0,d.mI)(c.A.getState().user)?_.NOT_RELEASE_FREE:(0,d.jQ)(c.A.getState().user)&&_.getTimestampSub(t)>(0,d.mI)(c.A.getState().user)?_.NOT_RELEASE_PREMIUM:""===e.MD5_ORIGIN||0===parseInt(e.FILESIZE_MP3_128,10)&&!(0,d.jQ)(c.A.getState().user)&&parseInt(e.SNG_ID,10)>0||0===parseInt(e.FILESIZE_MP3_128,10)&&(0,d.jQ)(c.A.getState().user)&&parseInt(e.SNG_ID,10)>0&&!1===c.A.getState().user.hasHqAudioRight||0===parseInt(e.FILESIZE_MP3_128,10)&&0===parseInt(e.FILESIZE_MP3_256,10)&&0===parseInt(e.FILESIZE_MP3_320,10)&&(0,d.jQ)(c.A.getState().user)&&parseInt(e.SNG_ID,10)>0||0===parseInt(e.SNG_ID,10)&&0===parseInt(e.FILESIZE_MP3_MISC,10)?_.NOT_ENCODED:_.READABLE:_.LOCALITY:_.PREMIUM_ONLY},getMessage:function(e){switch(e){case _.NOT_ENCODED:return(0,s.AP)("Ce titre n'est pas encore encod");case _.LOCALITY:return(0,s.AP)("Ce titre n'est pas disponible dans votre pays.");case _.MP3_FRIEND:return(0,s.AP)("Ce titre est un mp3 perso d'un autre utilisateur");case _.PREMIUM_ONLY:return(0,s.AP)("planrenaming_text_tracklimitedaccestoplanXplanXsbyrightowners_web",{sprintf:["Deezer Web","Deezer Premium"]});case _.NOT_RELEASE_FREE:case _.NOT_RELEASE_PREMIUM:return(0,s.AP)("Ce titre n'est pas encore disponible.");case _.EXPLICIT_LYRICS:return(0,s.AP)("toastmessage_text_toplayexplicitcontentupdatesettings_web");case _.FAN_ONLY:return(0,s.AP)("Ajoutez l'artiste  vos favoris pour couter ce titre");default:return""}},getTimestampAds:function(e){return{}.hasOwnProperty.call(e,"STREAM_ADS_TIMESTAMP")?e.STREAM_ADS_TIMESTAMP:(0,l.A)(e.STREAM_ADS)},getTimestampSub:function(e){return{}.hasOwnProperty.call(e,"STREAM_SUB_TIMESTAMP")?e.STREAM_SUB_TIMESTAMP:(0,l.A)(e.STREAM_SUB)},isAvailableAds:function(e){return{}.hasOwnProperty.call(e,"STREAM_ADS_AVAILABLE")?e.STREAM_ADS_AVAILABLE:"string"==typeof e.STREAM_ADS},isAvailableSub:function(e){return{}.hasOwnProperty.call(e,"STREAM_SUB_AVAILABLE")?e.STREAM_SUB_AVAILABLE:"string"==typeof e.STREAM_SUB}},A=_},"jUB+":(e,t,r)=>{"use strict";r.d(t,{j:()=>a});const a=5e3},oN5d:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,WW:()=>n,v9:()=>i});var a=r("ZL5e"),s=r("JRaq");let i=function(e){return e.OPEN="ToastOpenEvent",e}({});class n extends a.A{constructor(e){super(n.type,{detail:e})}}n.type=i.OPEN;class o extends s.A{}const c=new o},fkXJ:(e,t,r)=>{"use strict";let a;r.d(t,{A:()=>s}),r("obM9"),r("oN5d"),r("jUB+");const s=(e,t=!1)=>(({body:e,icon:t="",direction:r="ltr",title:s=""})=>{"granted"===Notification.permission&&(a&&a.close(),a=new Notification(s,{body:e,icon:t,silent:!0,dir:r}))})(e)},obM9:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});let a=function(e){return e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Success=2]="Success",e[e.Error=3]="Error",e}({})},xSQY:(e,t,r)=>{"use strict";r.d(t,{A:()=>j}),r("/eM8");var a=r("Oqsq"),s=r("yJX9"),i=r("JTKS");const n=[i.v.ALBUMS,i.v.ARTISTS,i.v.CHANNELS,i.v.PLAYLISTS,i.v.RADIOS,i.v.SHOWS,i.v.SONGS],o=[i.v.ARTISTS,i.v.SONGS];let c=function(e){return e.NotModified="Not modified",e}({});var d=r("g+IT"),l=r("5G9X");const u=e=>"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,"__TYPE__")&&{}.hasOwnProperty.call(e,"DATE_FAVORITE")&&{}.hasOwnProperty.call(e,"ART_ID")&&e.__TYPE__===l.Ay.Artist&&(0,d.A)(e.DATE_FAVORITE),_=e=>"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,"__TYPE__")&&{}.hasOwnProperty.call(e,"SNG_ID")&&e.__TYPE__===l.Ay.Song;var A=r("WBQ7");function E(e){return"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,s.Z.favorites)&&{}.hasOwnProperty.call(e,s.Z.dislikes)}var p=r("xhuf");const T=(e,t)=>0===(0,p.A)(Object.keys(e),t).length&&0===(0,p.A)(t,Object.keys(e)).length,g=(e,t)=>`${e}_${t}`,S=(e,t)=>`${e}_${t}_order`,h=(e,t)=>{const r=A.default.get(g(e,t),null);if(function(e){if("object"!=typeof e||null===e)return!1;const t=e;return Object.keys(t).every((e=>{const r=t[e];return!!function(e){return"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,"id")&&{}.hasOwnProperty.call(e,"timestamp")}(r)&&r.id===e}))}(r))return r;throw new Error("No (valid) feedbacks stored in local storage")},f=(e,t)=>{const r=A.default.get(S(e,t),null);if(a=r,Array.isArray(a)&&a.every((e=>"string"==typeof e)))return r;var a;throw new Error("No (valid) feedbacks order stored in local storage")},m=(e,t)=>{try{const r=h(e,t),a=f(e,t);return T(r,a)?{feedbacks:r,order:a}:{feedbacks:{},order:[]}}catch(e){return{feedbacks:{},order:[]}}},y=(e,t,r,a)=>{if(!1===T(r,a))throw new Error("Could not persist inconsistent feedbacks and order");A.default.set(g(e,t),r),A.default.set(S(e,t),a)},I=(e,t)=>{try{const r=h(e,t),a=f(e,t);return T(r,a)}catch(e){return!1}},L="feedback_checksums",R=()=>{let e;if(A.default.isset(L)&&(e=A.default.get(L)),!E(e))return null;const t={[s.Z.favorites]:{},[s.Z.dislikes]:{}};for(const r of[s.Z.favorites,s.Z.dislikes])for(const a in e[r])I(r,a)&&(t[r][a]=e[r][a]);return A.default.set(L,t),t},P=R,O=(e,t,r)=>{let a=A.default.get(L);E(a)||(a={[s.Z.favorites]:{},[s.Z.dislikes]:{}}),a[e][t]=r,A.default.set(L,a)};var C=r("mKPD");const k=e=>Date.parse(e.replace(" ","T")+".000Z")/1e3,F={[l.Ay.Album]:e=>(e=>{if("object"==typeof(t=e)&&null!==t&&{}.hasOwnProperty.call(t,"__TYPE__")&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&{}.hasOwnProperty.call(t,"ALB_ID")&&t.__TYPE__===l.Ay.Album&&(0,d.A)(t.DATE_FAVORITE))return{id:e.ALB_ID,timestamp:k(e.DATE_FAVORITE)};var t;throw new Error("Could not normalize api feedback as an album feedback")})(e),[l.Ay.Artist]:e=>(e=>{if(u(e)||(e=>u(e))(e))return{id:e.ART_ID,timestamp:k(e.DATE_FAVORITE)};throw new Error("Could not normalize api feedback as an artist feedback")})(e),[l.Ay.Channel]:e=>(e=>{if("object"==typeof(t=e)&&null!==t&&{}.hasOwnProperty.call(t,"__TYPE__")&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&{}.hasOwnProperty.call(t,"ID")&&t.__TYPE__===l.Ay.Channel&&(0,d.A)(t.DATE_FAVORITE))return{id:e.ID,timestamp:k(e.DATE_FAVORITE)};var t;throw new Error("Could not normalize api feedback as a channel feedback")})(e),[l.Ay.Playlist]:e=>(e=>{if("object"==typeof(t=e)&&null!==t&&{}.hasOwnProperty.call(t,"__TYPE__")&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&{}.hasOwnProperty.call(t,"PLAYLIST_ID")&&(!1==={}.hasOwnProperty.call(t,"LAST_SEEN")||(0,d.A)(t.LAST_SEEN))&&(0,d.A)(t.DATE_FAVORITE)&&t.__TYPE__===l.Ay.Playlist)return{id:e.PLAYLIST_ID,timestamp:k(e.DATE_FAVORITE),lastSeen:k(e.LAST_SEEN||e.DATE_FAVORITE)};var t;throw new Error("Could not normalize api feedback as a playlist feedback")})(e),[l.Ay.Radio]:e=>(e=>{if("object"==typeof(t=e)&&null!==t&&{}.hasOwnProperty.call(t,"__TYPE__")&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&{}.hasOwnProperty.call(t,"RADIO_ID")&&t.__TYPE__===l.Ay.Radio&&(0,d.A)(t.DATE_FAVORITE))return{id:e.RADIO_ID,timestamp:k(e.DATE_FAVORITE)};var t;throw new Error("Could not normalize api feedback as a radio feedback")})(e),[l.Ay.Show]:e=>(e=>{if("object"==typeof(t=e)&&null!==t&&{}.hasOwnProperty.call(t,"__TYPE__")&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&{}.hasOwnProperty.call(t,"SHOW_ID")&&t.__TYPE__===l.Ay.Show&&(0,d.A)(t.DATE_FAVORITE))return{id:e.SHOW_ID,timestamp:k(e.DATE_FAVORITE)};var t;throw new Error("Could not normalize api feedback as a show feedback")})(e),[l.Ay.Song]:e=>(e=>{if(_(t=e)&&{}.hasOwnProperty.call(t,"DATE_FAVORITE")&&Number.isInteger(t.DATE_FAVORITE))return{id:e.SNG_ID,timestamp:e.DATE_FAVORITE};var t;if((e=>_(e)&&{}.hasOwnProperty.call(e,"DATE_FAVORITE")&&(0,d.A)(e.DATE_FAVORITE))(e))return{id:e.SNG_ID,timestamp:k(e.DATE_FAVORITE)};throw new Error("Could not normalize api feedback as a song feedback")})(e)},G=(e,t)=>{if(F[t])try{return F[t](e)}catch(e){return null}return null},B=(e,t)=>{const r={},a=[];for(const s of e){const e=G(s,t);e&&(r[e.id]=e,a.push(e.id))}return{feedbacks:r,order:a}};var V=r("nrKQ");const K=(e,t=0,r=null)=>new Promise(((a,s)=>{e!==l.Ay.Song&&s(new Error(`Fetching favorites of type ${e} is not supported`)),V.A.batch({method:"song.getFavoriteIds",data:{checksum:r},batchSize:1e4,offsetStart:t}).run().then((e=>{a(e)}))}));var Y=r("tZCQ");const H=e=>{const t={[i.A.FAVORITES]:{},[i.A.DISLIKES]:{}};for(const[r,a]of Object.entries(e[s.Z.favorites])){const e=(0,C.or)(r);t[i.A.FAVORITES][e]=a}for(const[r,a]of Object.entries(e[s.Z.dislikes])){const e=(0,C.or)(r);t[i.A.DISLIKES][e]=a}return t},X=(e,t)=>{if(!(e=>n.includes(e))(t))return{feedbacks:{},order:[]};const r=(0,C.Yh)(t);if(void 0===r)return{feedbacks:{},order:[]};const a=e[i.A.FAVORITES][t];if(void 0===a)return{feedbacks:{},order:[]};if(a===c.NotModified)return m(s.Z.favorites,r);const o=B(a.data,r);try{y(s.Z.favorites,r,o.feedbacks,o.order)}catch(e){return{feedbacks:{},order:[]}}return O(s.Z.favorites,r,a.checksum),o},z=(e,t)=>{if(!(e=>o.includes(e))(t))return{feedbacks:{},order:[]};const r=(0,C.Yh)(t);if(void 0===r)return{feedbacks:{},order:[]};const a=e[i.A.DISLIKES][t];if(void 0===a)return{feedbacks:{},order:[]};if(a===c.NotModified)return m(s.Z.dislikes,r);const n=B(a.data,r);try{y(s.Z.dislikes,r,n.feedbacks,n.order)}catch(e){return{feedbacks:{},order:[]}}return O(s.Z.dislikes,r,a.checksum),n},j={getUserFeedbacks:()=>new Promise(((e,t)=>{(()=>{const e=P();return new Promise(((t,r)=>{V.A.call({method:"user.getAllFeedbacks",data:{checksums:e?H(e):null},success:e=>{if(Y.A.isAllowed("unlimited_favorite_tracks")){const s=e[i.A.FAVORITES][i.v.SONGS];if(!s||s===c.NotModified)return void t(e);const{count:n,filtered_count:o,total:d}=s;n+o<d?K(l.Ay.Song,n+o).then((r=>{if(r===c.NotModified)return void t(e);const n={count:s.count+r.count,total:s.total,filtered_count:s.filtered_count+r.count,data:s.data.concat(r.data),checksum:s.checksum};(0,a.A)(e,`${i.A.FAVORITES}.${i.v.SONGS}`,n),t(e)})).catch((e=>r(e))):t(e)}else t(e)},error:()=>r(new Error("Failed to retrieve user feedbacks"))})}))})().then((t=>{e((e=>{const t={[s.Z.favorites]:{},[s.Z.dislikes]:{}};for(const r of n){const a=(0,C.Yh)(r);void 0!==a&&(t[s.Z.favorites][a]=X(e,r))}for(const r of o){const a=(0,C.Yh)(r);void 0!==a&&(t[s.Z.dislikes][a]=z(e,r))}return t})(t))})).catch((e=>t(e)))})),getFavorites:e=>new Promise(((t,r)=>{const a=((e,t)=>{const r=R();return r&&r[e]&&r[e][t]?r[e][t]:null})(s.Z.favorites,e);K(e,0,a).then((i=>{if(i===c.NotModified){if(null===a)return void r(new Error(`Cannot resolve favorites of type ${e}, list seems not modified, but checksum is null`));const i=m(s.Z.favorites,e);return void t(i)}const n=B(i.data,e);try{y(s.Z.favorites,e,n.feedbacks,n.order)}catch(e){r(e)}O(s.Z.favorites,e,i.checksum),t(n)})).catch((e=>r(e)))})),saveFavorite:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>{switch(t){case l.Ay.Album:return{method:"album.addFavorite",data:{ALB_ID:e,CTXT:r}};case l.Ay.Artist:return{method:"artist.addFavorite",data:{ART_ID:e,CTXT:r}};case l.Ay.Channel:return{method:"favorite_channel.add",data:{CHANNEL_ID:e,CTXT:r}};case l.Ay.Playlist:return{method:"playlist.addFavorite",data:{PARENT_PLAYLIST_ID:e,CTXT:r}};case l.Ay.Radio:return{method:"radio.addFavorite",data:{RADIO_ID:e,CTXT:r}};case l.Ay.Show:return{method:"show.addFavorite",data:{SHOW_ID:e,CTXT:r}};case l.Ay.Song:return Y.A.isAllowed("unlimited_favorite_tracks")?{method:"song.addFavorites",data:{IDS:[e],CTXT:r}}:{method:"favorite_song.add",data:{SNG_ID:e,CTXT:r}};case l.Ay.User:return{method:"friend.follow",data:{friend_id:e,ctxt:r}};default:throw new Error(`Not supported favorite type "${t}"`)}})(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:r=>{!1===r&&s(new Error(`Failed to add ${t} "${e}" to user favorites`)),a()},error:r=>{r.message=`Failed to add ${t} "${e}" to user favorites`,s(r)}})})),saveMultipleFavorites:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>{if(t===l.Ay.Song){if(!Y.A.isAllowed("unlimited_favorite_tracks"))throw new Error(`Not supported favorite type "${t}"`);return{method:"song.addFavorites",data:{IDS:e,CTXT:r}}}throw new Error(`Not supported favorite type "${t}"`)})(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:e=>{!1===e&&s(new Error(`Failed to add multiple ${t} to user favorites`)),a()},error:e=>{e.message=`Failed to add multiple ${t} to user favorites`,s(e)}})})),removeFavorite:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>{switch(t){case l.Ay.Album:return{method:"album.deleteFavorite",data:{ALB_ID:e,CTXT:r}};case l.Ay.Artist:return{method:"artist.deleteFavorite",data:{ART_ID:e,CTXT:r}};case l.Ay.Channel:return{method:"favorite_channel.remove",data:{CHANNEL_ID:e,CTXT:r}};case l.Ay.Playlist:return{method:"playlist.deleteFavorite",data:{PLAYLIST_ID:e,CTXT:r}};case l.Ay.Radio:return{method:"radio.deleteFavorite",data:{RADIO_ID:e,CTXT:r}};case l.Ay.Show:return{method:"show.deleteFavorite",data:{SHOW_ID:e,CTXT:r}};case l.Ay.Song:return Y.A.isAllowed("unlimited_favorite_tracks")?{method:"song.removeFavorites",data:{IDS:[e],CTXT:r}}:{method:"favorite_song.remove",data:{SNG_ID:e,CTXT:r}};case l.Ay.User:return{method:"friend.unfollow",data:{friend_id:e,ctxt:r}};default:throw new Error(`Not supported favorite type "${t}"`)}})(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:r=>{!1===r&&s(new Error(`Failed to remove ${t} "${e}" from user favorites`)),a()},error:()=>s(new Error(`Failed to remove ${t} "${e}" from user favorites`))})})),removeMultipleFavorites:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>{if(t===l.Ay.Song)return Y.A.isAllowed("unlimited_favorite_tracks")?{method:"song.removeFavorites",data:{IDS:e,CTXT:r}}:{method:"favorite_song.removeMulti",data:{SNG_IDS:e,CTXT:r}};throw new Error(`Not supported favorite type "${t}"`)})(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:e=>{!1===e&&s(new Error(`Failed to remove multiple ${t} from user favorites`)),a()},error:()=>s(new Error(`Failed to remove multiple ${t} from user favorites`))})})),replaceFavorite:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>{if(e!==l.Ay.Song)throw new Error(`Cannot replace favorite of type ${e}`);return{method:"favorite_song.recoverSong",data:{old_sng_id:t,new_sng_id:r}}})(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:i=>{!1===i&&s(new Error(`Failed to replace ${e} "${t}" by ${r} in user's favorites`)),a()},error:()=>s(new Error(`Failed to replace ${e} "${t}" by ${r} in user's favorites`))})})),saveDislike:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>({method:"favorite_dislike.add",data:{ID:e,TYPE:t,CTXT:r}}))(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:r=>{!1===r&&s(new Error(`Failed to add ${t} "${e}" to user dislikes`)),a()},error:r=>{r.message=`Failed to add ${t} "${e}" to user dislikes`,s(r)}})})),removeDislike:(e,t,r)=>new Promise(((a,s)=>{let i;try{i=((e,t,r)=>({method:"favorite_dislike.remove",data:{ID:e,TYPE:t,CTXT:r}}))(e,t,r)}catch(e){return void s(e)}V.A.call({...i,success:r=>{!1===r&&s(new Error(`Failed to remove ${t} "${e}" from user dislikes`)),a()},error:()=>s(new Error(`Failed to remove ${t} "${e}" from user dislikes`))})})),removeMultipleDislikes:(e,t)=>new Promise(((r,a)=>{let s;try{s=((e,t)=>({method:"favorite_dislike.removeMulti",data:{IDS:e,TYPE:t}}))(e,t)}catch(e){return void a(e)}V.A.call({...s,success:e=>{!1===e&&a(new Error(`Failed to remove multiple ${t} from user dislikes`)),r()},error:()=>a(new Error(`Failed to remove multiple ${t} from user dislikes`))})})),reorderFavorites:(e,t)=>new Promise(((r,a)=>{let s;try{s=((e,t)=>{if(e!==l.Ay.Song)throw new Error(`Cannot reorder favorites of type ${e}`);return{method:"song.reorderFavorites",data:{order:t}}})(e,t)}catch(e){return void a(e)}V.A.call({...s,success:t=>{!1===t&&a(new Error(`Failed to reorder favorites of type ${e}`)),r()},error:()=>a(new Error(`Failed to reorder favorites of type ${e}`))})})),updateFavoriteLastSeenDate:(e,t)=>new Promise(((r,a)=>{let s;try{s=((e,t)=>{if(e!==l.Ay.Playlist)throw new Error(`Cannot replace favorite of type ${e}`);return{method:"playlist.setSeen",data:{playlist_id:t}}})(e,t)}catch(e){return void a(e)}V.A.call({...s,success:s=>{!1===s&&a(new Error(`Failed to update last seen date of ${e} "${t}"`)),r()},error:()=>a(new Error(`Failed to update last seen date of ${e} "${t}"`))})})),normalize:B}},JTKS:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,v:()=>s});let a=function(e){return e.FAVORITES="FAVORITES",e.DISLIKES="DISLIKES",e}({}),s=function(e){return e.ALBUMS="ALBUMS",e.ARTISTS="ARTISTS",e.CHANNELS="CHANNELS",e.PLAYLISTS="PLAYLISTS",e.RADIOS="RADIOS",e.SHOWS="SHOWS",e.SONGS="SONGS",e}({})},yJX9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=function(e){return e.favorites="favorites",e.dislikes="dislikes",e}({})},mKPD:(e,t,r)=>{"use strict";r.d(t,{SF:()=>o,Yh:()=>n,or:()=>c});var a=r("JTKS"),s=r("5G9X");const i={[a.v.ALBUMS]:s.Ay.Album,[a.v.ARTISTS]:s.Ay.Artist,[a.v.CHANNELS]:s.Ay.Channel,[a.v.PLAYLISTS]:s.Ay.Playlist,[a.v.RADIOS]:s.Ay.Radio,[a.v.SHOWS]:s.Ay.Show,[a.v.SONGS]:s.Ay.Song},n=e=>i[e],o=e=>Object.values(i).includes(e),c=e=>{for(const[t,r]of Object.entries(i))if(r===e)return t}},"04sm":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r("WKgy"),s=r("aHAS");const i={set(e,t=!1){a.A.getState().user.isAuth&&a.A.dispatch((0,s.Xx)(e,t))}}},V9V8:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const a="undefined"!=typeof window&&window.performance?window.performance.timeOrigin:Date.now(),s="undefined"!=typeof window&&window.performance?()=>window.performance.now():()=>Math.max(Date.now()-a,0);class i{constructor(){this._offset=0}get debug(){return{hasPerformance:Boolean("undefined"!=typeof window&&window.performance),NOW:s(),now:this.now(),offset:this._offset,ORIGIN:a}}now(){return a+this._offset+s()}update(e){let t;t="string"==typeof e?Date.parse(e):e instanceof Date?e.getTime():e,Number.isFinite(t)&&(this._offset=t-s()-a)}}},OQOy:(e,t,r)=>{"use strict";r.d(t,{$G:()=>UnauthorizedLicenseTokenError,Ax:()=>ExpiredLicenseTokenError,DY:()=>ExpiredURLError,Di:()=>NoFormatRequestedError,Dr:()=>NetworkError,FJ:()=>MediaError,Fs:()=>NoURLForMediaServiceError,JD:()=>EmptySourceError,MU:()=>TimeoutError,NJ:()=>URLProviderError,Ot:()=>ShouldFallbackError,Pr:()=>ServerError,Tu:()=>UnauthorizedTrackTokenError,Ug:()=>UnknownCodeError,VS:()=>NoFormatError,ZN:()=>ParsingError,c8:()=>SourceError,cL:()=>ExpiredTrackTokenError,fL:()=>DataError,fy:()=>UnknownMediaError,gP:()=>NoLicenseTokenError,iG:()=>APIDeprecatedError,iZ:()=>NoNetworkError,jl:()=>NoMediaResponseError,m6:()=>NoTrackTokenError,o3:()=>ResponseError,tF:()=>InvalidResponseError,y3:()=>InvalidLicenseTokenError,yP:()=>InvalidTrackTokenError});var a=r("8VJL");class URLProviderError extends a.A{constructor(...[e,t]){super(e),this.details=void 0,this.details=t||null}}class DataError extends URLProviderError{}class NoURLForMediaServiceError extends DataError{constructor(...e){super(...e),this.code="MS0000"}}class NoLicenseTokenError extends DataError{constructor(...e){super(...e),this.code="MS0001"}}class NoTrackTokenError extends DataError{constructor(...e){super(...e),this.code="MS0002"}}class NoFormatRequestedError extends DataError{constructor(...e){super(...e),this.code="MS0003"}}class NetworkError extends URLProviderError{}class NoNetworkError extends NetworkError{constructor(...e){super(...e),this.code="MS0600"}}class TimeoutError extends NetworkError{constructor(...e){super(...e),this.code="MS0610"}}class ServerError extends URLProviderError{constructor(...e){super(...e),this.code=void 0}}class ParsingError extends URLProviderError{constructor(...e){super(...e),this.code="MS0674"}}class ResponseError extends URLProviderError{get code(){return void 0!==this.details.code?`MS${this.details.code}`:void 0}}class APIDeprecatedError extends ResponseError{}class ExpiredLicenseTokenError extends ResponseError{}class InvalidLicenseTokenError extends ResponseError{}class UnauthorizedLicenseTokenError extends ResponseError{}class UnknownCodeError extends ResponseError{}class InvalidResponseError extends URLProviderError{constructor(...e){super(...e),this.code="MS0674"}}class MediaError extends URLProviderError{constructor(...e){super(...e),this._code=void 0}get code(){var e;return null!==(e=this._code)&&void 0!==e?e:void 0!==this.details.code?`MS${this.details.code}`:void 0}}class ExpiredTrackTokenError extends MediaError{}class InvalidTrackTokenError extends MediaError{}class UnauthorizedTrackTokenError extends MediaError{}class UnknownMediaError extends MediaError{}class NoFormatError extends MediaError{constructor(...e){super(...e),this._code="MS3000"}}class ExpiredURLError extends MediaError{constructor(...e){super(...e),this._code="MS3001"}}class EmptySourceError extends MediaError{constructor(...e){super(...e),this._code="MS3002"}}class NoMediaResponseError extends MediaError{}class ShouldFallbackError extends URLProviderError{}class SourceError extends URLProviderError{}},"2oWs":(e,t,r)=>{"use strict";r.d(t,{P6:()=>g,zY:()=>h,It:()=>f});var a=r("nrKQ"),s=r("V9V8"),i=(r("WpbS"),r("/eM8"),r("2TXL"));r("LpSC");var n=r("lWgj");let o=function(e){return e.BLOWFISH="BF_CBC_STRIPE",e.NONE="NONE",e}({}),c=function(e){return e.FULL="FULL",e.PREVIEW="PREVIEW",e}({});var d=r("OQOy"),l=function(e){return e[e.INVALID_TRACK_TOKEN=2e3]="INVALID_TRACK_TOKEN",e[e.EXPIRED_TRACK_TOKEN=2001]="EXPIRED_TRACK_TOKEN",e[e.UNAUTHORIZED_TRACK_TOKEN=2002]="UNAUTHORIZED_TRACK_TOKEN",e}(l||{}),u=function(e){return e[e.INVALID_LICENSE_TOKEN=1e3]="INVALID_LICENSE_TOKEN",e[e.EXPIRED_LICENSE_TOKEN=1001]="EXPIRED_LICENSE_TOKEN",e[e.UNAUTHORIZED_LICENSE_TOKEN=1002]="UNAUTHORIZED_LICENSE_TOKEN",e[e.API_DEPRECATED=1999]="API_DEPRECATED",e}(u||{});class _{constructor(e){this.type=void 0,this.formats=void 0,this.type=c.FULL,this.formats=e}}class A extends _{constructor(){super([{cipher:o.NONE,format:"MP3_128"}]),this.type=c.PREVIEW}}class E{constructor(e,t,r,a){this._endpoint=void 0,this._license=void 0,this._timeService=void 0,this._tokenProvider=void 0,this._endpoint=`${e}/v1/get_url`,this._license=t.toString(),this._timeService=a,this._tokenProvider=r}async getURLs(e,t){if("/v1/get_url"===this._endpoint)throw new d.Fs(void 0,{tracks:e});if(0===(e=[...e]).length)throw new d.m6(void 0,{tracks:e});const r=function(e){if("preview"===e)return[new A];let t=[{cipher:o.BLOWFISH,format:e.name}];return t=n.SP.slice(n.SP.indexOf(e)).map((({name:e})=>({cipher:o.BLOWFISH,format:e}))),0===t.length?[]:[new _(t)]}(t),a=(await this._tokenProvider.getTokens(e)).filter((e=>null!==e));if(a.length!==e.length)throw new d.fL("Token array does not have the right length",{tracks:e});if(!r.length)throw new d.Di(void 0,{tracks:e});const s={license_token:this._license,media:r,track_tokens:a.map((e=>e.toString()))};if(!s.license_token)throw new d.gP(void 0,{tracks:e});if(!s.track_tokens.length)throw new d.m6(void 0,{tracks:e});const i={method:"POST",body:JSON.stringify(s),headers:{"content-type":"application/json"}},c={license_token:s.license_token,media:s.media},E=await fetch(this._endpoint,i).catch((t=>{if(t instanceof TypeError)throw navigator.onLine?new d.MU(t.message,{request:c,tracks:e}):new d.iZ(t.message,{request:c,tracks:e});throw t}));if(!E)throw new d.Pr("Cannot retrieve the response",{request:c,tracks:e});const p=E.headers.get("Date");if(p&&this._timeService.update(p),!E.ok&&E.status>=500)throw Object.assign(new d.Pr(`Got an HTTP code ${E.status}`,{request:c,response:await E.text().catch((e=>e&&e instanceof Error?`${e.name}: ${e.message}`:"Failed to read")),tracks:e}),{code:`MS0${E.status}`});const T=await E.clone().text().catch((e=>e&&e instanceof Error?`${e.name}: ${e.message}`:"Failed to read")),g=await E.clone().json().catch((()=>{throw new d.ZN("Failed to parse the response",{request:c,response:T,tracks:e})})),S={request:c,response:T,tracks:e};if(function(e){return void 0!==e.errors}(g)){const{code:e=0,message:t=""}=g.errors[0]||{};switch(e){case u.API_DEPRECATED:throw new d.iG(t,{...S,code:e});case u.EXPIRED_LICENSE_TOKEN:throw new d.Ax(t,{...S,code:e});case u.INVALID_LICENSE_TOKEN:throw new d.y3(t,{...S,code:e});case u.UNAUTHORIZED_LICENSE_TOKEN:throw new d.$G(t,{...S,code:e});default:throw new d.Ug(void 0,{...S,code:e})}}if(e.length!==g.data.length)throw new d.tF(`Got ${g.data.length} tracks but expected ${e.length}`,S);return new Map(e.map(((e,t)=>{const r=g.data[t];if(function(e){return void 0!==e.errors}(r)){const{errors:t}=r,{code:a}=t[0]||{};switch(a){case l.EXPIRED_TRACK_TOKEN:return[e,new d.cL(void 0,{...S,code:a,track:e})];case l.INVALID_TRACK_TOKEN:return[e,new d.yP(void 0,{...S,code:a,track:e})];case l.UNAUTHORIZED_TRACK_TOKEN:return[e,new d.Tu(void 0,{...S,code:a,track:e})];default:return[e,new d.fy(void 0,{...S,code:a,track:e})]}}const{media:a=[]}=r;return[e,a]})))}}const p={offer_id:"",user_id:""},T=new class{call(e){return a.A.call(e)}cancel(e){a.A.cancel(e)}getRequest(e){return a.A.getRequest(e)}resetSignatures(){a.A.resetSignatures()}},g=new s.A,S=new class{constructor(e){this.api=void 0,this.api=e}getTokens(e){return new Promise((t=>{const r=e.filter((e=>void 0===e.token||!e.token.toString()||!0===e.token.expired));0!==r.length?Promise.all([this.getTrackTokens(r.filter((e=>Number(e.id)>0))),this.getPersonalTrackTokens(r.filter((e=>Number(e.id)<0)))]).then((r=>{const a=new Map(r.reduce(((e,t)=>e.concat([...t])),[]));t(e.map((e=>{const t=a.get(e.id)||e.token;return t&&!t.expired?t:null})))})):t(e.map((e=>e.token||null)))}))}getTrackTokens(e){return new Promise((t=>{e.length<1?t(new Map):this.api.call({method:"song.getListData",data:{sng_ids:e.map((e=>e.id)),array_default:["SNG_ID","TRACK_TOKEN","TRACK_TOKEN_EXPIRE"]},success:e=>{const r=new Map;if(Array.isArray(e.data))for(const t of e.data)null!==t&&"object"==typeof t&&void 0!==t.SNG_ID&&"string"==typeof t.TRACK_TOKEN&&r.set(String(t.SNG_ID),new i.A(t.TRACK_TOKEN,{expire:Number(t.TRACK_TOKEN_EXPIRE)}));t(r)},error:()=>{t(new Map)}})}))}getPersonalTrackTokens(e){return new Promise((t=>{if(e.length<1)return void t(new Map);const r=e.map((e=>e.id));this.api.call({method:"personal_song.getList",success:e=>{const a=new Map;if(Array.isArray(e.data))for(const t of e.data)null!==t&&"object"==typeof t&&void 0!==t.SNG_ID&&r.includes(String(t.SNG_ID))&&void 0!==t.SNG_ID&&"string"==typeof t.TRACK_TOKEN&&a.set(String(t.SNG_ID),new i.A(t.TRACK_TOKEN,{expire:Number(t.TRACK_TOKEN_EXPIRE)}));t(a)},error:()=>{t(new Map)}})}))}}(T),h=new class{constructor(e,t){this.tokenProvider=void 0,this.timeService=void 0,this.tokenProvider=e,this.timeService=t}create(e,t){return new E(e,t,this.tokenProvider,this.timeService)}}(S,g),f=new class{constructor(){this._context=p}get(){return this._context}set(e){this._context=e}}},Z9d1:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r("WKgy"),s=r("xobL");function i(e){let t,r,i;if(/^\d{4}-\d{1,2}-\d{1,2}$/.exec(e))t=e.split("-"),r=["0","0","0"];else{if(!/^\d{4}-\d{1,2}-\d{1,2} \d{2}:\d{2}:\d{2}$/.exec(e))return(0,s.mI)(a.A.getState().user);i=e.split(" "),r=i[1].split(":"),t=i[0].split("-")}return new Date(Number(t[0]),Number(t[1])-1,Number(t[2]),Number(r[0]),Number(r[1]),Number(r[2])).getTime()/1e3}},s026:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r("QKMO");function s(e=0,t={displayHours:!1,padHours:!1,hideFalsyHour:!1}){if((e=Number(e))<=0||Number.isNaN(e))return"00:00";let r=Math.floor(e/3600);const s=Math.floor(t.displayHours?e%3600/60:e/60),i=Math.floor(e%3600%60);t.padHours&&(r=(0,a.A)(r,2));const n=Boolean("string"==typeof r?parseInt(r):r);return`${t.displayHours?t.hideFalsyHour&&!n?"":`${r}:`:""}${(0,a.A)(s,2)}:${(0,a.A)(i,2)}`}},QKMO:(e,t,r)=>{"use strict";function a(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}r.d(t,{A:()=>a})}}]);
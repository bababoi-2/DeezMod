"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7827],{"iyH+":(e,t,i)=>{i.d(t,{$:()=>j,A:()=>W}),i("/eM8"),i("Dk60");var a=i("q1tI"),s=i("TRpf"),o=i("X6oL"),r=i("juqV"),n=i("HmE0"),l=i("NSet"),_=i("Tyyv"),c=i("u7vQ"),d=i("fJgm"),u=i("nrKQ");const p=e=>e?{id:e.ID,t:e.TYPE}:{},h_follow=(e,t)=>new Promise(((i,a)=>{u.A.call({method:"friend.follow",data:{friend_id:e,ctxt:p(t)},success:()=>i(),error:a})})),h_unfollow=(e,t)=>new Promise(((i,a)=>{u.A.call({method:"friend.unfollow",data:{friend_id:e,ctxt:p(t)},success:()=>i(),error:a})}));var y,A,f=i("o+h5"),P=i("4Rw2"),v=i("TYt9"),m=i("GkgI"),g=i("Vynx"),b=i("tZCQ"),E=i("OPhi"),w=i("shsj"),L=i("AfN5"),k=i("dShs"),S=i("tew7"),C=i("WN1e"),F=i("gtRZ"),O=i("//u0"),T=i("7bxg"),H=i("P4bz"),I=i("eTJY"),x=i("lASK"),N=i("cFUB"),R=i("5G9X"),D=i("h8EF");const M={[N.Hj.PLAY]:{default:k.S,active:k.S,hover:S.I,resume:k.S},[N.Hj.PLAY_SMALL]:{default:k.S,active:k.S,hover:S.I,resume:k.S},[N.Hj.SHUFFLE]:{default:C.R,active:C.R,hover:S.I,resume:C.R},[N.Hj.FAVORITE]:{default:F.M,active:O.C,hover:T.w,default_user:H.H,active_user:I.S,hover_user:T.w},[N.Hj.FOLLOW]:{default:H.H,active:I.S,hover:T.w},[N.Hj.DOWNLOAD]:{default:x.m,active:I.S,hover:T.w}};let j=(0,o.Ay)()(((A=class extends a.Component{constructor(e){super(e),this.state={hover:!1,loading:!1},this._onClick=this._onClick.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onPlayClick=this._onPlayClick.bind(this),this._onShuffleClick=this._onShuffleClick.bind(this),this._onFavoriteClick=this._onFavoriteClick.bind(this),this._onDownloadClick=this._onDownloadClick.bind(this)}render(){const{type:e,action:t,color:i,size:s,disabled:o,className:_}=this.props;if(!b.A.isAllowed("talk")&&e===R.Ay.Show&&t===N.Hj.FAVORITE)return null;const c=this._getStatus(),d=this._renderIcon(c);return s===N.eH.LINK?a.createElement("button",{className:(0,r.A)("btn","btn-link",_),onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,type:"button"},this._renderContent(c)):[N.Hj.DOWNLOAD,N.Hj.FAVORITE,N.Hj.PLAY_SMALL].includes(t)&&d?a.createElement(n.K0,{colorScheme:i,icon:d,isDisabled:o,onClick:this._onClick,variant:this._isPlayButton()?"contain":"ghost",onMouseEnter:t===N.Hj.FAVORITE?void 0:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(c),"data-testid":`${e}-${t}-button`}):a.createElement(n.$n,{colorScheme:i,leftIcon:d||void 0,isDisabled:o,width:s===N.eH.BLOCK?"full":"auto",onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(c),"data-testid":`${e}-${t}-button`},a.createElement(l.az,{fontFamily:"body"},this._renderContent(c)))}_renderContent(e){const{action:t,size:i}=this.props,s=[N.bZ.DEFAULT,N.bZ.ACTIVE,N.bZ.HOVER];return(t===N.Hj.SHUFFLE||this._isPlayButton())&&s.push(N.bZ.RESUME),s.map((t=>{const s=(0,r.A)("states-button-action",{"is-active":t===e}),o=(0,r.A)("states-button-label",{label:i===N.eH.LINK});return a.createElement("div",{className:s,key:t},a.createElement("span",{className:o},this._getWording(t)))}))}_renderIcon(e){const{action:t,color:i}=this.props;if((t===N.Hj.SHUFFLE||this._isPlayButton())&&(e===N.bZ.ACTIVE||e===N.bZ.HOVER))return a.createElement(_.r,{size:"size.s",isPaused:e===N.bZ.HOVER,color:"primary"===i?"white":void 0});const{type:s,isPersisted:o}=this.props,n=`${e}${s===R.Ay.User&&t===N.Hj.FAVORITE?"_user":""}`;if(M[t]&&M[t][n]){const s=M[t]&&M[t][n];return a.createElement(s,{className:(0,r.A)({"color-primary":e===N.bZ.ACTIVE&&i!==N.cW.PRIMARY,"color-download":t===N.Hj.DOWNLOAD&&o&&e!==N.bZ.HOVER})})}return null}_onClick(){const{disabled:e,action:t,onClick:i}=this.props,{loading:a}=this.state;if(!e&&!a){if(i)return i(),void this._trackClick();this.setState({loading:!0}),this._handleAction(t).then((()=>{this._trackClick(),this.props.onToggleState&&this.props.onToggleState()})).finally((()=>{this.setState({loading:!1})}))}}_onFollowClick(){return this.props.isFollowed?h_unfollow(String(this.props.id),this.props.context):h_follow(String(this.props.id),this.props.context)}_onMouseEnter(){this.setState({hover:!0})}_onMouseLeave(){this.setState({hover:!1})}_onPlayClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:a,items:s,type:o}=this.props;if(!c.Ay.hasAudioAds||c.Ay.getPlayerType()!==L.Cc.ADS&&c.Ay.getPlayerType()!==L.Cc.TRITON_AD){if(this._hasSameContext())return g.A.intent((0,v.G)(c.Ay)),c.Ay.control.togglePause(),void e();g.A.intent("play"),c.Ay.play({...i,context:t,data:s,id:a,radio:(null==i?void 0:i.radio)||"artist_smartradio"===t.TYPE||"profile_user_radio"===t.TYPE,type:o}),e()}}))}_onShuffleClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:a,items:s}=this.props;if(this._hasSameContext())return g.A.intent((0,v.G)(c.Ay)),c.Ay.control.togglePause(),void e();g.A.intent("play"),c.Ay.play({...i,context:t,data:s,id:a,radio:!1,type:t.TYPE}),e()}))}_onFavoriteClick(){return new Promise((e=>{const{id:t,type:i,context:a}=this.props;d.A.toggle({id:t,type:i,context:a}),e()}))}_onDownloadClick(){const{id:e,type:t,isPersisted:i,currentAudioQuality:a,addToCache:s,removeFromCache:o}=this.props,r={id:e.toString(),type:t===L.Kk.PERSONAL_LOVED?f.qy:t,context:{}};return i?o({entity:r}):s({entity:r,quality:a})}_handleAction(e){switch(e){case N.Hj.PLAY:case N.Hj.PLAY_SMALL:return this._onPlayClick();case N.Hj.SHUFFLE:return this._onShuffleClick();case N.Hj.FAVORITE:return this._onFavoriteClick();case N.Hj.FOLLOW:return this._onFollowClick();case N.Hj.DOWNLOAD:return this._onDownloadClick();default:return Promise.resolve()}}_getStatus(){const{action:e,isFavorite:t,isPersisted:i,isPlayerPlaying:a,isPlayerPaused:s}=this.props;let o=N.bZ.DEFAULT;return e===N.Hj.FAVORITE&&t||e===N.Hj.FOLLOW&&this.props.isFollowed||e===N.Hj.DOWNLOAD&&i?o=N.bZ.ACTIVE:(this._isPlayButton()||e===N.Hj.SHUFFLE)&&this._hasSameContext()&&(s?o=N.bZ.RESUME:a&&(o=N.bZ.ACTIVE)),o===N.bZ.ACTIVE&&this.state.hover&&(o=N.bZ.HOVER),o}_hasSameContext(){const{context:e,currentPlayerContext:t}=this.props;return(0,P.T)(t)&&(0,P.c)(e,t)}_getWording(e){const{wordingType:t,action:i,type:a}=this.props;return t===N.Hn.NONE?"":(0,m.b)({action:i,type:a,wording:t},e)}_trackClick(){const{type:e,action:t,isPlayerPlaying:i,isPlayerPaused:a,isFavorite:s}=this.props;let o=t;t===N.Hj.FAVORITE&&(o=s?"dislike":"like");const r=window.location.pathname.split("/");if(r.includes("profile")&&(!i||a)){const e=this._isPlayButton()?"direct_play":t===N.Hj.SHUFFLE?"shuffle":null;if(!e)return;const i=Object.keys(D.bv),a=r[r.length-1],s=i.includes(a)?a:"home";(0,D.h4)({action:D.dJ.PLAY_CLICKED,payload:{path:s,play_type:e}})}if(!this.props.tracking||this._isPlayButton()&&(i||a))return;const n=this.props.tracking.getTrackingData(),l=n.pagecategory||n.pagename;l&&this.props.tracking.trackEvent({eventaction:`click-${o}-${e}`,event:"click",eventcategory:l,eventlabel:`${o}-${e}`})}_isPlayButton(){return this.props.action===N.Hj.PLAY||this.props.action===N.Hj.PLAY_SMALL}}).defaultProps={color:N.cW.DEFAULT,items:[],wordingType:N.Hn.STANDARD,size:N.eH.EMPTY,disabled:!1,isFollowed:!1,iconSize:"medium"},y=A))||y;const W=(0,s.Ng)((({cache:e,user:t,feedbacks:i,player:a},s)=>{const o={id:s.id,type:s.type===L.Kk.PERSONAL_LOVED?f.qy:s.type};return{isFavorite:(0,E.BA)(i,String(s.id),s.type),isPersisted:(0,w._B)(e,o),currentAudioQuality:t.currentAudioQuality,currentPlayerContext:(0,P.T)(a.music.context)?a.music.context:null,isPlayerPlaying:a.control.playing,isPlayerPaused:a.control.paused}}))(j)},"0oT0":(e,t,i)=>{i.d(t,{A:()=>r});var a=i("q1tI"),s=i("iyH+"),o=i("M31W");const r=e=>{const t={...e,...(0,o.$)()};return a.createElement(s.A,t)}},cFUB:(e,t,i)=>{i.d(t,{Hj:()=>a,Hn:()=>r,bZ:()=>n,cW:()=>o,eH:()=>s});let a=function(e){return e.DOWNLOAD="download",e.FAVORITE="favorite",e.PLAY="play",e.PLAY_SMALL="play_small",e.SHUFFLE="shuffle",e.FOLLOW="follow",e}({}),s=function(e){return e.BLOCK="block",e.EMPTY="",e.LINK="link",e}({}),o=function(e){return e.DEFAULT="neutral",e.PRIMARY="primary",e.LIGHT="white",e}({}),r=function(e){return e.FULL="full",e.NONE="none",e.STANDARD="standard",e}({}),n=function(e){return e.ACTIVE="active",e.DEFAULT="default",e.HOVER="hover",e.RESUME="resume",e}({})},GkgI:(e,t,i)=>{i.d(t,{b:()=>n});var a=i("Wp0Y");let s={},o=!1;const r=()=>{s={full:{active:(0,a.AP)("successmessage_text_addedtoyourfavorites_web"),active_favorite_friend:(0,a.AP)("Suivi"),active_favorite_song:(0,a.AP)("successmessage_text_addedtoyourfavorites_web"),active_play:(0,a.AP)("À l'écoute"),active_play_artist:(0,a.AP)("Mix"),active_play_user:(0,a.AP)("FLOW"),active_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),add:(0,a.AP)("contextualmenu_text_addtomyfavorites_web"),add_favorite_friend:(0,a.AP)("Suivre"),add_favorite_song:(0,a.AP)("Ajouter aux Coups de cœur"),add_dislike_song:(0,a.AP)("bantrack_action_dontrecommendthistrack_web"),add_dislike_artist:(0,a.AP)("banartist_action_dontrecommendthisartist_web"),add_play:(0,a.AP)("Écouter"),add_play_artist:(0,a.AP)("Mix"),add_play_user:(0,a.AP)("FLOW"),add_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),default:(0,a.AP)("contextualmenu_text_addtomyfavorites_web"),default_favorite_friend:(0,a.AP)("Suivre"),default_favorite_song:(0,a.AP)("Ajouter aux Coups de cœur"),default_dislike_song:(0,a.AP)("bantrack_action_dontrecommendthistrack_web"),default_dislike_artist:(0,a.AP)("banartist_action_dontrecommendthisartist_web"),default_play:(0,a.AP)("Écouter"),default_play_artist:(0,a.AP)("Mix"),default_play_user:(0,a.AP)("FLOW"),default_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),hover:(0,a.AP)("contextualmenu_text_deletefrommyfavorites_web"),hover_favorite_app:(0,a.AP)("Retirer de ma bibliothèque"),hover_favorite_friend:(0,a.AP)("Ne plus suivre"),hover_favorite_song:(0,a.AP)("Retirer des Coups de cœur"),hover_dislike_song:(0,a.AP)("banartist_action_allowinmyrecommendations_web"),hover_dislike_artist:(0,a.AP)("banartist_action_allowinmyrecommendations_web"),hover_play:(0,a.AP)("Pause"),hover_play_artist:(0,a.AP)("Mix"),hover_play_user:(0,a.AP)("FLOW"),hover_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),paused_play:(0,a.AP)("Pause"),paused_play_artist:(0,a.AP)("Mix"),paused_play_user:(0,a.AP)("FLOW"),paused_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),resume_play:(0,a.AP)("Reprendre"),resume_play_artist:(0,a.AP)("Mix"),resume_play_user:(0,a.AP)("FLOW"),resume_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web")},standard:{active:(0,a.AP)("Ajouté"),add:(0,a.AP)("generic_action_add_web"),default:(0,a.AP)("generic_action_add_web"),default_play_small:(0,a.AP)("Écouter"),hover_play_small:(0,a.AP)("Pause"),paused_play_small:(0,a.AP)("Pause"),resume_play_small:(0,a.AP)("Reprendre"),active_play_small:(0,a.AP)("À l'écoute"),hover:(0,a.AP)("Retirer"),active_follow_user:(0,a.AP)("Suivi"),add_follow_user:(0,a.AP)("Suivre"),default_follow_user:(0,a.AP)("Suivre"),hover_follow_user:(0,a.AP)("Ne plus suivre"),default_download:(0,a.AP)("Télécharger"),active_download:(0,a.AP)("Téléchargé"),hover_download:(0,a.AP)("Retirer")}}};function n(e,t,i){!1===o&&(r(),o=!0);var a=i||e.wording;return"none"===a?"":s[a][t+"_"+e.action+"_"+e.type]?s[a][t+"_"+e.action+"_"+e.type]:s[a][t+"_"+e.action]?s[a][t+"_"+e.action]:s[a][t]}},"4Rw2":(e,t,i)=>{i.d(t,{T:()=>s,c:()=>o});const a=i("Vd8Q").default.get("log_contexts"),s=e=>null!=e&&("number"==typeof e.ID||"string"==typeof e.ID)&&"string"==typeof e.TYPE,o=(e,t)=>String(e.ID)===String(t.ID)&&a[e.TYPE]===a[t.TYPE]},"p/gB":(e,t,i)=>{i.d(t,{Sx:()=>L,vs:()=>g,yh:()=>E,Pe:()=>v,Us:()=>m,C3:()=>b,kv:()=>w});var a=i("5G9X"),s=i("AY3M");const o={[s.E4]:"artist_highlight_album",[s.pN]:"dynamic_page_album",[s.x6]:"album_page",[s.qI]:"recently_played_album",[s.LF]:"landing_facebook",[s.z6]:"profile_albums",[s.WP]:"search_album",[s._v]:"search_top_album"},r={[s.pN]:"dynamic_page_artist_radio",[s.LF]:"landing_facebook",[s.x6]:"artist_page",[s.z6]:"profile_artists",[s.qI]:"recently_played_artist",[s.WP]:"search_artist",[s._v]:"search_artist",[s.Gv]:"smartradio_page",[s.sI]:"artist_top",[s.Di]:"artist_similar"};var n=i("hjG6"),l=i("7E8A");const _={[s.pN]:"dynamic_page_user_radio",[s.qI]:"recently_played_user_radio",[s.WP]:"search_user_radio",[l.CONTEXT_PAGE_SEARCH_TAB_FLOW_CONFIG]:"search_user_radio"},c={[s.pN]:"dynamic_page_flow_config",[s.WP]:"search_flow_config",[l.CONTEXT_PAGE_SEARCH_TAB_FLOW_CONFIG]:"search_flow_config"},d={[s.pN]:"dynamic_page_livestream",[s.x6]:"livestream_page",[s.Ou]:"livestreams_page",[s.qI]:"recently_played_livestream",[s.WP]:"search_livestream",[s._v]:"search_top_livestream"},u={[s.E4]:"artist_highlight_playlist",[s.pN]:"dynamic_page_playlist",[s.x6]:"playlist_page",[s.qI]:"recently_played_playlist",[s.LF]:"landing_facebook",[s.z6]:"profile_playlists",[s.WP]:"search_playlist",[s._v]:"search_top_playlist",[s.lh]:"player_default_playlist"},p={[s.pN]:"dynamic_page_radio",[s.x6]:"radio_page",[s.qI]:"recently_played_radio",[s.LF]:"landing_facebook",[s.z6]:"profile_radios",[s.WP]:"search_radio",[s._v]:"search_top_radio"},h={[s.E4]:"artist_highlight_show",[s.pN]:"dynamic_page_show",[s.x6]:"show_page",[s.qI]:"recently_played_show",[s.z6]:"profile_shows",[s.WP]:"search_show",[s._v]:"search_top_show"},y={[s.pN]:"dynamic_page_smarttracklist",[s.x6]:"smarttracklist_page"};var A=i("0bYo");const f={[s.pN]:"dynamic_page_user_radio",[s.N_]:"profile_user_radio",[s.qI]:"recently_played_user_radio"},P={[a.Ay.Album]:o,[a.Ay.Artist]:r,[a.Ay.Episode]:n.A,[a.Ay.Flow]:_,[a.Ay.MultiFlow]:c,[a.Ay.Livestream]:d,[a.Ay.Playlist]:u,[a.Ay.Radio]:p,[a.Ay.Show]:h,[a.Ay.Smarttracklist]:y,[a.Ay.Track]:A.A,[a.Ay.User]:f},v=(e,t)=>P[e]&&P[e][t]||`unknown_${e}_${t}`,m=e=>v(e,s.x6),g=e=>v(e,s.pN),b=e=>v(e,s.qI),E=e=>v(e,s.d),w=e=>v(e,s.WP),L=e=>v(e,s.E4)}}]);
"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[8538],{mwoR:(e,t,i)=>{i.d(t,{DEFAULT_NORMALIZATION_TARGET:()=>F,default:()=>je});var r=i("MVPB"),n=i("4OMY"),s=(i("WpbS"),i("/eM8"),i("wL2u"),i("gXpF")),a=i("L/26"),o=(i("hB5o"),i("LvTk"),i("vxR0")),l=i("lPux"),A=i("7sx+"),d=i("crvT"),u=i("7XI1"),c=i("AQ9l");var v=(0,n.A)("decrypter"),f=(0,n.A)("streamer"),p=(0,n.A)("variant");class g{constructor(e){Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0});const[{track:t},i]=e;(0,r.A)(this,v)[v]=new d.A(t),(0,r.A)(this,f)[f]=new c.A(t,A.default.get.bind(A.default),i),(0,r.A)(this,p)[p]=i}async request({offset:e=0,size:t}={},i){var n;await(0,r.A)(this,f)[f].abort(),await(0,r.A)(this,f)[f].ready(),null==i||i((0,r.A)(this,f)[f]),e=6144*Math.floor(e/6144);let s,a=1/0,A=new Uint8Array(0);const d=e=>{const t=Math.min(10240,e.byteLength),i=new Uint8Array(e.buffer,e.byteOffset,t);return A=new Uint8Array(i.buffer,i.byteOffset+t,e.byteLength-i.byteLength),i};return new l.ReadableStream({pull:async i=>{if(s||(s=(0,r.A)(this,f)[f].fetch({offset:e,size:t?Math.max(t,61440):void 0}).getReader()),!A.byteLength){const{done:e,value:t}=await s.read();return e||!t?void i.close():(a!==t.buffer.byteLength&&(a=t.buffer.byteLength),void i.enqueue(d(t)))}i.enqueue(d(A))}}).pipeThrough(new l.TransformStream((0,r.A)(this,v)[v])).pipeThrough(new u.A({format:{codec:null===(n=(0,r.A)(this,p)[p].format)||void 0===n?void 0:n.codec}},(e=>{throw e})).TransformStream).pipeThrough(new l.TransformStream({transform(i,r){const{absoluteOffset:n=0}=i;delete i.absoluteOffset,delete i.last,t&&n+i.byteLength>t-n&&(t=n+i.byteLength);const s=o.AA.from(i,{contentLength:a,offset:n,range:{offset:e,size:t}});r.enqueue(s)}}))}get streamer(){return(0,r.A)(this,f)[f]}}var b=i("lWgj"),m=i("IjN+"),y=i("Vzbh"),w=i("qJB7"),O=i("OQOy"),T=i("tuLn"),E=i("2oWs"),P=i("tZCQ"),k=i("LOQS");async function R(e,{logger:t,next:i,playable:r,renderer:n,renewLicense:s,renewToken:a,retries:o}){if((e instanceof O.Ax||e instanceof O.y3||e instanceof O.gP||e instanceof O.$G)&&(o.license||(o.license=0),o.license<1)){null==t||t.log("Renewing license");const e=await s();return await this.audioPlayer_setToken(e),o.license++,n.load(r,{force:!0,next:i}),!0}if((e instanceof O.cL||e instanceof O.yP||e instanceof O.m6||e instanceof O.Tu)&&(o.trackToken||(o.trackToken=0),o.trackToken<1&&r.length)){const[{track:e}]=r;return null==t||t.log("Renewing track token for",e),await a(e),o.trackToken++,n.load(r,{force:!0,next:i}),!0}return e instanceof O.NJ&&new T.A(k.A,P.A,E.It).log(e),!1}var L=i("D+Zh"),j=i("ZoPi"),_=i("WKgy");function N(e,{cache:t,counters:i,next:r,playable:n,renderer:s,seekTarget:a,setPropValue:o,source:l,sources:A}){const[d,u]=n,{context:c,track:h}=d;if(e instanceof L.Dr||e instanceof O.Dr||e instanceof L.o3||e instanceof O.Pr){const{cache:n}=_.A.getState(),l=(n[h.type]||{})[h.id]||(n[h.type]||{})[h.idOrigin||""],A=Boolean((l||{}).downloaded);if(l&&A&&u.format.enum!==l.format){const e=(0,m.f$)(l.format)||b.Fy,i=h.variants.find((t=>t.format===e));(t[u.format.name]||{substitute:void 0}).substitute=i;const n=[{...d,track:{...h,fallback:l.fallback?{...l.fallback,size:null==i?void 0:i.size}:void 0}},i];return o("loading",[n]),s.load(n,r?{next:r}:a),!0}if(e instanceof L.Dr||e instanceof L.o3){if(r)return!0;if(i.autoskip||(i.autoskip=0),i.autoskip<3)return i.autoskip++,s.dispatchEvent(new w.RendererEvent(w.RendererEvents.ENDED)),!0}}if(e instanceof L.Dr){const{id:t,idOrigin:i,legacy:r,type:n,version:s}=h;j.A.log(e,{containerType:c.TYPE,format:u.format,id:t,idOrigin:i,legacy:r,sources:A,type:n,url:null==l?void 0:l.url,version:String(s)})}return!1}var FileError=i("UWRA"),D=i("dgCO");const x=(...[e,{playable:t,source:i,sources:r}])=>{const[{context:n,track:s},a]=t;if((0,FileError.l)(e)||e instanceof D.LV||"cause"in e){const{id:t,idOrigin:o,legacy:l,type:A,version:d}=s;j.A.log(e,{containerType:n.TYPE,format:a.format,id:t,idOrigin:o,legacy:l,sources:r,type:A,url:null==i?void 0:i.url,version:String(d)})}return!1},S=(...[e,{cache:t,next:i,playable:r,renderer:n,seekTarget:s,setPropValue:a}])=>{const[o,l]=r,{track:A}=o;if(e instanceof D.SY){const t=(0,m.f6)(e.received),r=A.variants.find((e=>e.format===t));if(r)return Object.defineProperty(r,"media",{configurable:!0,value:e.media}),a("loading",[[o,r]]),n.load([o,r],i?{next:i}:s),!0}return e instanceof D.Ji?(Object.defineProperty(l,"buffer",{configurable:!0,value:e.buffer}),n.load(r,{force:!0,next:i,...s}),!0):e instanceof D.Au&&(Object.defineProperty(l,"media",{configurable:!0,value:e.media}),null===(d=t.requester)||void 0===d||d.streamer.abort(),delete t.requester,n.load(r,{force:!0,next:i,...s}),!0);var d},I=()=>!1;var C=i("iwso"),U=i("14Z8"),M=i("4cGQ"),q=i("WzpB"),z=i("iA+Z"),G=i("LjZa");const F=-15,H=y.en.STANDARD;var K=(0,n.A)("cache"),V=(0,n.A)("cacheLegacyTrackToTrack"),W=(0,n.A)("counters"),B=(0,n.A)("license"),Q=(0,n.A)("logger"),Z=(0,n.A)("muted"),$=(0,n.A)("mutedChanging"),Y=(0,n.A)("next"),X=(0,n.A)("normalizationTarget"),J=(0,n.A)("normalized"),ee=(0,n.A)("quality"),te=(0,n.A)("renderer"),ie=(0,n.A)("volume"),re=(0,n.A)("volumeChanging"),ne=(0,n.A)("getCurrentTimestamp"),se=(0,n.A)("isConnected"),ae=(0,n.A)("isRadio"),oe=(0,n.A)("isWidget"),le=(0,n.A)("renewLicense"),Ae=(0,n.A)("renewToken"),de=(0,n.A)("setPropValue"),ue=(0,n.A)("source"),ce=(0,n.A)("sources"),he=(0,n.A)("addRendererListeners"),ve=(0,n.A)("legacyTrackToTrack"),fe=(0,n.A)("preload"),pe=(0,n.A)("onDurationChange"),ge=(0,n.A)("onEnded"),be=(0,n.A)("onError"),me=(0,n.A)("onLoading"),ye=(0,n.A)("onMetadataChanged"),we=(0,n.A)("onMutedChanged"),Oe=(0,n.A)("onPausedChanged"),Te=(0,n.A)("onSeeked"),Ee=(0,n.A)("onTimeChanged"),Pe=(0,n.A)("onVolumeChanged"),ke=(0,n.A)("removeRendererListeners"),Re=(0,n.A)("rendererListeners"),Le=(0,n.A)("setLicense");class je{constructor(e){Object.defineProperty(this,Le,{value:Ie}),Object.defineProperty(this,Re,{get:Se,set:void 0}),Object.defineProperty(this,ke,{value:xe}),Object.defineProperty(this,fe,{value:De}),Object.defineProperty(this,ve,{value:Ne}),Object.defineProperty(this,he,{value:_e}),this.ready=void 0,Object.defineProperty(this,K,{writable:!0,value:new WeakMap}),Object.defineProperty(this,V,{writable:!0,value:new Map}),Object.defineProperty(this,W,{writable:!0,value:{}}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:je.DEFAULT_MUTED}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:je.DEFAULT_NORMALIZATION_TARGET}),Object.defineProperty(this,J,{writable:!0,value:je.DEFAULT_NORMALIZED}),Object.defineProperty(this,ee,{writable:!0,value:je.DEFAULT_QUALITY}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:1}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,Ae,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:[]}),Object.defineProperty(this,pe,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e);const[,{duration:i=NaN}={}]=(0,r.A)(this,te)[te].current;Number.isFinite(i)&&(0,r.A)(this,de)[de]("duration",i)}}),Object.defineProperty(this,ge,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e),(0,r.A)(this,de)[de]("finish",!0)}}),Object.defineProperty(this,be,{writable:!0,value:async e=>{var t;const i="detail"in e?e.detail:{error:e},{next:n=!1,playable:s=[],seekTarget:a}=i;let{error:o}=i;if((0,q.zf)(o))return;if(null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received an error:",o),o=!("cause"in o)||!o.cause||o.cause instanceof MediaError?o:o.cause,(0,q.zf)(o))return;let l=!1;if(s.length){const[{track:e},t]=s,i=(0,r.A)(this,K)[K].get(e)||(0,r.A)(this,K)[K].set(e,{}).get(e),{retries:A}=i[t.format.name]||(i[t.format.name]={retries:{}}),d={cache:i,counters:(0,r.A)(this,W)[W],logger:(0,r.A)(this,Q)[Q],next:n,playable:s,renderer:(0,r.A)(this,te)[te],retries:A,seekTarget:a,setPropValue:(0,r.A)(this,de)[de],source:(0,r.A)(this,ue)[ue],sources:(0,r.A)(this,ce)[ce]};l=await(0,M.rm)([R.bind(this,o,{...d,renewLicense:(0,r.A)(this,le)[le],renewToken:(0,r.A)(this,Ae)[Ae]}),N,x,S,I],(e=>e.call(this,o,d))).catch((e=>(o=new AggregateError([o,e]),!1)))}var A,d;l||(o instanceof AggregateError?null===(A=(0,r.A)(this,Q)[Q])||void 0===A||A.error("Error not handled:\n",`${o.name}:\n\t${o.errors.map((e=>`${e.name}: ${e.message}`)).join("\n\t")}\n`,o):null===(d=(0,r.A)(this,Q)[Q])||void 0===d||d.error("Error not handled:",o),(0,r.A)(this,de)[de]("onError",o))}}),Object.defineProperty(this,me,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e);const{next:i,playable:n}=e.detail;i||(0,r.A)(this,de)[de]("loading",[n])}}),Object.defineProperty(this,ye,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e),(0,r.A)(this,de)[de]("metadata",e.detail.metadata)}}),Object.defineProperty(this,we,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e);const{muted:i}=e.detail;void 0===(0,r.A)(this,$)[$]&&(0,r.A)(this,Z)[Z]===i||((0,r.A)(this,Z)[Z]=i,(0,r.A)(this,$)[$]=void 0,(0,r.A)(this,de)[de]("muted",i))}}),Object.defineProperty(this,Oe,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e);const{paused:i}=e.detail;switch(i){case!0:(0,r.A)(this,de)[de]("paused",!0),(0,r.A)(this,de)[de]("playing",!1);break;case!1:{(0,r.A)(this,de)[de]("paused",!1),(0,r.A)(this,de)[de]("playing",!0),delete(0,r.A)(this,W)[W].autoskip;const[[{track:e}]]=(0,r.A)(this,te)[te].current;Object.values((0,r.A)(this,K)[K].get(e)||{}).forEach((e=>{e&&"retries"in e&&(e.retries={})}));break}}}}),Object.defineProperty(this,Te,{writable:!0,value:e=>{var t;null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e),(0,r.A)(this,de)[de]("seekCompleted",(0,r.A)(this,te)[te].time)}}),Object.defineProperty(this,Ee,{writable:!0,value:e=>{var t;const{time:i}=e.detail,[,{duration:n=NaN}={}]=(0,r.A)(this,te)[te].current;(0,r.A)(this,de)[de]("position",i),n>m.Ug&&i>=m.Ug&&null!==(t=(0,r.A)(this,B)[B])&&void 0!==t&&t.limited&&!(0,r.A)(this,ae)[ae]()&&((0,r.A)(this,te)[te].stop(),(0,r.A)(this,de)[de]("finish",!0))}}),Object.defineProperty(this,Pe,{writable:!0,value:e=>{var t;if(null===(t=(0,r.A)(this,Q)[Q])||void 0===t||t.debug("Received event from renderer:",e),void 0!==(0,r.A)(this,re)[re])return(0,r.A)(this,ie)[ie]=(0,r.A)(this,re)[re],(0,r.A)(this,re)[re]=void 0,void(0,r.A)(this,de)[de]("volume",(0,r.A)(this,ie)[ie]);const{volume:i}=e.detail,[[{track:n}={}]=[]]=(0,r.A)(this,te)[te].current,s=n&&(0,r.A)(this,J)[J]?(0,M.K$)(n.gain,(0,r.A)(this,X)[X]):1,a=(0,z.A)(i/s,{max:1,default:(0,r.A)(this,ie)[ie]});(0,r.A)(this,ie)[ie]!==a&&((0,r.A)(this,ie)[ie]=a,(0,r.A)(this,de)[de]("volume",(0,r.A)(this,ie)[ie]))}});const{license:t,logger:i,muted:n,normalizationTarget:s,normalized:o,quality:l,volume:A}=e;this.ready=(0,r.A)(this,Le)[Le](t).then(G.A),(0,r.A)(this,te)[te]=new a.Ay({logger:i,requester:(e,t)=>{var i;const[{track:n},{format:s}]=e,a=(0,r.A)(this,K)[K].get(n)||(0,r.A)(this,K)[K].set(n,{}).get(n);return null===(i=a.requester)||void 0===i||i.streamer.abort(),a.requester=a.requester&&a.requester.streamer.source.format===s?a.requester:new g(e),a.requester.request(t,(({fromCache:e,source:t,sources:i})=>{(0,r.A)(this,ue)[ue]={...t,fromCache:e},(0,r.A)(this,ce)[ce]=i}))},trackMapper:({track:e})=>e}),(0,r.A)(this,he)[he]();const{getCurrentTimestamp:d,isConnected:u,isRadio:c,isWidget:h,renewLicense:v,renewToken:f,setPropValue:p}=e;(0,r.A)(this,ne)[ne]=d,(0,r.A)(this,se)[se]=u,(0,r.A)(this,ae)[ae]=c,(0,r.A)(this,oe)[oe]=h,(0,r.A)(this,le)[le]=v,(0,r.A)(this,Ae)[Ae]=f,(0,r.A)(this,de)[de]=p,void 0!==n&&(this.muted=n),void 0!==s&&(this.normalizationTarget=s),void 0!==o&&(this.normalized=o),void 0!==l&&(this.quality=l),void 0!==A&&(this.volume=A),this.logger=i,null==i||i.log("%cUsing the new audio renderer with PlayerAdapter ðŸŽ§",'background: #121216 0.5em center url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAR0lEQVR4AWMYHEBoVTwEAdlM9LX6w35ZCEITF15eCUH0d9KbJEMIArLb9WsgCMgWaN4FQfRx0o8+UQjC4yThlLMQBHbS0AcAAoQpAbe906gAAAAASUVORK5CYII=") no-repeat; border-radius: 0.25em; color: #FFF; font-size: 1.25em; font-weight: bold; padding: 0.25em 0.5em 0.25em calc(1em + 16px);')}destruct(){(0,r.A)(this,ke)[ke](),(0,r.A)(this,te)[te].stop()}audioPlayer_mute(e){this.muted=e}audioPlayer_pause(){(0,r.A)(this,te)[te].pause()}audioPlayer_play(){(0,r.A)(this,te)[te].play().catch(G.A)}async audioPlayer_playTracks(e,t,i,{context:n,offset:s=Number((t=>null===(t=e[0])||void 0===t?void 0:t.OFFSET)())||0}={}){var a;if(!e.length||!n)return;s=null!==(a=(0,r.A)(this,B)[B])&&void 0!==a&&a.limited?0:s,(0,r.A)(this,de)[de]("position",0);const o=(0,r.A)(this,ve)[ve](e[0]),l=this._getVariantIterator(o);let{value:A}=l.next();if(A){var d,u;if(!(0,r.A)(this,se)[se]()&&"TOKEN"in o.legacy){const e=await U.A.singleton.post({id:o.id,timestamp:(0,r.A)(this,ne)[ne](),token:o.legacy.TOKEN});if(!e&&!o.preview)return;A=e?A:o.preview}const[[{track:e}={},t]=[]]=(0,r.A)(this,te)[te].current,a=(0,r.A)(this,K)[K].get(o)||(0,r.A)(this,K)[K].set(o,{}).get(o);if((null==e?void 0:e.id)===o.id&&(null==e?void 0:e.type)===o.type&&(null==t?void 0:t.format)===(null!==(d=null===(u=a[A.format.name])||void 0===u||null===(u=u.substitute)||void 0===u?void 0:u.format)&&void 0!==d?d:A.format))return void(this.volume=(0,r.A)(this,ie)[ie]);const l=[{context:n,track:o},A];(0,r.A)(this,te)[te].autoplay=i,(0,r.A)(this,te)[te].load(l,{time:s}).then((()=>this.volume=(0,r.A)(this,ie)[ie]))}}audioPlayer_seek(e){(0,r.A)(this,te)[te].seek({percent:e})}audioPlayer_setToken(e){return(0,r.A)(this,Le)[Le](e).then(G.A)}audioPlayer_setVolume(e){this.volume=e}audioPlayer_stop(e){e?(0,r.A)(this,te)[te].pause():((0,r.A)(this,te)[te].stop(),(0,r.A)(this,de)[de]("paused",!1),(0,r.A)(this,de)[de]("playing",!1))}get autoplay(){return(0,r.A)(this,te)[te].autoplay}set autoplay(e){(0,r.A)(this,te)[te].autoplay=e}_getVariantIterator(e){var t;const i=[],n=e.variants;if(null!==(t=(0,r.A)(this,B)[B])&&void 0!==t&&t.limited){const t=e.variants.filter((e=>e.format===b.a_));return e.preview?[e.preview].values():t.length?t.values():[].values()}switch((0,r.A)(this,ee)[ee]){case y.en.LOSSLESS:i.push(...m.hR[y.en.LOSSLESS]);case y.en.HIGH:i.push(...m.hR[y.en.HIGH]);case y.en.STANDARD:i.push(...m.hR[y.en.STANDARD]);case y.en.LOW:i.push(...m.hR[y.en.LOW]);default:i.push(...m.hR[y.en.UNKNOWN])}return i.map((e=>n.find((t=>t.format.enum===e.enum)))).filter((e=>Boolean(e))).values()}get loaded(){return{current:(0,r.A)(this,te)[te].current,next:(0,r.A)(this,te)[te].next}}set logger(e){var t;(0,r.A)(this,Q)[Q]=(null==e||null===(t=e.namespace)||void 0===t?void 0:t.call(e,"PlayerAdapter"))||e,(0,r.A)(this,te)[te].logger=e}get muted(){var e;return null!==(e=(0,r.A)(this,$)[$])&&void 0!==e?e:(0,r.A)(this,Z)[Z]}set muted(e){e=Boolean(e),(0,r.A)(this,Z)[Z]!==e&&((0,r.A)(this,te)[te].muted=(0,r.A)(this,$)[$]=e)}set next(e){const{context:t,track:i}=e||{};(0,r.A)(this,Y)[Y]=i?{context:t,track:(0,r.A)(this,ve)[ve](i)}:void 0,(0,r.A)(this,fe)[fe]((0,r.A)(this,Y)[Y])}get normalizationTarget(){return(0,r.A)(this,X)[X]}set normalizationTarget(e){e=(0,z.A)(e,{min:-1/0,max:0,default:(0,r.A)(this,X)[X]}),(0,r.A)(this,X)[X]!==e&&((0,r.A)(this,X)[X]=e,(0,r.A)(this,de)[de]("normalizationTarget",e),this.volume=(0,r.A)(this,ie)[ie])}get normalized(){return(0,r.A)(this,J)[J]}set normalized(e){e=Boolean(e),(0,r.A)(this,J)[J]!==e&&((0,r.A)(this,J)[J]=e,(0,r.A)(this,de)[de]("normalized",e),this.volume=(0,r.A)(this,ie)[ie])}get quality(){return(0,r.A)(this,ee)[ee]}set quality(e){if(!Object.values(y.en).filter((e=>e!==y.en.UNKNOWN)).includes(e))return;const{qualities:t=[]}=(0,r.A)(this,B)[B]||{};e!==y.en.LOSSLESS||t.includes(y.en.LOSSLESS)||(e=y.en.HIGH),e!==y.en.HIGH||t.includes(y.en.HIGH)||(e=y.en.STANDARD),(0,r.A)(this,ee)[ee]!==e&&((0,r.A)(this,ee)[ee]=e,(0,r.A)(this,fe)[fe]((0,r.A)(this,Y)[Y]))}get volume(){var e;return null!==(e=(0,r.A)(this,re)[re])&&void 0!==e?e:(0,r.A)(this,ie)[ie]}set volume(e){e=(0,z.A)(e,{max:1,default:(0,r.A)(this,ie)[ie]});const[[{track:t}={}]=[]]=(0,r.A)(this,te)[te].current,i=t&&(0,r.A)(this,J)[J]?(0,M.K$)(t.gain,(0,r.A)(this,X)[X]):1,n=(0,z.A)(e*i,{max:1,default:(0,r.A)(this,ie)[ie]});(0,r.A)(this,ie)[ie]===e&&(0,r.A)(this,te)[te].volume===n||((0,r.A)(this,re)[re]=e,(0,r.A)(this,te)[te].volume=n)}}function _e(){Object.entries((0,r.A)(this,Re)[Re]).forEach((e=>{const[t,i]=e;(0,r.A)(this,te)[te].addEventListener(t,i)}))}function Ne(e){const t=`${C.Ay.parser.type(e)}:${C.Ay.parser.id(e)}`;if((0,r.A)(this,V)[V].has(t))return(0,r.A)(this,V)[V].get(t);function i(e){const{url:t,...i}=e;return{...i,sources:t?[{url:t}]:[]}}const n=C.Ay.parser.preview(e),a=C.Ay.parser.sources(e).map(i),o={...new C.Ay(e),idOrigin:e.SNG_ID_ORIGIN,id:String("SNG_ID_ORIGIN"in e?String(e.SNG_ID):C.Ay.parser.id(e)),preview:n?i(n):null,token:"TRACK_TOKEN"in e?new s.X8(e.TRACK_TOKEN,{expire:e.TRACK_TOKEN_EXPIRE}):new s.X8(""),variants:a};return(0,r.A)(this,V)[V].set(t,o),Object.defineProperty(o.token,"expired",{get:()=>o.token.isExpired()}),Object.defineProperty(o,"renewToken",{value:async()=>{await(0,r.A)(this,Ae)[Ae](o),Object.defineProperty(o.token,"expired",{get:()=>o.token.isExpired()})}}),o}async function De(e){if(!e)return void(0,r.A)(this,te)[te].load([],{next:!0}).catch(M.r6);const{track:t}=e,i=this._getVariantIterator(t);let{value:n}=i.next();if(n){if(!(0,r.A)(this,se)[se]()&&"TOKEN"in t.legacy){const e=await U.A.singleton.post({id:t.id,timestamp:(0,r.A)(this,ne)[ne](),token:t.legacy.TOKEN});if(!e&&!t.preview)return;n=e?n:t.preview}(0,r.A)(this,te)[te].load([e,n],{next:!0}).catch(M.r6)}else(0,r.A)(this,te)[te].load([],{next:!0}).catch(M.r6)}function xe(){Object.entries((0,r.A)(this,Re)[Re]).forEach((e=>{const[t,i]=e;(0,r.A)(this,te)[te].removeEventListener(t,i)}))}function Se(){return{[w.RendererEvents.DURATION_CHANGED]:(0,r.A)(this,pe)[pe],[w.RendererEvents.ENDED]:(0,r.A)(this,ge)[ge],[w.RendererEvents.ERROR]:(0,r.A)(this,be)[be],[w.RendererEvents.LOADING]:(0,r.A)(this,me)[me],[w.RendererEvents.METADATA_CHANGED]:(0,r.A)(this,ye)[ye],[w.RendererEvents.MUTED_CHANGED]:(0,r.A)(this,we)[we],[w.RendererEvents.PAUSED_CHANGED]:(0,r.A)(this,Oe)[Oe],[w.RendererEvents.SEEKED]:(0,r.A)(this,Te)[Te],[w.RendererEvents.TIME_CHANGED]:(0,r.A)(this,Ee)[Ee],[w.RendererEvents.VOLUME_CHANGED]:(0,r.A)(this,Pe)[Pe]}}async function Ie(e){const t=await U.A.singleton.post({token:e}),i=[...new Set(Object.entries(t.audio_qualities||{}).filter((([e])=>!e.startsWith("connected_device"))).map((([,e])=>e)).reduce(((e,t)=>[...e,...t]),[]))];(0,r.A)(this,B)[B]={limited:t.limited&&!((0,r.A)(this,ae)[ae]()&&(0,r.A)(this,oe)[oe]()),qualities:i,token:new s.X8(t.license_token,{expire:t.expiration_timestamp})},this.quality=(0,r.A)(this,ee)[ee];const n=t.audio_qualities||{};return(0,r.A)(this,de)[de]("user_status",{...t,audio_qualities:{mobile_download:[...n.mobile_download||[]],mobile_streaming:[...n.mobile_streaming||[]],wifi_download:[...n.wifi_download||[]],wifi_streaming:[...n.wifi_streaming||[]]}}),(0,r.A)(this,B)[B]}je.DEFAULT_MUTED=!1,je.DEFAULT_NORMALIZATION_TARGET=F,je.DEFAULT_NORMALIZED=!1,je.DEFAULT_QUALITY=H,je.DEFAULT_VOLUME=1}}]);
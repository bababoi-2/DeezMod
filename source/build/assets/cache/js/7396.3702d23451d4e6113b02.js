"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7396],{YaZK:(e,t,n)=>{n.d(t,{A:()=>d});var r=n("MVPB"),i=n("4OMY"),a=n("mEUi");const s=Symbol("AbortSignal");var o=(0,i.A)("aborter"),l=(0,i.A)("signal");class d{constructor(){Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:new c(s,(e=>(0,r.A)(this,o)[o]=e))})}abort(e=new DOMException("Aborted","AbortError")){(0,r.A)(this,o)[o]&&!(0,r.A)(this,l)[l].aborted&&(0,r.A)(this,o)[o](e)}get signal(){return(0,r.A)(this,l)[l]}get[Symbol.toStringTag](){return"AbortController"}}var u=(0,i.A)("aborted"),A=(0,i.A)("onabort");class c extends a.Ay{constructor(...[e,t]){if(super(),this.reason=void 0,Object.defineProperty(this,u,{writable:!0,value:!1}),Object.defineProperty(this,A,{writable:!0,value:null}),e!==s||"function"!=typeof t)throw new TypeError("Illegal constructor");t((e=>{var t;this.reason=e;const n=new a.Jh("abort");(0,r.A)(this,u)[u]=!0,null==(t=(0,r.A)(this,A)[A])||t.call(this,n),this.dispatchEvent(n)}))}static abort(e=new DOMException("Aborted","AbortError")){return new c(s,(t=>t(e)))}any(e){throw new Error("Method not implemented.")}static any(e){let t;const n=[],r=[];let i;const a=new c(s,(e=>i=e)),o=function(e){i(e.target.reason),r.forEach((e=>e()))};for(const i of e){if(i.aborted){t=i;break}n.push((()=>{i.addEventListener("abort",o),r.push((()=>{i.removeEventListener("abort",o)}))}))}return t||(n.map((e=>e())),a)}throwIfAborted(){if((0,r.A)(this,u)[u])throw this.reason}get aborted(){return(0,r.A)(this,u)[u]}get onabort(){return(0,r.A)(this,A)[A]}set onabort(e){(0,r.A)(this,A)[A]="function"==typeof e?e:null}get[Symbol.toStringTag](){return"AbortSignal"}}},vxR0:(e,t,n)=>{n.d(t,{AA:()=>i,WI:()=>D,gW:()=>l,T$:()=>p,Ay:()=>S,Nm:()=>L,PY:()=>M});var r=n("iA+Z");class i extends ArrayBuffer{constructor(e,{contentLength:t=1/0,offset:n=0,overhead:i=0,range:a={offset:0,size:1/0}}={}){super(e),this.contentLength=void 0,this.offset=void 0,this.overhead=void 0,this.range=void 0,t=(0,r.A)(t,{default:1/0})||1/0,t=Number.isFinite(t)&&!Number.isSafeInteger(t)?1/0:t,n=(0,r.A)(n),n=Number.isSafeInteger(n)?n:0,i=(0,r.A)(i),i=Number.isSafeInteger(i)?i:0;let s=(0,r.A)(a.offset||0);s=Number.isSafeInteger(s)?s:0;let o=(0,r.A)(a.size||1/0,{default:1/0})||1/0;if(o=Number.isFinite(o)&&!Number.isSafeInteger(o)?1/0:o,o=Number.isFinite(t)&&!Number.isFinite(o)?t-s:o,s+o>t)throw new RangeError("The range is out of bound of the file");if(n<s||n+e-i>s+o)throw new RangeError("The chunk is out of bound of the range");this.contentLength=t,this.offset=n,this.overhead=i,this.range={offset:s,size:o}}concat(...e){return e.length?i.concat(this,...e):i.from(this,this)}static concat(...e){if(!e.length)return new i(0);let t=0,n=0,r=1/0;const a={offset:1/0},s={offset:0,size:0};for(const i of e)t=Number.isFinite(i.contentLength)?Math.max(t,i.contentLength):t,n=Math.max(n,i.offset+i.byteLength),r=Math.min(r,i.offset),i.range.offset<a.offset&&(a.offset=i.range.offset),i.range.offset>=s.offset&&(s.offset=i.range.offset,s.size=Number.isFinite(i.range.size)?Math.max(s.size,i.range.size):s.size);const o=n-r,l={offset:a.offset,size:s.size?s.offset+s.size-a.offset:1/0},d=new i(o,{contentLength:t,offset:r,range:l});return e.forEach((e=>new Uint8Array(d,e.offset-r,e.byteLength).set(new Uint8Array(e)))),d}get firstInFile(){return 0===this.offset}get firstInRange(){return this.offset===this.range.offset}static from(e,t){const n=new i(e.byteLength,t);return new Uint8Array(n).set(new Uint8Array(e)),n}get lastInFile(){return!!Number.isFinite(this.contentLength)&&this.offset+this.byteLength-this.overhead===this.contentLength}get lastInRange(){return!!Number.isFinite(this.range.size)&&this.offset+this.byteLength-this.overhead===this.range.offset+this.range.size}get size(){return this.byteLength}slice(e,t=this.byteLength){return e=e<0?this.byteLength+e:e,t=void 0!==t&&t<0?this.byteLength+t:t,i.from(super.slice(e,t),{contentLength:this.contentLength,offset:this.offset+e,range:this.range})}}var a=n("MVPB"),s=n("4OMY"),o=(0,s.A)("object");class l{constructor(e){Object.defineProperty(this,o,{writable:!0,value:void 0}),(0,a.A)(this,o)[o]=e}transform(e,t){t.enqueue(Object.assign(e,(0,a.A)(this,o)[o]))}}var d=n("/0+J"),u=(0,s.A)("logger"),A=(0,s.A)("max"),c=(0,s.A)("min"),h=(0,s.A)("readable"),f=(0,s.A)("reader"),v=(0,s.A)("retained");class p{constructor(...[e,{logger:t,max:n=1/0,min:r=0}={}]){Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:1/0}),Object.defineProperty(this,c,{writable:!0,value:0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:[]}),(0,a.A)(this,h)[h]=e,this.logger=t,this.max=n,this.min=r}cancel(e){var t,n,r;null==(t=(0,a.A)(this,u)[u])||t.debug("Cancelled:",e),null==(n=(0,a.A)(this,f)[f])||n.cancel(e),null==(r=(0,a.A)(this,f)[f])||r.releaseLock(),(0,a.A)(this,v)[v]=[]}set logger(e){(0,a.A)(this,u)[u]=(null==e||null==e.namespace?void 0:e.namespace("ThrottledUnderlyingSource"))||e}get max(){return(0,a.A)(this,A)[A]}set max(e){e&&e>0&&(0,a.A)(this,c)[c]<=e&&((0,a.A)(this,A)[A]=e)}get min(){return(0,a.A)(this,c)[c]}set min(e){Number.isFinite(e)&&e>=0&&e<=(0,a.A)(this,A)[A]&&((0,a.A)(this,c)[c]=e)}pull(e){var t=this;return(0,d.A)((function*(){var n;let r;if((0,a.A)(t,v)[v].length){const e=(0,a.A)(t,v)[v].reduce(((e,t)=>e+t.byteLength),0);r=i.concat(...(0,a.A)(t,v)[v]),e>(0,a.A)(t,A)[A]?((0,a.A)(t,v)[v]=[r.slice((0,a.A)(t,A)[A])],r=r.slice(0,(0,a.A)(t,A)[A])):(0,a.A)(t,v)[v]=[]}if(!r||r&&r.byteLength<(0,a.A)(t,c)[c]){var s;(s=(0,a.A)(t,f))[f]||(s[f]=(0,a.A)(t,h)[h].getReader());const{value:n}=yield(0,a.A)(t,f)[f].read();var o,l,d;if(!n||!n.byteLength)return r&&r.byteLength?(r=i.concat(r,...(0,a.A)(t,v)[v]),null==(o=(0,a.A)(t,u)[u])||o.debug("Finished reading","\n\t","Enqueueing last chunk (",r.byteLength,"bytes @",r.offset,")"),e.enqueue(r)):null==(l=(0,a.A)(t,u)[u])||l.debug("Finished reading"),void e.close();null==(d=(0,a.A)(t,u)[u])||d.debug("Read",n.byteLength,"bytes from readable @",n.offset,...r?["\n\t","Merging with",r.byteLength,"bytes @",r.offset,"previously retained"]:[]),r=r?i.concat(r,n):n}if(r.byteLength>(0,a.A)(t,A)[A]){var p;const n=r.slice(0,(0,a.A)(t,A)[A]),i=r.slice((0,a.A)(t,A)[A]);return null==(p=(0,a.A)(t,u)[u])||p.debug("Enqueueing",n.byteLength,"bytes @",n.offset,"(",r.byteLength,"bytes >",(0,a.A)(t,A)[A],"bytes)","\n","Retaining",i.byteLength,"bytes @",i.offset),e.enqueue(n),void((0,a.A)(t,v)[v]=[...(0,a.A)(t,v)[v],i])}var b;if(r.byteLength<(0,a.A)(t,c)[c])return null==(b=(0,a.A)(t,u)[u])||b.debug("Nothing to enqueue (",r.byteLength,"bytes <",(0,a.A)(t,c)[c],"bytes)"),(0,a.A)(t,v)[v]=[...(0,a.A)(t,v)[v],r],t.pull(e);null==(n=(0,a.A)(t,u)[u])||n.debug("Enqueueing",r.byteLength,"bytes @",r.offset),e.enqueue(r)}))()}}var b=n("+9dH"),g=n("yZHM"),y=n("8VJL"),m=n("WzpB"),E=n("LYzy"),w=n("Z/od"),P=n("Gq8r");function O(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new R(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function R(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return R=function(e){this.s=e,this.n=e.next},R.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new R(e)}function L(e){return N.apply(this,arguments)}function N(){return N=(0,E.A)((function*(e){let t,n=0;try{for(;;){var r;if(t=yield(0,w.A)(e(n++)),"function"!=typeof(null==(r=t)?void 0:r.getReader))break;yield*(0,P.A)(O(M(t)),w.A)}}finally{var i;null==(i=t)||null==i.cancel||i.cancel().catch(m.r6)}})),N.apply(this,arguments)}function M(e){return C.apply(this,arguments)}function C(){return(C=(0,E.A)((function*(e){const t=e.getReader();try{for(;;){const{done:e,value:n}=yield(0,w.A)(t.read());if(e)break;yield n}}finally{t.releaseLock()}}))).apply(this,arguments)}function j(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new k(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function k(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return k=function(e){this.s=e,this.n=e.next},k.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new k(e)}class T extends y.A{}class NoNetworkError extends T{}const D=131072;function S(e){return F.apply(this,arguments)}function F(){return F=(0,d.A)((function*(e,t={}){const{fetch:n=globalThis.fetch,Headers:r=globalThis.Headers,Response:a=globalThis.Response,retries:s,signal:o,streaming:l,timeout:u}=t,A=Boolean(new a("").body),c=new r(t.headers);if("pull"===l||l&&!A){const e=_(U(c)),n=x(t,{iteration:0,range:e});c.set("range",`bytes=${e[0]}-${e[0]+n-1}`)}const h=void 0!==globalThis.AbortController?new globalThis.AbortController:void 0,{signal:f}=h||{},v=()=>[p(),null==h?void 0:h.abort()],p=()=>null==o?void 0:o.removeEventListener("abort",v);null==o||o.addEventListener("abort",v),(null==o?void 0:o.aborted)&&(null==h||h.abort());const y=()=>n(e,(0,b.A)({},t,{headers:[...c.keys()].length?c:void 0,signal:f})).then((n=>function(e,[,t]){const{onHeaders:n={}}=t;for(const[t,r]of Object.entries(n))r(e.headers.get(t));return e}(n,[e,t]))).then(B).then((n=>c.has("range")&&!n.headers.has("content-range")?function(e,[,t],{abort:n}){const{Headers:r=globalThis.Headers,onProgress:a}=t,[s,o]=_(U(new r(t.headers))),l=Number(e.headers.get("content-length"))||1/0,u=new r({"content-range":`bytes ${s}-${o}/*`}),A=e.body||new g.ZY({start:t=>(0,d.A)((function*(){const n=yield e.arrayBuffer();t.enqueue(new Uint8Array(n)),t.close()}))()}),c={offset:s,size:Number.isFinite(o)?o-s+1:l-s},h=o-s+1;Number.isFinite(l)&&(u.set("content-length",String(h)),u.set("content-range",`bytes ${s}-${o}/${l}`));let f=0;const v=new g.ZY({cancel:n,start:e=>(0,d.A)((function*(){var t,r=!1,o=!1;try{for(var d,u=j(M(A));r=!(d=yield u.next()).done;r=!1){const t=d.value;{if(f<s&&f+t.byteLength<f)continue;const r=Math.max(f,s)-f,o=Math.max(0,f-s),d=Math.min(t.byteLength-r,h-o),u=s-o===f&&t.byteLength===h?t:t.slice(r,r+d),A=i.from(u,{contentLength:l,offset:c.offset+o,range:c});if(f+=t.byteLength,null==a||a(f-s),e.enqueue(new Uint8Array(A)),Number.isFinite(h)&&f>s+h){n();break}}}}catch(e){o=!0,t=e}finally{try{r&&null!=u.return&&(yield u.return())}finally{if(o)throw t}}e.close()}))()});return Object.defineProperties(e,{arrayBuffer:{value:(b=(0,d.A)((function*(){const e=[];var t,n=!1,r=!1;try{for(var i,a=j(M(v));n=!(i=yield a.next()).done;n=!1){const t=i.value;e.push(t)}}catch(e){r=!0,t=e}finally{try{n&&null!=a.return&&(yield a.return())}finally{if(r)throw t}}return new Blob(e).arrayBuffer()})),function(){return b.apply(this,arguments)})},blob:{value:(p=(0,d.A)((function*(){const t=[],n=e.headers.get("content-type")||void 0;var r,i=!1,a=!1;try{for(var s,o=j(M(v));i=!(s=yield o.next()).done;i=!1){const e=s.value;t.push(e)}}catch(e){a=!0,r=e}finally{try{i&&null!=o.return&&(yield o.return())}finally{if(a)throw r}}return new Blob(t,{type:n})})),function(){return p.apply(this,arguments)})},body:{value:v},headers:{value:u},status:{value:206},statusText:{value:"Partial Content"}});var p,b}(n,[e,t],{abort:v}):function(e,[t,n],{abort:r}){const{Headers:a=globalThis.Headers,onProgress:s,Response:o=globalThis.Response,streaming:l}=n,[u,A]=_(U(new a(n.headers))),c=e.headers.get("content-range")?Number((e.headers.get("content-range")||"").split("/")[1]):Number(e.headers.get("content-length"))||1/0,h={offset:u,size:Number.isFinite(A)?A-u+1:c-u},f=Boolean(new o("").body);let v,p=0;const y=function(){var e=(0,d.A)((function*(e){e++;const r=new a(n.headers),[i,s]=_(U(r)),o=x(n,{iteration:e,range:[i+p,Number.isFinite(s)?s:c-1-i]});if(o<=0)return;r.set("range",`bytes=${i+p}-${i+p+o-1}`);const{body:l}=yield S(t,(0,b.A)({},n,{headers:r,onProgress:void 0,streaming:void 0}));return l}));return function(t){return e.apply(this,arguments)}}();if("pull"===l){let t,n=!0;return Object.defineProperty(e,"body",{get:()=>v||(v=new g.ZY({cancel:r,pull:r=>(0,d.A)((function*(){if(n){const t=yield e.arrayBuffer(),a=i.from(t,{contentLength:c,offset:h.offset+p,range:h});return p+=a.byteLength,null==s||s(p),r.enqueue(new Uint8Array(a)),void(n=!1)}t||(t=L(y));const a=yield t.next();if(a.done)return void r.close();const{value:o}=a;Object.assign(o.buffer,{range:h}),p+=o.byteLength,null==s||s(p),r.enqueue(o)}))()}))})}if(f){const t=e.body;return Object.defineProperty(e,"body",{get:()=>v||(v=new g.ZY({cancel:r,start:e=>(0,d.A)((function*(){var n,r=!1,a=!1;try{for(var o,l=j(M(t));r=!(o=yield l.next()).done;r=!1){const t=o.value;{const n=i.from(t,{contentLength:c,offset:h.offset+p,range:h});p+=n.byteLength,null==s||s(p),e.enqueue(new Uint8Array(n))}}}catch(e){a=!0,n=e}finally{try{r&&null!=l.return&&(yield l.return())}finally{if(a)throw n}}e.close()}))()}))})}return"push"===l||l?Object.defineProperty(e,"body",{get:()=>v||(v=new g.ZY({cancel:r,start:t=>(0,d.A)((function*(){const n=yield e.arrayBuffer(),r=i.from(n,{contentLength:c,offset:h.offset+p,range:h});p+=n.byteLength,null==s||s(p),t.enqueue(new Uint8Array(r));var a,o=!1,l=!1;try{for(var d,u=j(L(y));o=!(d=yield u.next()).done;o=!1){const e=d.value;Object.assign(e.buffer,{range:h}),p+=e.byteLength,null==s||s(p),t.enqueue(e)}}catch(e){l=!0,a=e}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(l)throw a}}t.close()}))()}))}):Object.defineProperty(e,"body",{get:()=>v||(v=new g.ZY({cancel:r,start:t=>(0,d.A)((function*(){const n=yield e.arrayBuffer(),r=i.from(n,{contentLength:c,offset:h.offset+p,range:h});p+=n.byteLength,null==s||s(p),t.enqueue(new Uint8Array(r)),t.close()}))()}))})}(n,[e,t],{abort:v}))).catch(G).finally(p),E=u&&u>0&&Number.isFinite(u)?()=>(0,m.wj)(y(),{timeout:u}):()=>y();if(s&&s>0){const{delay:e}=t;return(0,m.bD)(E,{delay:e,retries:s,signal:null!=o?o:void 0})}return E()})),F.apply(this,arguments)}function x(e,{iteration:t,range:n}){const{chunkSize:r}=e;let i="function"==typeof r?r({iteration:t,range:[...n]}):r;if(i=i&&i>0&&Number.isFinite(i)?i:D,void 0!==n[0]){const e=n[1]-n[0]+1;return Number.isFinite(e)&&e<i?e:i}return i}function _(e){const t=e[0];if(void 0===t[0])throw new Error("Requesting for the last N bytes is not supported for now");return t}function U(e){return(e.get("range")||"").replace("bytes=","").trim().split(",").map((e=>e.split("-"))).map((([e,t])=>[!e&&t?void 0:Number(e),Number(t)||1/0]))}function G(e){if((0,m.zf)(e))throw new m.lc;if("undefined"!=typeof navigator&&!1===navigator.onLine)throw new NoNetworkError;throw e}function B(e){if(429===e.status||e.status>=500){const t=e.headers.get("retry-after");let n;throw t&&(n=Number.parseInt(t,10),Number.isNaN(n)?n=new Date(t).getTime()-new Date(e.headers.get("date")||Date.now()).getTime():n*=1e3),new m.s0(void 0,{delay:n})}return e}},"7BwG":(e,t,n)=>{n.r(t),n.d(t,{FREE:()=>i,MetadataBlockTypes:()=>o,NOT_DOCUMENTED:()=>a,UNKNOWN:()=>s,default:()=>R,frames:()=>L,metadata:()=>N});var r=n("Nlia");const i=null,a="?",s="Unknown";let o=function(e){return e.ID3V1="id3v1",e.ID3V2="id3v2",e.INFO="info",e}({});var l=n("/HWm");const d=["comment"],u={"MPEG-1":{1:[i,32,64,96,128,160,192,224,256,288,320,352,384,416,448],2:[i,32,48,56,64,80,96,112,128,160,192,224,256,320,384],3:[i,32,40,48,56,64,80,96,112,128,160,192,224,256,320]},"MPEG-2":{1:[i,32,48,56,64,80,96,112,128,144,160,176,192,224,256],2:[i,8,16,24,32,40,48,56,64,80,96,112,128,144,160],3:[]},"MPEG-2.5":{1:[],2:[],3:[]}};u["MPEG-2"][3]=u["MPEG-2"][2],u["MPEG-2.5"]=u["MPEG-2"];const A={},c=["Blues","Classic rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","Rhythm and Blues","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz & Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound clip","Gospel","Noise","Alternative Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native US","Cabaret","New Wave","Psychedelic","Rave","Show tunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock ’n’ Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebop","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber music","Sonata","Symphony","Booty bass","Primus","Porn groove","Satire","Slow jam","Club","Tango","Samba","Folklore","Ballad","Power ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum solo","A cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore Techno","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian rock","Merengue","Salsa","Thrash Metal","Anime","Jpop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio theatre","Neue Deutsche Welle","Podcast","Indie-Rock","G-Funk","Dubstep","Garage Rock","Psybient"],h=["Mono","Stereo","Dual mono","Joint stereo","Force","Auto","Intensity","Difference"],f={"MPEG-1":[21,36],"MPEG-2":[13,21],"MPEG-2.5":[13,21]},v=["<= 32000 Hz","44100 Hz","48000 Hz","> 48000 Hz"],p=["No surround information","DPL","DPL2","Ambisonic",a,a,a],b=[s,"CBR","ABR","VBR method 1 (RH)","VBR method 2 (MTRH)","VBR method 3 (MT)","VBR method 4",a,"CBR 2 pass","ABR 2 pass",a,a,a,a,a],g=[null,3,2,1],y={"MPEG-1":[null,384,1152,1152],"MPEG-2":[null,384,1152,576],"MPEG-2.5":[]};y["MPEG-2.5"]=y["MPEG-2"];const m={"MPEG-1":[44100,48e3,32e3],"MPEG-2":[22050,24e3,16e3],"MPEG-2.5":[11025,12e3,8e3]},E=["MPEG-2.5",null,"MPEG-2","MPEG-1"];function w(e){const[t]=String.fromCharCode(...e).split(String.fromCharCode(0),1);return t}const P={id3v1(e){let t=3;const n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=c[e.getUint8(e.byteLength-1)]||s,i=n.slice(t,t+=30),a=n.slice(t,t+=30),o=n.slice(t,t+=30),l=n.slice(t,t+=4);let d=n.slice(t,t+=30),u=0;return 0===d[d.byteLength-2]&&(u=d[d.byteLength-1],d=d.slice(0,d.byteLength-2)),{album:w(o),artist:w(a),comment:w(d),date:new Date(`${w(l)}-01-01`),genre:r,title:w(i),track:u}},id3v2:()=>({}),info(e,t){let n,r=t.offset+f[t.version][t.channels-1];const i=1483304551===e.getUint32(r)?"Xing":1231971951===e.getUint32(r)?"Info":"";if(r+=4,!i)throw new Error;let a,o,l,d;const u=e.getUint8(r+3);r+=4,1&~u||(a=e.getUint32(r),r+=4),2&~u||(o=e.getUint32(r),r+=4),4&~u||(l=Array.from(Array(100)).map((()=>Math.floor(e.getUint8(r++)/256*(o||0))))),8&~u||(d=e.getUint32(r),r+=4);const A=Array.from(Array(9)).map((()=>String.fromCharCode(e.getUint8(r++)))).join("");n=e.getUint8(r);const c=n>>4==15?null:"rev"+(n>>4),g=b[15&n];r+=1;const y=100*e.getUint8(r)||s;r+=1;const m=e.getUint32(r)||s;r+=4,n=e.getUint8(r);let E=0;if(n>>5==1){const t=n>>1&1;E=(((1&n)<<8)+e.getUint8(r+1)/10)*(t?-1:1)}if(r+=2,n=e.getUint8(r),n>>5==2){const t=n>>1&1;E=(((1&n)<<8)+e.getUint8(r+1)/10)*(t?-1:1)}r+=2,n=e.getUint8(r);const w={nspsytune:Boolean(n>>4&1),nssafejoint:Boolean(n>>4&2),"nogap-last":!(n>>4&4),"nogap-first":!(n>>4&8)},P=15&n;r+=1;const O=e.getUint8(r);r+=1;const R=(e.getUint8(r)<<4)+(e.getUint8(r+1)>>4),L=((15&e.getUint8(r+1))<<8)+e.getUint8(r+2);r+=3,n=e.getUint8(r);const N=v[n>>6],M=Boolean(n>>5&1),C=h[n>>2&7],j=3&n;r+=1;const k=Math.pow(2,1.5*e.getUint8(r)/4);r+=1,n=e.getUint8(r);const T=p[n>>3&7],D=((7&n)<<8)+e.getUint8(r+1);r+=2;const S=e.getUint32(r);return r+=4,{ATH:P,bitrate:O,CRC16:{audio:[e.getUint8(r++),e.getUint8(r++)],info:[e.getUint8(r++),e.getUint8(r++)]},delays:{start:R,end:L},encoder:{flags:{channelMode:C,noiseShaping:j,sourceSampling:N,unwiseSettings:M},name:A,options:w},filter:y,frames:a,marker:i,MP3Gain:k,preset:D,quality:d,ReplayGain:{adjustments:{album:0,track:E},peak:m},revision:c,sizes:{audio:S,file:o},surround:T,TOC:l,VBRMethod:g}}},O={frames(e){const t=e.byteLength,n=[];for(let r=0;r<t-3;r++){const i=e[r],a=e[r+1],s=e[r+2],o=e[r+3];if(73===i&&68===a&&51===s&&r+6<t){r+=((127&e[r+6])<<21)+((127&e[r+7])<<14)+((127&e[r+8])<<7)+(127&e[r+9])+10-1;continue}if(84===i&&65===a&&71===s){r+=127;continue}if(!(255===i&&a>=224)){1===n.length&&(r=n[0].offset,n.length=0);continue}const l=E[a>>3&3],d=g[a>>1&3],c=!(1&a);if(!l||!d)continue;const h=u[l][d][s>>4],f=y[l][d],v=m[l][s>>2&3];if(!h||!f||!v)continue;const p=s>>1&1;if(1&s)continue;if(2==(3&o))continue;const b=Math.floor(1===d?4*(12*h*1e3/v+p):144*h*1e3/v+p),w=o>>6<3?2:1,P=`${l};${d};${h};${v};${w};${p}`,O=A[P]||(A[P]=Object.assign(Object.create(null,{duration:{get(){return this.samples/this.sampling*1e3}}}),{bitrate:h,channels:w,headerSize:c?6:4,layer:d,samples:f,sampling:v,size:b,version:l}));r+b<=t&&n.push(Object.assign(Object.create(O),{offset:r})),r+=b-1}return n},metadata(e){var t,n;const i=e.byteLength;if(i<10)throw new l.yw;const a={channels:2,delays:{start:0,end:0},initialization:new Uint8Array(0),layout:[],sampling:44100},s={offset:0,size:0,type:o.ID3V2};if(73===e[0]&&68===e[1]&&51===e[2]){const t=`${e[3]}.${e[4]}`,n=((127&e[6])<<21)+((127&e[7])<<14)+((127&e[8])<<7)+(127&e[9])+10;if(i<n)throw new l.yw;const r=P.id3v2(new DataView(e.buffer,e.byteOffset,n),t);s.data=r,s.size=n,a.layout.push(s)}if(i<32+s.size)throw new l.yw;const u=O.frames(new Uint8Array(e.buffer,s.size,Math.min(2881,i)));if(u.length)try{var A;const t=u[0].offset+s.size,{layer:n,sampling:r,size:i,version:l}=u[0],d=P.info(new DataView(e.buffer,t,i),u[0]);if(d.frames){const e=d.frames*y[l][n]-d.delays.start-d.delays.end;a.duration=e/r}a.delays=d.delays,a.encoder=d.encoder.name,a.filesize=d.sizes.file,a.frames=d.frames,a.seektable=null==(A=d.TOC)?void 0:A.map((e=>({offset:e}))),a.layout.push({data:d,offset:t,size:i,type:o.INFO})}catch(e){}if(e.byteLength>=128&&84===e[e.byteLength-128]&&65===e[e.byteLength-127]&&71===e[e.byteLength-126]){const t=P.id3v1(new DataView(e.buffer,e.byteLength-128,128)),n=(0,r.A)(t,d);Object.assign(a,n),a.layout.push({data:t,offset:e.byteLength-128,size:128,type:o.ID3V1})}return a.channels=(null==(t=u[0])?void 0:t.channels)||a.channels,a.sampling=(null==(n=u[0])?void 0:n.sampling)||a.sampling,a}},R=O,L=O.frames,N=O.metadata},"5g2R":(e,t,n)=>{n.d(t,{A:()=>o});var r=n("MVPB"),i=n("4OMY"),a=(0,i.A)("end"),s=(0,i.A)("start");class o{constructor(e,t){Object.defineProperty(this,a,{writable:!0,value:0}),Object.defineProperty(this,s,{writable:!0,value:0}),this.end=t,this.start=e}get duration(){return(0,r.A)(this,a)[a]-(0,r.A)(this,s)[s]}get end(){return(0,r.A)(this,a)[a]}set end(e){if(!Number.isFinite(e)||e<(0,r.A)(this,s)[s])throw new TypeError(Number.isFinite(e)?`\`end\` is lower than \`start\` (${e} < ${(0,r.A)(this,s)[s]})`:`\`end\` is non-finite (${e})`);(0,r.A)(this,a)[a]=e}get start(){return(0,r.A)(this,s)[s]}set start(e){if(!Number.isFinite(e)||e>(0,r.A)(this,a)[a])throw new TypeError(Number.isFinite(e)?`\`start\` is greater than \`end\` (${e} > ${(0,r.A)(this,a)[a]})`:`\`start\` is non-finite (${e})`);(0,r.A)(this,s)[s]=e}toString(){return`[${(0,r.A)(this,s)[s]}, ${(0,r.A)(this,a)[a]}] (${this.duration})`}}},i51G:(e,t,n)=>{n.d(t,{e:()=>E,A:()=>D});var r=n("/0+J"),i=n("MVPB"),a=n("4OMY"),s=n("YaZK"),o=n("mEUi"),l=(0,a.A)("jobs"),d=(0,a.A)("running"),u=(0,a.A)("sourceBuffer"),A=(0,a.A)("queue"),c=(0,a.A)("start");class h{constructor(e){Object.defineProperty(this,c,{value:v}),Object.defineProperty(this,A,{value:f}),Object.defineProperty(this,l,{writable:!0,value:[]}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,i.A)(this,u)[u]=e,(0,i.A)(this,u)[u].addEventListener("updateend",(()=>{const[e,t]=(0,i.A)(this,d)[d]||[];e&&e(null,t),(0,i.A)(this,d)[d]=void 0,(0,i.A)(this,c)[c]()}))}abort(){return(0,i.A)(this,u)[u].abort()}addEventListener(e,t,n){return(0,i.A)(this,u)[u].addEventListener(e,t,n)}appendBuffer(e){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].appendBuffer(e)),{waitForEvent:!0})}get appendWindowEnd(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].appendWindowEnd))}set appendWindowEnd(e){(0,i.A)(this,A)[A]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,u)[u].appendWindowEnd=e))))}get appendWindowStart(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].appendWindowStart))}set appendWindowStart(e){(0,i.A)(this,A)[A]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,u)[u].appendWindowStart=e))))}get audioTracks(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].audioTracks))}get availability(){return(0,i.A)(this,A)[A]((()=>{}))}get buffered(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].buffered))}dispatchEvent(e){return(0,i.A)(this,u)[u].dispatchEvent(e)}get mode(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].mode))}set mode(e){(0,i.A)(this,A)[A]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,u)[u].mode=e))))}remove(e,t){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].remove(e,t)),{waitForEvent:!0})}removeEventListener(e,t){return(0,i.A)(this,u)[u].addEventListener(e,t)}get textTracks(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].textTracks))}get timestampOffset(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].timestampOffset))}set timestampOffset(e){(0,i.A)(this,A)[A]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,u)[u].timestampOffset=e))))}get updating(){return Boolean((0,i.A)(this,d)[d])||(0,i.A)(this,u)[u].updating}get videoTracks(){return(0,i.A)(this,A)[A]((()=>(0,i.A)(this,u)[u].videoTracks))}}function f(e,t){return new Promise(((n,r)=>{(0,i.A)(this,l)[l].push([e,(e,t)=>e?r(e):n(t),t]),(0,i.A)(this,c)[c]()}))}function v(){return p.apply(this,arguments)}function p(){return(p=(0,r.A)((function*(){if(this.updating||!(0,i.A)(this,l)[l].length)return;const[e,t,{waitForEvent:n=!1}={}]=(0,i.A)(this,l)[l].shift()||[];if(e&&t){try{(0,i.A)(this,d)[d]=[t,e()],n||t(null,yield(0,i.A)(this,d)[d][1])}catch(e){(0,i.A)(this,d)[d]=void 0,t(e)}n||((0,i.A)(this,d)[d]=void 0,(0,i.A)(this,c)[c]())}}))).apply(this,arguments)}var b=n("5g2R"),g=n("qLS0"),y=n("qJB7"),m=n("WzpB");const E=30;var w=(0,a.A)("abortController"),P=(0,a.A)("activeCues"),O=(0,a.A)("buffer"),R=(0,a.A)("buffered"),L=(0,a.A)("cleaners"),N=(0,a.A)("cues"),M=(0,a.A)("limit"),C=(0,a.A)("logger"),j=(0,a.A)("mediaSource"),k=(0,a.A)("mime"),T=(0,a.A)("url");class D extends o.Ay{constructor({limit:e=E,logger:t}={}){super(),Object.defineProperty(this,w,{writable:!0,value:new s.A}),Object.defineProperty(this,P,{writable:!0,value:[]}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:new b.A(0,0)}),Object.defineProperty(this,L,{writable:!0,value:new Set}),Object.defineProperty(this,N,{writable:!0,value:[]}),Object.defineProperty(this,M,{writable:!0,value:E}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),this.limit=e,this.logger=t,(0,i.A)(this,j)[j]=new MediaSource,(0,i.A)(this,T)[T]=URL.createObjectURL((0,i.A)(this,j)[j])}destruct(){(0,i.A)(this,L)[L].forEach((e=>e())),URL.revokeObjectURL((0,i.A)(this,T)[T])}abort(){var e;"open"===(0,i.A)(this,j)[j].readyState&&(null==(e=(0,i.A)(this,O)[O])||e.abort()),(0,i.A)(this,w)[w].abort(),(0,i.A)(this,w)[w]=new s.A}get buffered(){return(0,i.A)(this,R)[R]}set logger(e){(0,i.A)(this,C)[C]=(null==e||null==e.namespace?void 0:e.namespace("Sink"))||e}get limit(){return(0,i.A)(this,M)[M]}set limit(e){const t=(0,i.A)(this,M)[M],n=(0,i.A)(this,M)[M]=Math.max(5,e);n!==t&&this.dispatchEvent(new g.Ay(g.V5.LIMIT_CHANGED,{detail:{limit:n,previous:t}}))}get mime(){return(0,i.A)(this,k)[k]}get ready(){return"open"===(0,i.A)(this,j)[j].readyState?Promise.resolve():new Promise(((e,t)=>{const n=()=>[a(),t(new m.lc)],r=()=>[a(),e()],a=()=>{(0,i.A)(this,L)[L].delete(n),(0,i.A)(this,j)[j].removeEventListener("sourceopen",r)};(0,i.A)(this,L)[L].add(n),(0,i.A)(this,j)[j].addEventListener("sourceopen",r)}))}remove(e,t,n){var a=this;return(0,r.A)((function*(){if(!(0,i.A)(a,O)[O])return;if(void 0===t){const e=yield(0,i.A)(a,O)[O].buffered;t=e.length?e.end(0):0}if(t<=e)return;yield(0,i.A)(a,O)[O].remove(e,t);const r=(0,i.A)(a,R)[R],s=yield(0,i.A)(a,O)[O].buffered,o=(0,i.A)(a,R)[R]=new b.A(s.length?s.start(0):0,s.length?s.end(0):0);if(o.start===r.start&&o.end===r.end||a.dispatchEvent(new g.Ay(g.V5.BUFFERED_RANGE_CHANGED,{detail:{buffered:new b.A(o.start,o.end),previous:r}})),void 0!==(null==n?void 0:n.duration)&&"open"===(0,i.A)(a,j)[j].readyState){const e=n.duration,t=(0,i.A)(a,j)[j].duration;var l;Number.isNaN(e)||e===t||(null==(l=(0,i.A)(a,C)[C])||l.log("Updating duration:",e,`(was ${t})`),yield(0,i.A)(a,O)[O].availability,(0,i.A)(a,j)[j].duration=e)}null!=n&&n.endOfStream&&(yield(0,i.A)(a,O)[O].availability,(0,i.A)(a,j)[j].endOfStream())}))()}set time(e){(0,i.A)(this,N)[N].length&&((0,i.A)(this,P)[P]=(0,i.A)(this,P)[P].filter((t=>e>=t.start&&e<=t.end)),(0,i.A)(this,N)[N].forEach((t=>{!(0,i.A)(this,P)[P].includes(t)&&e>=t.start&&e<=t.end&&((0,i.A)(this,P)[P].push(t),t.onEnter())})))}get url(){return(0,i.A)(this,T)[T]}write(e){var t=this;return(0,r.A)((function*(){if(e.controller.signal.aborted)return;if(!(0,i.A)(t,O)[O]){var n;yield t.ready;const r=(0,i.A)(t,k)[k]=e.mime;null==(n=(0,i.A)(t,C)[C])||n.log("Creating a buffer for MIME type",r),(0,i.A)(t,O)[O]=new h((0,i.A)(t,j)[j].addSourceBuffer(r)),t.dispatchEvent(new g.Ay(g.V5.BUFFER_CREATED,{detail:{mime:r}}))}const{signal:a}=(0,i.A)(t,w)[w],s=(0,i.A)(t,O)[O],o=(0,i.A)(t,C)[C];let l=(0,i.A)(t,R)[R];if((0,i.A)(t,P)[P]=[],(0,i.A)(t,N)[N]=[],"open"===(0,i.A)(t,j)[j].readyState){const n=e.controller.startOffset+e.controller.duration,r=(0,i.A)(t,j)[j].duration;Number.isNaN(n)||n===r||(null==o||o.log("Updating duration:",n,`(was ${r})`),yield s.availability,(0,i.A)(t,j)[j].duration=n)}try{const t=e.frames.reduce(((e,t)=>e+t.duration),0),n=e.firstInFile&&e.metadata?Math.max(e.metadata.delays.start/e.metadata.sampling,0):0,r=l.duration?l.end-n:e.timestampOffset;if(e.container===y.Container.NONE)if(e.lastInFile)s.appendWindowEnd=(l.duration?l.end:e.timestampOffset)+t/1e3;else{const e=yield s.appendWindowEnd;Number.isFinite(e)&&(s.appendWindowEnd=1/0)}s.timestampOffset=r;const i=e.frames.filter((e=>e.duration));null==o||o.debug("Appending @ PTS",r,"\n\t",i.length,`frames (${t} ms)`,...e.frames.length!==i.length?["— discarded",e.frames.length-i.length,"frames"]:[],"\n\t",e.byteLength,"bytes @",e.offset,"\n\t",e),yield s.appendBuffer(e)}catch(n){if(n instanceof Error&&"QuotaExceededError"===n.name)return null==o||o.warn("Last append resulted in a QuotaExceededError"),new Promise(((n,s)=>{const d=()=>[u(),s(new m.lc)],u=()=>{a.removeEventListener("abort",d),(0,i.A)(t,L)[L].delete(d),(0,i.A)(t,N)[N]=[]};a.addEventListener("abort",d),(0,i.A)(t,L)[L].add(d);const A=l.end-l.duration/2;var c;(0,i.A)(t,N)[N].push({start:A,end:l.end,onEnter:(c=(0,r.A)((function*(){null==o||o.log("Entering buffering cue (QuotaExceededError)");try{yield t.remove(0,A-1),yield t.write(e)}catch(e){return void s(e)}finally{u()}n()})),function(){return c.apply(this,arguments)})})}));throw n}const d=(0,i.A)(t,R)[R],u=yield s.buffered;if(l=(0,i.A)(t,R)[R]=new b.A(u.length?u.start(0):0,u.length?u.end(0):0),null==o||o.debug(`Buffered: [${l.start.toFixed(6)}, ${l.end.toFixed(6)}]`,`(${l.duration.toFixed(6)}s)`,l.duration<(0,i.A)(t,M)[M]?`${Number((0,i.A)(t,M)[M]-l.duration).toFixed(6)}s remaining`:"✔ limit reached"),l.start===d.start&&l.end===d.end||t.dispatchEvent(new g.Ay(g.V5.BUFFERED_RANGE_CHANGED,{detail:{controller:e.controller,buffered:new b.A(l.start,l.end),previous:d}})),e.lastInFile||e.lastInRange){if(null==o||o.log("End of stream"),yield s.availability,"open"===(0,i.A)(t,j)[j].readyState)try{(0,i.A)(t,j)[j].endOfStream()}catch(e){if(!(e instanceof DOMException&&"InvalidStateError"===e.name))throw e}t.dispatchEvent(new g.Ay(g.V5.END_OF_STREAM,{detail:{controller:e.controller}}))}else if(l.duration){if(!(l.duration<(0,i.A)(t,M)[M]))return new Promise(((e,n)=>{const s=()=>[d(),n(new m.lc)],d=()=>{a.removeEventListener("abort",s),(0,i.A)(t,L)[L].delete(s),(0,i.A)(t,N)[N]=[]};a.addEventListener("abort",s),(0,i.A)(t,L)[L].add(s);const u=l.end-l.duration/2;var A;(0,i.A)(t,N)[N].push({start:u,end:l.end,onEnter:(A=(0,r.A)((function*(){null==o||o.log("Entering buffering cue");try{yield t.remove(0,u-1)}catch(e){return void n(e)}finally{d()}e()})),function(){return A.apply(this,arguments)})})}))}else null==o||o.log("Buffer still empty since the last append")}))()}}},qLS0:(e,t,n)=>{n.d(t,{Ay:()=>o,V5:()=>s});var r=n("+9dH"),i=n("mEUi"),a=function(e){return e.BUFFER_CREATED="SinkBufferCreated",e.BUFFERED_RANGE_CHANGED="SinkBufferedRangeChanged",e.END_OF_STREAM="SinkEndOfStream",e.LIMIT_CHANGED="SinkLimitChanged",e}(a||{});const s=(0,r.A)({},a);class o extends i.up{}},"L/26":(e,t,n)=>{n.d(t,{Ay:()=>yt}),n("+VTJ");var r=n("/0+J"),i=n("+9dH"),a=n("MVPB"),s=n("4OMY"),o=n("qJB7"),l=n("YaZK"),d=n("mEUi"),u=n("5g2R"),A=function(e){return e.BUFFERED_RANGE_CHANGED="TrackControllerBufferedRangeChanged",e.BUFFERING_COMPLETE_CHANGED="TrackControllerBufferingCompleteChanged",e.DURATION_CHANGED="TrackControllerDurationChanged",e.ERROR="TrackControllerError",e.METADATA_CHANGED="TrackControllerMetadataChanged",e}(A||{});const c=(0,i.A)({},A);class h extends d.up{}var f=n("iA+Z"),v=(0,s.A)("buffered"),p=(0,s.A)("bufferingComplete"),b=(0,s.A)("cleaners"),g=(0,s.A)("duration"),y=(0,s.A)("element"),m=(0,s.A)("metadata"),E=(0,s.A)("playable"),w=(0,s.A)("source"),P=(0,s.A)("sources"),O=(0,s.A)("sourcesIterator"),R=(0,s.A)("trackMapper"),L=(0,s.A)("elementListeners"),N=(0,s.A)("onDurationChange"),M=(0,s.A)("onLoadedMetadata"),C=(0,s.A)("onProgress");class j extends d.Ay{constructor(e,t,{logger:n,trackMapper:r=(e=>e)}={}){super(),Object.defineProperty(this,L,{get:k,set:void 0}),Object.defineProperty(this,v,{writable:!0,value:new u.A(0,0)}),Object.defineProperty(this,p,{writable:!0,value:!1}),Object.defineProperty(this,b,{writable:!0,value:new Set}),Object.defineProperty(this,g,{writable:!0,value:NaN}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:()=>{const e=(0,a.A)(this,g)[g],t=(0,a.A)(this,g)[g]=(0,a.A)(this,y)[y].duration;t!==e&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:t,previous:e}}))}}),Object.defineProperty(this,M,{writable:!0,value:()=>{(0,a.A)(this,m)[m]=null,this.dispatchEvent(new h(c.METADATA_CHANGED,{detail:{metadata:null,previous:void 0}}))}}),Object.defineProperty(this,C,{writable:!0,value:()=>{const e=(0,a.A)(this,y)[y].buffered,t={buffered:(0,a.A)(this,v)[v],bufferingComplete:(0,a.A)(this,p)[p]},n=(0,a.A)(this,y)[y].currentTime;if((0,a.A)(this,v)[v]=new u.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end),e.length)for(let t=0,r=e.length;t<r;t++)if(n>=e.start(t)&&n<=e.end(t)){(0,a.A)(this,v)[v]=new u.A(e.start(t),e.end(t));break}(0,a.A)(this,v)[v].start===t.buffered.start&&(0,a.A)(this,v)[v].end===t.buffered.end||this.dispatchEvent(new h(c.BUFFERED_RANGE_CHANGED,{detail:{buffered:new u.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end),previous:new u.A(t.buffered.start,t.buffered.end)}})),Math.trunc((0,a.A)(this,v)[v].end/(0,a.A)(this,g)[g]*100)>=98?(0,a.A)(this,p)[p]||((0,a.A)(this,p)[p]=!0):(0,a.A)(this,p)[p]=!1,(0,a.A)(this,p)[p]!==t.bufferingComplete&&this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:(0,a.A)(this,p)[p]}}))}}),(0,a.A)(this,y)[y]=t,(0,a.A)(this,E)[E]=e,(0,a.A)(this,R)[R]=r,this.logger=n;const[i]=e,{duration:s}=(0,a.A)(this,R)[R](i);(0,a.A)(this,g)[g]=null!=s?s:NaN,Object.entries((0,a.A)(this,L)[L]).forEach((e=>{const[t,n]=e;(0,a.A)(this,y)[y].addEventListener(t,n)}))}destruct(){(0,a.A)(this,b)[b].forEach((e=>e())),Object.entries((0,a.A)(this,L)[L]).forEach((e=>{const[t,n]=e;(0,a.A)(this,y)[y].removeEventListener(t,n)}))}abort(){}get buffered(){return new u.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end)}get bufferingComplete(){return(0,a.A)(this,p)[p]}get codec(){}get container(){}get duration(){return(0,a.A)(this,g)[g]}get element(){return(0,a.A)(this,y)[y]}load(e){var t=this;return(0,r.A)((function*(){const[,n]=(0,a.A)(t,E)[E];(0,a.A)(t,P)[P]=[...n.sources].filter((({url:e})=>e)),(0,a.A)(t,O)[O]=(0,a.A)(t,P)[P].values();const{value:r}=(0,a.A)(t,O)[O].next();if(!r)throw new Error("No suitable source");(0,a.A)(t,w)[w]=r,(0,a.A)(t,y)[y].src=r.url;const i=new Promise((e=>{const n=()=>[r(),e()],r=()=>{(0,a.A)(t,b)[b].delete(r),(0,a.A)(t,y)[y].removeEventListener("loadedmetadata",n)};(0,a.A)(t,b)[b].add(r),(0,a.A)(t,y)[y].addEventListener("loadedmetadata",n),(0,a.A)(t,y)[y].load()}));if(e&&("percent"in e&&e.percent&&e.percent>0||"time"in e&&e.time&&e.time>0)){yield i;const n=(0,a.A)(t,g)[g],r=Number.isFinite(n)?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:1})*Math.max(0,n-1):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,n-1)}):0:0;return new Promise((e=>{const n=()=>[i(),e()],i=()=>{(0,a.A)(t,b)[b].delete(i),(0,a.A)(t,y)[y].removeEventListener("seeked",n)};(0,a.A)(t,b)[b].add(i),(0,a.A)(t,y)[y].addEventListener("seeked",n),(0,a.A)(t,y)[y].currentTime=r}))}return i}))()}set logger(e){null==e||null==e.namespace||e.namespace("DirectTrackController")}get metadata(){return(0,a.A)(this,m)[m]}get playable(){return(0,a.A)(this,E)[E]}get size(){}get source(){return(0,a.A)(this,w)[w]}get sources(){return(0,a.A)(this,P)[P]}get startOffset(){return 0}set startOffset(e){}}function k(){const e={durationchange:(0,a.A)(this,N)[N],loadedmetadata:(0,a.A)(this,M)[M],progress:(0,a.A)(this,C)[C],timeupdate:(0,a.A)(this,C)[C]};return(0,a.A)(this,g)[g]===1/0&&delete e.durationchange,e}var T=n("i51G"),D=n("vxR0"),S=n("yZHM"),F=n("qLS0"),x=n("WzpB"),_=n("lKw8");function U(e){switch(e){case o.Codec.AAC:return MediaSource.isTypeSupported(_.b.AAC)?_.b.AAC:MediaSource.isTypeSupported(_.b.AAC_IN_MP4)?_.b.AAC_IN_MP4:void 0;case o.Codec.FLAC:return MediaSource.isTypeSupported(_.b.FLAC)?_.b.FLAC:function(){const e="undefined"!=typeof navigator?navigator.userAgent:"";if(!/chromium|chrome|crios|crmo/i.test(e)&&/safari/i.test(e)){const[,t]=e.match(/version\/(\d+)/i)||[];if(!t){const[,t]=e.match(/applewebkit\/(\d+)/i)||[];return Number(t)>=610}return Number(t)>=14}return!0}()?MediaSource.isTypeSupported(_.b.FLAC_IN_MP4)?_.b.FLAC_IN_MP4:MediaSource.isTypeSupported(_.b.FLAC_IN_MP4_CASE)?_.b.FLAC_IN_MP4_CASE:void 0:void 0;case o.Codec.MP3:return MediaSource.isTypeSupported(_.b.MP3)?_.b.MP3:MediaSource.isTypeSupported(_.b.MP3_IN_MP4)?_.b.MP3_IN_MP4:void 0;default:return}}function G(){return B.apply(this,arguments)}function B(){return(B=(0,r.A)((function*(...e){const{default:t}=yield Promise.resolve().then(n.bind(n,"+VTJ"));return new t(...e)}))).apply(this,arguments)}var I=(0,s.A)("abortController"),z=(0,s.A)("buffered"),H=(0,s.A)("bufferingComplete"),$=(0,s.A)("cleaners"),q=(0,s.A)("codec"),V=(0,s.A)("container"),W=(0,s.A)("duration"),Y=(0,s.A)("element"),J=(0,s.A)("metadata"),Z=(0,s.A)("pipeline"),K=(0,s.A)("playable"),Q=(0,s.A)("sink"),X=(0,s.A)("size"),ee=(0,s.A)("startOffset"),te=(0,s.A)("logger"),ne=(0,s.A)("metadataProvider"),re=(0,s.A)("pipelineProvider"),ie=(0,s.A)("requester"),ae=(0,s.A)("trackMapper"),se=(0,s.A)("estimateByteOffsetFromSeekTarget"),oe=(0,s.A)("getMetadata"),le=(0,s.A)("onBufferedRangeChanged"),de=(0,s.A)("onEndOfStream"),ue=(0,s.A)("onMetadata"),Ae=(0,s.A)("sinkListeners");class ce extends d.Ay{constructor(e,t,n,{logger:r,metadataProvider:i,pipelineProvider:s=G,requester:o,trackMapper:d=(e=>e)}={}){var A,f,v;super(),Object.defineProperty(this,Ae,{get:be,set:void 0}),Object.defineProperty(this,oe,{value:ve}),Object.defineProperty(this,se,{value:he}),this.id=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-"),Object.defineProperty(this,I,{writable:!0,value:new l.A}),Object.defineProperty(this,z,{writable:!0,value:new u.A(0,0)}),Object.defineProperty(this,H,{writable:!0,value:!1}),Object.defineProperty(this,$,{writable:!0,value:new Set}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:NaN}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:0}),Object.defineProperty(this,ee,{writable:!0,value:0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:e=>{var t;let{buffered:n,controller:r}=e.detail;const i={buffered:(0,a.A)(this,z)[z],bufferingComplete:(0,a.A)(this,H)[H],duration:(0,a.A)(this,W)[W]};r||(r={id:this.id,duration:(0,a.A)(this,W)[W]>=0?(0,a.A)(this,W)[W]:1/0,startOffset:(0,a.A)(this,ee)[ee]},n=n.duration&&n.start>=r.startOffset&&n.start<r.startOffset+r.duration?new u.A(Math.max(n.start,r.startOffset),Math.min(n.end,r.startOffset+r.duration)):new u.A(0,0)),r.id===this.id&&((0,a.A)(this,z)[z]=n.duration?new u.A(Math.max(n.start-(0,a.A)(this,ee)[ee],0),n.end-(0,a.A)(this,ee)[ee]):new u.A(0,0),(t=(0,a.A)(this,H))[H]&&(t[H]=(0,a.A)(this,z)[z].end===r.duration),(0,a.A)(this,H)[H]!==i.bufferingComplete&&this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:(0,a.A)(this,H)[H]}})),(0,a.A)(this,z)[z].start===i.buffered.start&&(0,a.A)(this,z)[z].end===i.buffered.end||this.dispatchEvent(new h(c.BUFFERED_RANGE_CHANGED,{detail:{buffered:new u.A((0,a.A)(this,z)[z].start,(0,a.A)(this,z)[z].end),previous:new u.A(i.buffered.start,i.buffered.end)}})),(0,a.A)(this,W)[W]=(0,a.A)(this,H)[H]?(0,a.A)(this,W)[W]:Math.max((0,a.A)(this,W)[W]||0,n.end-(0,a.A)(this,ee)[ee]),(0,a.A)(this,W)[W]!==i.duration&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:(0,a.A)(this,W)[W],previous:i.duration}})))}}),Object.defineProperty(this,de,{writable:!0,value:e=>{if(e.detail.controller.id!==this.id)return;const t=(0,a.A)(this,W)[W],n=(0,a.A)(this,W)[W]=(0,a.A)(this,z)[z].end;n!==t&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:n,previous:t}})),(0,a.A)(this,H)[H]=!0,this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:!0}}))}}),Object.defineProperty(this,ue,{writable:!0,value:e=>{const t=null==e?void 0:e.duration,n={duration:(0,a.A)(this,W)[W],metadata:(0,a.A)(this,J)[J],size:(0,a.A)(this,X)[X]},r=null==e?void 0:e.filesize;t!==n.duration&&void 0!==t&&((0,a.A)(this,W)[W]=t,this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:t,previous:n.duration}}))),r!==n.size&&void 0!==r&&((0,a.A)(this,X)[X]=r),e!==n.metadata&&((0,a.A)(this,J)[J]=e,this.dispatchEvent(new h(c.METADATA_CHANGED,{detail:{metadata:Object.freeze(Object.create(e)),previous:n.metadata}})))}}),(0,a.A)(this,Y)[Y]=t,(0,a.A)(this,K)[K]=e,(0,a.A)(this,Q)[Q]=n,this.logger=r,(0,a.A)(this,ne)[ne]=i,(0,a.A)(this,re)[re]=s,(0,a.A)(this,ie)[ie]=o,(0,a.A)(this,ae)[ae]=d;const[p,b]=e,{duration:g}=(0,a.A)(this,ae)[ae](p);(0,a.A)(this,q)[q]=null==(A=b.format)?void 0:A.codec,(0,a.A)(this,V)[V]=null==(f=b.format)?void 0:f.container,(0,a.A)(this,W)[W]=null!=g?g:NaN,(0,a.A)(this,X)[X]=null!=(v=b.size)?v:0,Object.entries((0,a.A)(this,Ae)[Ae]).forEach((e=>{const[t,n]=e;(0,a.A)(this,Q)[Q].addEventListener(t,n)}))}destruct(){(0,a.A)(this,I)[I].abort(),(0,a.A)(this,$)[$].forEach((e=>e())),Object.entries((0,a.A)(this,Ae)[Ae]).forEach((e=>{const[t,n]=e;(0,a.A)(this,Q)[Q].removeEventListener(t,n)}))}abort(){(0,a.A)(this,I)[I].abort(),(0,a.A)(this,I)[I]=new l.A}get buffered(){return new u.A((0,a.A)(this,z)[z].start,(0,a.A)(this,z)[z].end)}get bufferingComplete(){return(0,a.A)(this,H)[H]}get codec(){return(0,a.A)(this,q)[q]}get container(){return(0,a.A)(this,V)[V]}get duration(){return(0,a.A)(this,W)[W]}get element(){return(0,a.A)(this,Y)[Y]}load(e){var t=this;return(0,r.A)((function*(){var n;(0,a.A)(t,I)[I].abort(),(0,a.A)(t,I)[I]=new l.A;const r=(0,a.A)(t,I)[I],{signal:i}=r,s=e&&("percent"in e||"time"in e)?yield(0,a.A)(t,se)[se](e):0,o=()=>[d(),r.abort()],d=()=>{var n;(0,a.A)(t,$)[$].delete(o),i.removeEventListener("abort",d),null==e||null==(n=e.signal)||n.removeEventListener("abort",o)};if((0,a.A)(t,$)[$].add(o),i.addEventListener("abort",d),null==e||null==(n=e.signal)||n.addEventListener("abort",o),(0,a.A)(t,Z)[Z]=yield(0,a.A)(t,re)[re]({logger:(0,a.A)(t,te)[te],requester:(0,a.A)(t,ie)[ie],signal:i}),!(0,a.A)(t,q)[q]||!(0,a.A)(t,V)[V]){const{codec:e,container:n}=yield(0,a.A)(t,Z)[Z].sniff((0,a.A)(t,K)[K],{signal:i});(0,a.A)(t,q)[q]=e,(0,a.A)(t,V)[V]=n}const u=(0,a.A)(t,q)[q],A=(0,a.A)(t,V)[V],v=(0,a.A)(t,W)[W],p=(0,a.A)(t,J)[J],b={duration:v,id:t.id,signal:i,startOffset:(0,a.A)(t,ee)[ee]},g=U(u),y=Number.isFinite(v)&&e?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:1})*Math.max(0,v-1):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,v-1)}):0:0;if(Object.defineProperty(b,"duration",{get:()=>(0,a.A)(t,W)[W]}),!g)throw new Error("Could not find a suitable MIME to use.");return(yield(0,a.A)(t,Z)[Z].load((0,a.A)(t,K)[K],{codec:u,container:A,metadata:p,mime:g,offset:s,onMetadata:(0,a.A)(t,ue)[ue],signal:i})).pipeThrough(new S.Rv(new D.gW({controller:b,timestampOffset:y})),{signal:i}).pipeTo(new S.ho((0,a.A)(t,Q)[Q]),{preventAbort:!0}).catch(x.r6).catch((e=>{t.dispatchEvent(new h(c.ERROR,{detail:{error:e}}))}))}))()}set logger(e){(0,a.A)(this,te)[te]=(null==e||null==e.namespace?void 0:e.namespace("TrackController"))||e,(0,a.A)(this,Z)[Z]&&((0,a.A)(this,Z)[Z].logger=e)}get metadata(){return(0,a.A)(this,J)[J]}get playable(){return(0,a.A)(this,K)[K]}get sink(){return(0,a.A)(this,Q)[Q]}get size(){return(0,a.A)(this,X)[X]}get startOffset(){return(0,a.A)(this,ee)[ee]}set startOffset(e){(0,a.A)(this,ee)[ee]=Math.max(0,e)}}function he(e){return fe.apply(this,arguments)}function fe(){return(fe=(0,r.A)((function*(e){var t;if(!e)throw new TypeError("A seeking target must be provided");const{signal:n}=e,r=void 0===(0,a.A)(this,J)[J]?yield(0,a.A)(this,oe)[oe]({signal:n}):(0,a.A)(this,J)[J],i=(0,a.A)(this,W)[W],s=Number.isFinite(i)?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:i-1/i}):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,i-1)})/i:0:0;let o=Math.floor((0,a.A)(this,X)[X]*s);if(null!=r&&null!=(t=r.seektable)&&t.length)if(r.samples){const e=r.seektable,t=r.samples||(Number.isNaN((0,a.A)(this,W)[W])?0:(0,a.A)(this,W)[W])*r.sampling,n=Math.floor(t*s),i=e.reduce(((e,t)=>t.number>n?e:t)),l=e[e.indexOf(i)+1]||{number:t,offset:(0,a.A)(this,X)[X]},d=Math.floor((l.offset-i.offset)/(l.number-i.number)*(n-i.number));o=r.layout.reduce(((e,{size:t})=>e+t),0)+i.offset+d}else{const e=r.seektable[Math.floor(100*s)]||r.seektable[r.seektable.length-1],t=r.seektable[Math.ceil(100*s)]||{offset:(0,a.A)(this,X)[X]},n=Math.floor((t.offset-e.offset)*(100*s-Math.trunc(100*s)));o=e.offset+n}return o}))).apply(this,arguments)}function ve(e){return pe.apply(this,arguments)}function pe(){return pe=(0,r.A)((function*({signal:e}){let t=null;if((0,a.A)(this,ne)[ne])t=yield(0,a.A)(this,ne)[ne]((0,a.A)(this,K)[K],{signal:e});else{const n=yield(0,a.A)(this,re)[re]({logger:(0,a.A)(this,te)[te],requester:(0,a.A)(this,ie)[ie],signal:e});if(!(0,a.A)(this,q)[q]||!(0,a.A)(this,V)[V]){const{codec:t,container:r}=yield n.sniff((0,a.A)(this,K)[K],{signal:e});(0,a.A)(this,q)[q]=t,(0,a.A)(this,V)[V]=r}t=yield n.getMetadata((0,a.A)(this,K)[K],{codec:(0,a.A)(this,q)[q],container:(0,a.A)(this,V)[V],signal:e})}return(0,a.A)(this,ue)[ue](t||null),t})),pe.apply(this,arguments)}function be(){return{[F.V5.BUFFERED_RANGE_CHANGED]:(0,a.A)(this,le)[le],[F.V5.END_OF_STREAM]:(0,a.A)(this,de)[de]}}const ge=e=>Boolean(e),ye=e=>Boolean(e&&"sink"in e);var me=(0,s.A)("cleaners"),Ee=(0,s.A)("controller"),we=(0,s.A)("element"),Pe=(0,s.A)("sink"),Oe=(0,s.A)("sinkLimit"),Re=(0,s.A)("controllers"),Le=(0,s.A)("elements"),Ne=(0,s.A)("sinks"),Me=(0,s.A)("canUseSameSink"),Ce=(0,s.A)("canUseSinkStraightAway"),je=(0,s.A)("mutationObserver"),ke=(0,s.A)("autoplay"),Te=(0,s.A)("ended"),De=(0,s.A)("muted"),Se=(0,s.A)("mutedChanging"),Fe=(0,s.A)("next"),xe=(0,s.A)("paused"),_e=(0,s.A)("playbackRate"),Ue=(0,s.A)("playbackRateChanging"),Ge=(0,s.A)("seeking"),Be=(0,s.A)("seekPending"),Ie=(0,s.A)("volume"),ze=(0,s.A)("volumeChanging"),He=(0,s.A)("elementFactory"),$e=(0,s.A)("logger"),qe=(0,s.A)("metadataProvider"),Ve=(0,s.A)("pipelineProvider"),We=(0,s.A)("requester"),Ye=(0,s.A)("trackMapper"),Je=(0,s.A)("addElementListeners"),Ze=(0,s.A)("addTrackControllerListeners"),Ke=(0,s.A)("elementListeners"),Qe=(0,s.A)("getEmptyURL"),Xe=(0,s.A)("getPlayableState"),et=(0,s.A)("onBufferedRangeChanged"),tt=(0,s.A)("onBufferingCompleteChanged"),nt=(0,s.A)("onCanPlay"),rt=(0,s.A)("onCanPlayThrough"),it=(0,s.A)("onDurationChange"),at=(0,s.A)("onEnded"),st=(0,s.A)("onError"),ot=(0,s.A)("onMetadataChange"),lt=(0,s.A)("onPause"),dt=(0,s.A)("onPlay"),ut=(0,s.A)("onPlaying"),At=(0,s.A)("onRateChange"),ct=(0,s.A)("onSeeked"),ht=(0,s.A)("onSeeking"),ft=(0,s.A)("onTimeUpdate"),vt=(0,s.A)("onVolumeChange"),pt=(0,s.A)("removeElementListeners"),bt=(0,s.A)("removeTrackControllerListeners"),gt=(0,s.A)("trackControllerListeners");class yt extends d.Ay{constructor(...[e={}]){var t,n;super(),t=this,Object.defineProperty(this,gt,{get:Nt,set:void 0}),Object.defineProperty(this,bt,{value:Lt}),Object.defineProperty(this,pt,{value:Rt}),Object.defineProperty(this,Xe,{value:Ot}),Object.defineProperty(this,Qe,{value:Pt}),Object.defineProperty(this,Ke,{get:wt,set:void 0}),Object.defineProperty(this,Ze,{value:Et}),Object.defineProperty(this,Je,{value:mt}),this.constructor=yt,Object.defineProperty(this,me,{writable:!0,value:new Set}),Object.defineProperty(this,Ee,{writable:!0,value:void 0}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:void 0}),Object.defineProperty(this,Oe,{writable:!0,value:T.e}),Object.defineProperty(this,Re,{writable:!0,value:[]}),Object.defineProperty(this,Le,{writable:!0,value:void 0}),Object.defineProperty(this,Ne,{writable:!0,value:[]}),Object.defineProperty(this,Me,{writable:!0,value:!0}),Object.defineProperty(this,Ce,{writable:!0,value:!0}),Object.defineProperty(this,je,{writable:!0,value:new MutationObserver((e=>{e.find((e=>e.target===(0,a.A)(this,we)[we]&&"attributes"===e.type&&"autoplay"===e.attributeName))&&this.dispatchEvent(new o.RendererEvent(o.RendererEvents.AUTOPLAY_CHANGED,{detail:{autoplay:(0,a.A)(this,we)[we].autoplay}}))}))}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),Object.defineProperty(this,Te,{writable:!0,value:void 0}),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,Se,{writable:!0,value:void 0}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,_e,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),Object.defineProperty(this,Ie,{writable:!0,value:void 0}),Object.defineProperty(this,ze,{writable:!0,value:void 0}),Object.defineProperty(this,He,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,qe,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,et,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const n=e.target,r=n===(0,a.A)(this,Re)[Re][1];!r&&(0,a.A)(this,Ge)[Ge]&&"pending-playing"===this.paused&&(0,a.A)(this,we)[we].currentTime!==(0,a.A)(this,Ge)[Ge].time&&(0,a.A)(this,we)[we].readyState<HTMLMediaElement.HAVE_CURRENT_DATA&&((0,a.A)(this,we)[we].currentTime=(0,a.A)(this,Ge)[Ge].time),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.BUFFERED_RANGE_CHANGED,{detail:(0,i.A)({},e.detail,{next:r,playable:n.playable})}))}}),Object.defineProperty(this,tt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const n=e.target,{bufferingComplete:r}=e.detail;var i;n===(0,a.A)(this,Re)[Re][0]&&r&&(null==(i=(0,a.A)(this,Fe)[Fe])||i.load()),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:r,next:n===(0,a.A)(this,Re)[Re][1],playable:n.playable}}))}}),Object.defineProperty(this,nt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.CAN_PLAY))}}),Object.defineProperty(this,rt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.CAN_PLAY_THROUGH))}}),Object.defineProperty(this,it,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const n=e.target;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.DURATION_CHANGED,{detail:(0,i.A)({},e.detail,{next:n===(0,a.A)(this,Re)[Re][1],playable:n.playable})}))}}),Object.defineProperty(this,at,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,Te)[Te]!==(0,a.A)(this,we)[we].ended&&((0,a.A)(this,Te)[Te]=(0,a.A)(this,we)[we].ended,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(this,Te)[Te]}}))),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED))}}),Object.defineProperty(this,st,{writable:!0,value:(e,t)=>{var n;if((0,x.zf)(e))return;let r,i,s,l;if(null==(n=(0,a.A)(this,$e)[$e])||n.error("Received error:",e),e instanceof h){const t=e.target;r=new o.RendererError(void 0,{cause:e.detail.error}),i=t!==(0,a.A)(this,Ee)[Ee],s=t.playable}else if(e instanceof Event){const t=e.target,n=t.error,{code:l,message:d}=n;switch(l){case MediaError.MEDIA_ERR_DECODE:r=new o.DecodeError(d,{cause:n});break;case MediaError.MEDIA_ERR_NETWORK:r=new o.NetworkError(d,{cause:n});break;default:r=new o.RendererError(d,{cause:n})}const u=(0,a.A)(this,Re)[Re].find((e=>(null==e?void 0:e.element)===t));i=u!==(0,a.A)(this,Ee)[Ee],s=null==u?void 0:u.playable}else r=new o.RendererError(e.message,{cause:e}),i=t.loadOptions&&"next"in t.loadOptions&&t.loadOptions.next||!1,s=t.playable,l=t.loadOptions&&("percent"in t.loadOptions||"time"in t.loadOptions)?t.loadOptions:void 0;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ERROR,{detail:{error:r,next:i,playable:s,seekTarget:l}}))}}),Object.defineProperty(this,ot,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const n=e.target;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.METADATA_CHANGED,{detail:(0,i.A)({},e.detail,{next:n===(0,a.A)(this,Re)[Re][1],playable:n.playable})}))}}),Object.defineProperty(this,lt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,xe)[xe]=!0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:!0}}))}}),Object.defineProperty(this,dt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,xe)[xe]=o.PENDING_PLAYING,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:o.PENDING_PLAYING}}))}}),Object.defineProperty(this,ut,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,xe)[xe]=!1,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:!1}}))}}),Object.defineProperty(this,At,{writable:!0,value:e=>{var t;if(null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),!(0,a.A)(this,Ue)[Ue]&&(0,a.A)(this,we)[we].defaultPlaybackRate===(0,a.A)(this,we)[we].playbackRate&&(0,a.A)(this,we)[we].playbackRate===(0,a.A)(this,_e)[_e])return;const n=(0,a.A)(this,we)[we].playbackRate,r=(0,a.A)(this,_e)[_e];if(!(0,a.A)(this,Ue)[Ue]){const e=(0,f.A)(n,{min:.25,max:4,default:r});if(e!==n)return void(this.playbackRate=e)}(0,a.A)(this,we)[we].defaultPlaybackRate=n,(0,a.A)(this,_e)[_e]=n,(0,a.A)(this,Ue)[Ue]=void 0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PLAYBACK_RATE_CHANGED,{detail:{playbackRate:n,previous:r}}))}}),Object.defineProperty(this,ct,{writable:!0,value:e=>{var t,n;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),null==(n=(0,a.A)(this,Ge)[Ge])||n.resolve(),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.SEEKED))}}),Object.defineProperty(this,ht,{writable:!0,value:(n=(0,r.A)((function*(e){var n,r,s,l;null==(n=(0,a.A)(t,$e)[$e])||n.debug("Received event:",e.type),t.dispatchEvent(new o.RendererEvent(o.RendererEvents.SEEKING)),(0,a.A)(t,Te)[Te]!==(0,a.A)(t,we)[we].ended&&((0,a.A)(t,Te)[Te]=(0,a.A)(t,we)[we].ended,t.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(t,Te)[Te]}})));const{signal:d}=(null==(r=(0,a.A)(t,Ge)[Ge])?void 0:r.controller)||{},u=(0,a.A)(t,Ee)[Ee],A=null!=(s=null==(l=(0,a.A)(t,Ge)[Ge])?void 0:l.time)?s:Math.max(u.startOffset||0,(0,a.A)(t,we)[we].currentTime-(u.startOffset||0));var c;if(null!=d&&d.aborted||(0,a.A)(t,Be)[Be])null==(c=(0,a.A)(t,Ge)[Ge])||c.reject(new x.lc);else if(!(u.buffered.duration&&u.buffered.start<=A&&u.buffered.end>=A)){var h,f,v,p;u.abort(),null==(h=(0,a.A)(t,Pe)[Pe])||h.abort(),yield null==(f=(0,a.A)(t,Pe)[Pe])?void 0:f.remove(0),null==(v=(0,a.A)(t,Ne)[Ne][1])||v.destruct(),(0,a.A)(t,Ne)[Ne]=(0,a.A)(t,Pe)[Pe]?[(0,a.A)(t,Pe)[Pe]]:[],(0,a.A)(t,Le)[Le]=[(0,a.A)(t,we)[we]];const e=(0,a.A)(t,Re)[Re][1];var b;if(null==(p=(0,a.A)(t,Re)[Re][1])||p.destruct(),(0,a.A)(t,Re)[Re]=[u],(0,a.A)(t,Fe)[Fe]&&e&&((0,a.A)(t,Fe)[Fe].loaded=!1,t.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:(0,a.A)(t,Fe)[Fe].playable}}))),null!=d&&d.aborted||(0,a.A)(t,Be)[Be])return void(null==(b=(0,a.A)(t,Ge)[Ge])||b.reject(new x.lc));if(u.startOffset){const e=u.startOffset;return u.startOffset=0,(0,a.A)(t,Ge)[Ge]=(0,a.A)(t,Ge)[Ge]?(0,i.A)({},(0,a.A)(t,Ge)[Ge],{time:A-e}):void 0,void((0,a.A)(t,we)[we].currentTime=A-e)}if(ye(u)){const e={signal:d,time:A};u.load(e).catch((n=>(0,a.A)(t,st)[st](n,{loadOptions:e,playable:u.playable})))}}})),function(e){return n.apply(this,arguments)})}),Object.defineProperty(this,ft,{writable:!0,value:()=>{var e,t;const n=(0,a.A)(this,we)[we].currentTime;(0,a.A)(this,Pe)[Pe]&&((0,a.A)(this,Pe)[Pe].time=n),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.TIME_CHANGED,{detail:{time:n-((null==(e=(0,a.A)(this,Ee)[Ee])?void 0:e.startOffset)||0)}})),(0,a.A)(this,Fe)[Fe]&&null!=(t=(0,a.A)(this,Ee)[Ee])&&t.bufferingComplete&&n>=Number(((0,a.A)(this,Ee)[Ee].startOffset+(0,a.A)(this,Ee)[Ee].buffered.end).toFixed(6))&&(this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED)),this.load((0,a.A)(this,Fe)[Fe].playable,(0,i.A)({},(0,a.A)(this,Fe)[Fe].options,{next:!1})))}}),Object.defineProperty(this,vt,{writable:!0,value:e=>{var t;if(null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),void 0!==(0,a.A)(this,Se)[Se]||(0,a.A)(this,De)[De]!==(0,a.A)(this,we)[we].muted)return(0,a.A)(this,De)[De]=(0,a.A)(this,we)[we].muted,(0,a.A)(this,Se)[Se]=void 0,void this.dispatchEvent(new o.RendererEvent(o.RendererEvents.MUTED_CHANGED,{detail:{muted:(0,a.A)(this,De)[De]}}));if(void 0!==(0,a.A)(this,ze)[ze]||(0,a.A)(this,Ie)[Ie]!==(0,a.A)(this,we)[we].volume){const e=(0,a.A)(this,Ie)[Ie];(0,a.A)(this,Ie)[Ie]=(0,a.A)(this,we)[we].volume,(0,a.A)(this,ze)[ze]=void 0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.VOLUME_CHANGED,{detail:{previous:e,volume:(0,a.A)(this,Ie)[Ie]}}))}}});const{autoplay:s,canUseSameSink:l,canUseSinkStraightAway:d,elementFactory:u=(()=>new Audio),logger:A,metadataProvider:c,muted:v,pipelineProvider:p,playbackRate:b,requester:g,sinkLimit:y,trackMapper:m=(e=>e),volume:E}=e;this.logger=A,(0,a.A)(this,He)[He]=u,(0,a.A)(this,qe)[qe]=c,(0,a.A)(this,Ve)[Ve]=p,(0,a.A)(this,We)[We]=g,(0,a.A)(this,Ye)[Ye]=m,(0,a.A)(this,we)[we]=(0,a.A)(this,He)[He](),(0,a.A)(this,Le)[Le]=[(0,a.A)(this,we)[we]],(0,a.A)(this,ke)[ke]=(0,a.A)(this,we)[we].autoplay,(0,a.A)(this,Te)[Te]=(0,a.A)(this,we)[we].ended,(0,a.A)(this,De)[De]=(0,a.A)(this,we)[we].muted,(0,a.A)(this,xe)[xe]=(0,a.A)(this,we)[we].paused,(0,a.A)(this,_e)[_e]=(0,a.A)(this,we)[we].playbackRate,(0,a.A)(this,Ie)[Ie]=(0,a.A)(this,we)[we].volume,(0,a.A)(this,Je)[Je]((0,a.A)(this,we)[we]),(0,a.A)(this,je)[je].observe((0,a.A)(this,we)[we],{attributes:!0}),void 0!==d&&((0,a.A)(this,Ce)[Ce]=d),void 0!==s&&(this.autoplay=s),void 0!==l&&(this.canUseSameSink=l),void 0!==v&&(this.muted=v),void 0!==b&&(this.playbackRate=b),void 0!==y&&(this.sinkLimit=y),void 0!==E&&(this.volume=E)}destruct(){var e=this;return(0,r.A)((function*(){var t,n,r,i,s;const l={current:null==(t=(0,a.A)(e,Re)[Re][0])?void 0:t.playable,next:null==(n=(0,a.A)(e,Re)[Re][1])?void 0:n.playable};null==(r=(0,a.A)(e,Fe)[Fe])||r.abort(),null==(i=(0,a.A)(e,Ge)[Ge])||i.reject(new x.lc),null==(s=(0,a.A)(e,Be)[Be])||s.reject(new x.lc),(0,a.A)(e,Pe)[Pe]=void 0,(0,a.A)(e,Ne)[Ne].forEach((e=>null==e?void 0:e.destruct())),(0,a.A)(e,Ne)[Ne]=[],(0,a.A)(e,Le)[Le].filter(ge).forEach((t=>t.src=(0,a.A)(e,Qe)[Qe]())),(0,a.A)(e,Le)[Le]=[(0,a.A)(e,we)[we]],(0,a.A)(e,pt)[pt]((0,a.A)(e,we)[we]),(0,a.A)(e,Ee)[Ee]=void 0,(0,a.A)(e,Re)[Re].filter(ge).forEach((t=>[t.destruct(),(0,a.A)(e,bt)[bt](t)])),(0,a.A)(e,Re)[Re]=[],l.current&&e.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:[],previous:l.current}})),l.next&&e.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:l.next}})),(0,a.A)(e,Se)[Se]=void 0,(0,a.A)(e,Fe)[Fe]=void 0,(0,a.A)(e,Ue)[Ue]=void 0,(0,a.A)(e,Ge)[Ge]=void 0,(0,a.A)(e,Be)[Be]=void 0,(0,a.A)(e,ze)[ze]=void 0}))()}get autoplay(){return(0,a.A)(this,ke)[ke]}set autoplay(e){(0,a.A)(this,we)[we].autoplay=(0,a.A)(this,ke)[ke]=Boolean(e)}get buffered(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.buffered}get bufferingComplete(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.bufferingComplete}get canUseSameSink(){return(0,a.A)(this,Me)[Me]}set canUseSameSink(e){const[t,n]=(0,a.A)(this,Re)[Re],r=(0,a.A)(this,Me)[Me];(0,a.A)(this,Me)[Me]=Boolean(e),(0,a.A)(this,Me)[Me]!==r&&(0,a.A)(this,Fe)[Fe]&&ye(t)&&ye(n)&&(!(0,a.A)(this,Me)[Me]&&t.sink===n.sink||(0,a.A)(this,Me)[Me]&&t.sink!==n.sink)&&(0,a.A)(this,Fe)[Fe].load()}get canUseSinkStraightAway(){return(0,a.A)(this,Ce)[Ce]}get current(){return(0,a.A)(this,Ee)[Ee]?[(0,a.A)(this,Ee)[Ee].playable,(0,a.A)(this,Xe)[Xe]((0,a.A)(this,Ee)[Ee])]:[]}get duration(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.duration}get element(){return(0,a.A)(this,we)[we]}get ended(){return(0,a.A)(this,Te)[Te]}load(e,t={}){var n=this;return(0,r.A)((function*(){var r,s,l,d,u;const[,A]=e,{signal:c}=t,h=!A||!("usePipeline"in A)||Boolean(A.usePipeline),f="force"in t&&t.force||!1,v={current:null==(r=(0,a.A)(n,Re)[Re][0])?void 0:r.playable,next:null==(s=(0,a.A)(n,Re)[Re][1])?void 0:s.playable},p="next"in t&&t.next||!1,b=r=>(0,a.A)(n,st)[st](r,{loadOptions:t,playable:e}),g="percent"in t&&t.percent&&t.percent>0?{percent:t.percent,signal:c}:"time"in t&&t.time&&t.time>0?{time:t.time,signal:c}:c?{signal:c}:void 0;if((p||e.length||(0,a.A)(n,Re)[Re][0])&&(!p||e.length||(0,a.A)(n,Re)[Re][1]||(0,a.A)(n,Fe)[Fe])&&(f||p||e!==v.current)&&(f||!p||e!==v.next)&&(f||!p||e!==(null==(l=(0,a.A)(n,Fe)[Fe])?void 0:l.playable))){var y;if(n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADING,{detail:{next:p,playable:e}})),p&&e.length&&(null==(d=(0,a.A)(n,Ee)[Ee])||!d.bufferingComplete))return null==(y=(0,a.A)(n,$e)[$e])||y.log("Deferring the load of:",e),new Promise(((r,s)=>{var o;null==(o=(0,a.A)(n,Fe)[Fe])||o.abort();const l=()=>[d(),s(new x.lc)],d=()=>{null==c||c.removeEventListener("abort",l),(0,a.A)(n,Fe)[Fe]=void 0};null==c||c.addEventListener("abort",l),(0,a.A)(n,Fe)[Fe]={abort:l,clean:d,load:()=>r(n.load(e,(0,i.A)({},t,{force:!0}))),loaded:!1,options:t,playable:e}}));if(null==(u=(0,a.A)(n,$e)[$e])||u.log(p?"Loading next:":"Loading:",e.length?e:void 0),p){var m,E;const t=(0,a.A)(n,Re)[Re][1];var w,P,O,R;if(t)(0,a.A)(n,bt)[bt](t),ye(t)&&(0,a.A)(n,Pe)[Pe]===t.sink&&t.buffered.duration&&(yield(0,a.A)(n,Pe)[Pe].remove(t.startOffset+t.buffered.start,void 0,{duration:((null==(w=(0,a.A)(n,Ee)[Ee])?void 0:w.startOffset)||0)+((null==(P=(0,a.A)(n,Ee)[Ee])?void 0:P.duration)||0),endOfStream:(null==(O=(0,a.A)(n,Ee)[Ee])?void 0:O.bufferingComplete)||!1})),t.destruct(),(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee]];null==(m=(0,a.A)(n,Ne)[Ne][1])||m.destruct(),(0,a.A)(n,Ne)[Ne]=(0,a.A)(n,Pe)[Pe]?[(0,a.A)(n,Pe)[Pe]]:[],(0,a.A)(n,Le)[Le]=[(0,a.A)(n,we)[we]],e!==(null==(E=(0,a.A)(n,Fe)[Fe])?void 0:E.playable)&&(null==(R=(0,a.A)(n,Fe)[Fe])||R.abort())}else if(!p&&e!==v.next){var L,N;(0,a.A)(n,me)[me].forEach((e=>e())),null==(L=(0,a.A)(n,Ge)[Ge])||L.reject(new x.lc),null==(N=(0,a.A)(n,Be)[Be])||N.reject(new x.lc),(0,a.A)(n,Pe)[Pe]=void 0,(0,a.A)(n,Ne)[Ne].forEach((e=>null==e?void 0:e.destruct())),(0,a.A)(n,Ne)[Ne]=[],(0,a.A)(n,Le)[Le].filter(ge).forEach((e=>e.src=(0,a.A)(n,Qe)[Qe]())),(0,a.A)(n,Le)[Le]=[(0,a.A)(n,we)[we]],(0,a.A)(n,Ee)[Ee]=void 0,(0,a.A)(n,Re)[Re].filter(ge).forEach((e=>[e.destruct(),(0,a.A)(n,bt)[bt](e)])),(0,a.A)(n,Re)[Re]=[],(0,a.A)(n,Te)[Te]!==(0,a.A)(n,we)[we].ended&&((0,a.A)(n,Te)[Te]=(0,a.A)(n,we)[we].ended,n.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(n,Te)[Te]}}))),(0,a.A)(n,Fe)[Fe]&&((0,a.A)(n,Fe)[Fe].loaded=!1)}if(e.length&&A)if(p){if(h){var M;const t=U(null==(M=A.format)?void 0:M.codec);if((0,a.A)(n,Me)[Me]&&(0,a.A)(n,Pe)[Pe]&&(0,a.A)(n,Pe)[Pe].mime===t){var C,k,D;null==(C=(0,a.A)(n,$e)[$e])||C.log(`\tCan use the same sink (${(0,a.A)(n,Pe)[Pe].mime})`);const t=new ce(e,(0,a.A)(n,we)[we],(0,a.A)(n,Pe)[Pe],{logger:(0,a.A)(n,$e)[$e],metadataProvider:(0,a.A)(n,qe)[qe],pipelineProvider:(0,a.A)(n,Ve)[Ve],requester:(0,a.A)(n,We)[We],trackMapper:(0,a.A)(n,Ye)[Ye]});(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee],t],(0,a.A)(n,Ze)[Ze](t),t.startOffset=((null==(k=(0,a.A)(n,Ee)[Ee])?void 0:k.startOffset)||0)+((null==(D=(0,a.A)(n,Ee)[Ee])?void 0:D.duration)||0),t.load(g).catch(b)}else{var S;null==(S=(0,a.A)(n,$e)[$e])||S.log((0,a.A)(n,Pe)[Pe]?`\tNeed a new sink (${t}, current sink is for ${(0,a.A)(n,Pe)[Pe].mime}${t!==(0,a.A)(n,Pe)[Pe].mime||(0,a.A)(n,Me)[Me]?"":" but `canUseSameSink` is `false`"})`:`\tNeed a new sink (${t})`);const r=new T.A({limit:(0,a.A)(n,Oe)[Oe],logger:(0,a.A)(n,$e)[$e]});(0,a.A)(n,Ne)[Ne]=[(0,a.A)(n,Pe)[Pe],r];const i=(0,a.A)(n,He)[He]();(0,a.A)(n,Le)[Le]=[(0,a.A)(n,we)[we],i],(0,a.A)(n,Ce)[Ce]&&(i.src=r.url);const s=new ce(e,i,r,{logger:(0,a.A)(n,$e)[$e],metadataProvider:(0,a.A)(n,qe)[qe],pipelineProvider:(0,a.A)(n,Ve)[Ve],requester:(0,a.A)(n,We)[We],trackMapper:(0,a.A)(n,Ye)[Ye]});(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee],s],(0,a.A)(n,Ze)[Ze](s),s.load(g).catch(b)}}else{var F;null==(F=(0,a.A)(n,$e)[$e])||F.log("\tCannot use the pipeline, creating a DirectTrackController");const t=(0,a.A)(n,He)[He]();(0,a.A)(n,Le)[Le]=[(0,a.A)(n,we)[we],t];const r=new j(e,t,{logger:(0,a.A)(n,$e)[$e],trackMapper:(0,a.A)(n,Ye)[Ye]});(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee],r],(0,a.A)(n,Ze)[Ze](r),r.load(g).catch(b)}if(!(0,a.A)(n,Fe)[Fe]){const r=()=>{null==c||c.removeEventListener("abort",r),(0,a.A)(n,Fe)[Fe]=void 0};(0,a.A)(n,Fe)[Fe]={abort:r,clean:r,load:()=>n.load(e,(0,i.A)({},t,{force:!0})),loaded:!0,options:t,playable:e},null==c||c.addEventListener("abort",r)}n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:p,playable:e,previous:v.next}}))}else{if(!p&&e===v.next&&(0,a.A)(n,Re)[Re][1]){var _,G;if(null==(_=(0,a.A)(n,$e)[$e])||_.log("\tSwapping to next"),(0,a.A)(n,Ne)[Ne].length>1){const[e,t]=(0,a.A)(n,Ne)[Ne];null==e||e.destruct(),(0,a.A)(n,Pe)[Pe]=t,(0,a.A)(n,Ne)[Ne]=[t]}else if(!ye((0,a.A)(n,Re)[Re][1])){const[e]=(0,a.A)(n,Ne)[Ne];null==e||e.destruct(),(0,a.A)(n,Pe)[Pe]=void 0,(0,a.A)(n,Ne)[Ne]=[]}if((0,a.A)(n,Le)[Le].length>1){var B,I;const[e,t]=(0,a.A)(n,Le)[Le],r=!e.paused||e.ended;(0,a.A)(n,pt)[pt](e),(0,a.A)(n,we)[we].src=(0,a.A)(n,Qe)[Qe](),(0,a.A)(n,we)[we]=t,(0,a.A)(n,Le)[Le]=[t],(0,a.A)(n,we)[we].autoplay=n.autoplay,(0,a.A)(n,we)[we].muted=n.muted,(0,a.A)(n,we)[we].playbackRate=n.playbackRate,(B=(0,a.A)(n,we)[we]).src||(B.src=(null==(I=(0,a.A)(n,Pe)[Pe])?void 0:I.url)||""),(0,a.A)(n,we)[we].volume=n.volume,(0,a.A)(n,Je)[Je](t),(0,a.A)(n,je)[je].disconnect(),(0,a.A)(n,je)[je].observe((0,a.A)(n,we)[we],{attributes:!0}),r&&(0,a.A)(n,we)[we].play(),n.dispatchEvent(new o.RendererEvent(o.RendererEvents.ELEMENT_CHANGED,{detail:{element:t,previous:e}}))}const[t,r]=(0,a.A)(n,Re)[Re];return t.destruct(),(0,a.A)(n,bt)[bt](t),(0,a.A)(n,Ee)[Ee]=r,(0,a.A)(n,Re)[Re]=[r],null==(G=(0,a.A)(n,Fe)[Fe])||G.clean(),n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:t.playable}})),n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:r.playable}})),void((0,a.A)(n,we)[we].currentTime<Number((0,a.A)(n,Ee)[Ee].startOffset.toFixed(6))?(0,a.A)(n,we)[we].currentTime=(0,a.A)(n,Ee)[Ee].startOffset:n.dispatchEvent(new o.RendererEvent(o.RendererEvents.TIME_CHANGED,{detail:{time:0}})))}var z,H,$;h?(null==(z=(0,a.A)(n,$e)[$e])||z.log("\tCreating a new sink"),(0,a.A)(n,Pe)[Pe]=new T.A({limit:(0,a.A)(n,Oe)[Oe],logger:(0,a.A)(n,$e)[$e]}),(0,a.A)(n,Ne)[Ne]=[(0,a.A)(n,Pe)[Pe]],(0,a.A)(n,we)[we].src=(0,a.A)(n,Pe)[Pe].url,(0,a.A)(n,Ee)[Ee]=new ce(e,(0,a.A)(n,we)[we],(0,a.A)(n,Pe)[Pe],{logger:(0,a.A)(n,$e)[$e],metadataProvider:(0,a.A)(n,qe)[qe],pipelineProvider:(0,a.A)(n,Ve)[Ve],requester:(0,a.A)(n,We)[We],trackMapper:(0,a.A)(n,Ye)[Ye]}),(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee]],(0,a.A)(n,Ze)[Ze]((0,a.A)(n,Ee)[Ee]),(0,a.A)(n,Ee)[Ee].load(g).catch(b),g&&("percent"in g||"time"in g)&&n.seek(g)):(null==(H=(0,a.A)(n,$e)[$e])||H.log("\tCannot use the pipeline, creating a DirectTrackController"),null==($=(0,a.A)(n,Pe)[Pe])||$.destruct(),(0,a.A)(n,Pe)[Pe]=void 0,(0,a.A)(n,Ee)[Ee]=new j(e,(0,a.A)(n,we)[we],{logger:(0,a.A)(n,$e)[$e],trackMapper:(0,a.A)(n,Ye)[Ye]}),(0,a.A)(n,Re)[Re]=[(0,a.A)(n,Ee)[Ee]],(0,a.A)(n,Ze)[Ze]((0,a.A)(n,Ee)[Ee]),(0,a.A)(n,Ee)[Ee].load(g).catch(b),g&&("percent"in g||"time"in g)&&n.seek(g)),n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:v.current||[]}})),v.next&&n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:v.next}}))}else p?n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:p,playable:e,previous:v.next}})):(n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:v.current}})),v.next&&n.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:v.next}})))}}))()}set logger(e){(0,a.A)(this,$e)[$e]=(null==e||null==e.namespace?void 0:e.namespace("HTML5Renderer"))||e,(0,a.A)(this,Re)[Re].filter(ge).forEach((t=>t.logger=e)),(0,a.A)(this,Ne)[Ne].filter(ge).forEach((t=>t.logger=e))}get metadata(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.metadata}get muted(){var e;return null!=(e=(0,a.A)(this,Se)[Se])?e:(0,a.A)(this,De)[De]}set muted(e){(0,a.A)(this,we)[we].muted=(0,a.A)(this,Se)[Se]=Boolean(e)}get next(){return(0,a.A)(this,Re)[Re][1]?[(0,a.A)(this,Re)[Re][1].playable,(0,a.A)(this,Xe)[Xe]((0,a.A)(this,Re)[Re][1])]:(0,a.A)(this,Fe)[Fe]?[(0,a.A)(this,Fe)[Fe].playable,o.DEFAULT_PLAYABLE_STATE]:[]}pause({signal:e}={}){return!0===(0,a.A)(this,xe)[xe]?Promise.resolve():((0,a.A)(this,xe)[xe]!==o.PENDING_PAUSED&&((0,a.A)(this,xe)[xe]=o.PENDING_PAUSED,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:o.PENDING_PAUSED}}))),new Promise(((t,n)=>{if((0,a.A)(this,we)[we].paused)return void t();const r=()=>[s(),n(new x.lc)],i=()=>[s(),t()],s=()=>{null==e||e.removeEventListener("abort",r),(0,a.A)(this,me)[me].delete(r),(0,a.A)(this,we)[we].removeEventListener("pause",i)};null==e||e.addEventListener("abort",r),(0,a.A)(this,me)[me].add(r),(0,a.A)(this,we)[we].addEventListener("pause",i),(0,a.A)(this,we)[we].pause()})))}get paused(){return(0,a.A)(this,xe)[xe]}get percent(){var e,t;return((0,a.A)(this,we)[we].currentTime-((null==(e=(0,a.A)(this,Ee)[Ee])?void 0:e.startOffset)||0))/((null==(t=(0,a.A)(this,Ee)[Ee])?void 0:t.duration)||1/0)}set percent(e){this.seek({percent:e})}play({signal:e}={}){var t=this;return(0,r.A)((function*(){return(0,a.A)(t,Ee)[Ee]?(!ye((0,a.A)(t,Ee)[Ee])&&(0,a.A)(t,we)[we].src.startsWith("blob")&&(yield(0,a.A)(t,Ee)[Ee].load({signal:e})),(0,a.A)(t,Te)[Te]&&(yield t.seek({signal:e,time:0})),new Promise(((n,r)=>{const i=()=>[o(),(0,a.A)(t,we)[we].pause(),r(new x.lc)],s=()=>[o(),n()],o=()=>{null==e||e.removeEventListener("abort",i),(0,a.A)(t,me)[me].delete(i),(0,a.A)(t,we)[we].removeEventListener("playing",s)};null==e||e.addEventListener("abort",i),(0,a.A)(t,me)[me].add(i),(0,a.A)(t,we)[we].addEventListener("playing",s);const l=(0,a.A)(t,we)[we].play();l&&l.catch(x.r6)}))):Promise.resolve()}))()}get playbackRate(){var e;return null!=(e=(0,a.A)(this,Ue)[Ue])?e:(0,a.A)(this,_e)[_e]}set playbackRate(e){(0,a.A)(this,we)[we].playbackRate=(0,a.A)(this,we)[we].defaultPlaybackRate=(0,a.A)(this,Ue)[Ue]=(0,f.A)(e,{min:.25,max:4,default:(0,a.A)(this,we)[we].playbackRate})}get ready(){return Promise.resolve()}seek(e){var t=this;return(0,r.A)((function*(){var n,r,i;if(!("percent"in e)&&!("time"in e))throw new TypeError("A seeking target must be provided");const s=null==(n=(0,a.A)(t,Ee)[Ee])?void 0:n.duration;if(!Number.isFinite(s)&&!Number.isNaN(s))throw new Error("Cannot seek.");const o=((null==(r=(0,a.A)(t,Ee)[Ee])?void 0:r.startOffset)||0)+("percent"in e?(0,f.A)(e.percent||0,{max:1})*Math.max(0,(s||0)-1):"time"in e?(0,f.A)(e.time||0,{max:Math.max(0,(s||1/0)-1)}):0);if(null==(i=(0,a.A)(t,Be)[Be])||i.reject(new x.lc),(0,a.A)(t,Ge)[Ge])try{yield new Promise(((e,n)=>{var r;null==(r=(0,a.A)(t,Ge)[Ge])||r.controller.abort(),(0,a.A)(t,Be)[Be]={reject:n,resolve:e,time:o}}))}catch(e){if((0,x.zf)(e))return;throw e}return new Promise(((n,r)=>{var i,s;const d=new l.A,u=()=>{const e=(0,a.A)(t,Be)[Be];d.abort(),c(),r(new x.lc),null==e||e.resolve()},A=()=>{const e=(0,a.A)(t,Be)[Be];c(),n(),null==e||e.resolve()},c=()=>{var n;null==(n=e.signal)||n.removeEventListener("abort",u),(0,a.A)(t,Ge)[Ge]=void 0,(0,a.A)(t,Be)[Be]=void 0};null==(i=e.signal)||i.addEventListener("abort",u),(0,a.A)(t,Ge)[Ge]={controller:d,reject:e=>(0,x.zf)(e)?A():r(e),resolve:A,time:o},(0,a.A)(t,Be)[Be]=void 0,null==(s=(0,a.A)(t,$e)[$e])||s.log("Seeking to",{time:o}),(0,a.A)(t,we)[we].currentTime=o}))}))()}get seeking(){return(0,a.A)(this,we)[we].seeking}get sinkLimit(){return(0,a.A)(this,Oe)[Oe]}set sinkLimit(e){(0,a.A)(this,Oe)[Oe]=(0,f.A)(e,{min:5,default:T.e}),(0,a.A)(this,Ne)[Ne].filter(ge).forEach((e=>e.limit=(0,a.A)(this,Oe)[Oe]))}stop(e){var t=this;return(0,r.A)((function*(){(0,a.A)(t,me)[me].forEach((e=>e())),yield t.pause(e),!(0,a.A)(t,Ee)[Ee]||ye((0,a.A)(t,Ee)[Ee])||(0,a.A)(t,we)[we].src.startsWith("blob")||((0,a.A)(t,we)[we].src=(0,a.A)(t,Qe)[Qe]())}))()}get time(){var e;return(0,a.A)(this,we)[we].currentTime-((null==(e=(0,a.A)(this,Ee)[Ee])?void 0:e.startOffset)||0)}set time(e){this.seek({time:e})}get volume(){var e;return null!=(e=(0,a.A)(this,ze)[ze])?e:(0,a.A)(this,Ie)[Ie]}set volume(e){(0,a.A)(this,we)[we].volume=(0,a.A)(this,ze)[ze]=(0,f.A)(e,{max:1,default:(0,a.A)(this,we)[we].volume})}}function mt(e){Object.entries((0,a.A)(this,Ke)[Ke]).forEach((t=>{const[n,r]=t;e.addEventListener(n,r)}))}function Et(e){Object.entries((0,a.A)(this,gt)[gt]).forEach((t=>{const[n,r]=t;e.addEventListener(n,r)}))}function wt(){return{canplay:(0,a.A)(this,nt)[nt],canplaythrough:(0,a.A)(this,rt)[rt],ended:(0,a.A)(this,at)[at],error:(0,a.A)(this,st)[st],pause:(0,a.A)(this,lt)[lt],play:(0,a.A)(this,dt)[dt],playing:(0,a.A)(this,ut)[ut],ratechange:(0,a.A)(this,At)[At],seeked:(0,a.A)(this,ct)[ct],seeking:(0,a.A)(this,ht)[ht],timeupdate:(0,a.A)(this,ft)[ft],volumechange:(0,a.A)(this,vt)[vt]}}function Pt(){const e=new MediaSource,t=URL.createObjectURL(e);return e.addEventListener("sourceopen",(function n(){URL.revokeObjectURL(t),e.removeEventListener("sourceopen",n)})),t}function Ot(e){const{buffered:t,bufferingComplete:n,duration:r,metadata:i}=e;return{buffered:new u.A(t.start,t.end),bufferingComplete:n,duration:r,loaded:!0,metadata:i}}function Rt(e){(0,a.A)(this,me)[me].forEach((e=>e())),Object.entries((0,a.A)(this,Ke)[Ke]).forEach((t=>{const[n,r]=t;e.removeEventListener(n,r)}))}function Lt(e){Object.entries((0,a.A)(this,gt)[gt]).forEach((t=>{const[n,r]=t;e.removeEventListener(n,r)}))}function Nt(){return{[c.BUFFERED_RANGE_CHANGED]:(0,a.A)(this,et)[et],[c.BUFFERING_COMPLETE_CHANGED]:(0,a.A)(this,tt)[tt],[c.DURATION_CHANGED]:(0,a.A)(this,it)[it],[c.ERROR]:(0,a.A)(this,st)[st],[c.METADATA_CHANGED]:(0,a.A)(this,ot)[ot]}}yt.NAME="HTML5Renderer",yt.VERSION="0.14.19"},"+VTJ":(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_CHUNK_SIZE_FLAC:()=>A,DEFAULT_CHUNK_SIZE_SECONDS:()=>c,DEFAULT_DELAY:()=>D,DEFAULT_RETRIES:()=>S,DEFAULT_TIMEOUT:()=>F,MuxerTransformer:()=>w,ParserTransformer:()=>C,copyFrame:()=>h,default:()=>J,getChunkSizeForFormat:()=>f,getMuxer:()=>v,getParser:()=>b,requester:()=>_});var r=n("Nlia"),i=n("/0+J"),a=n("MVPB"),s=n("4OMY"),o=n("vxR0"),l=n("+9dH"),d=n("i51G"),u=n("qJB7");const A=1048576,c=d.e/2;function h(e,t={}){return Object.assign(Object.create(Object.getPrototypeOf(e)||e),(0,l.A)({},e,t))}function f(e,{default:t=o.WI,FLAC:n=A,seconds:r=c}={}){return(null==e?void 0:e.codec)===u.Codec.FLAC?n:null!=e&&e.bitrate?1e3*e.bitrate/8*r:t}function v(e){return p.apply(this,arguments)}function p(){return(p=(0,i.A)((function*(e){switch(e){case u.Container.MKV:throw new Error("Muxing to MKV is not supported yet");case u.Container.MP4:{const{default:e}=yield n.e(9312).then(n.bind(n,"/CUu"));return e}case u.Container.NONE:throw new Error("Muxing to RAW is a no-op");case u.Container.UNKNOWN:throw new Error("Cannot mux to unknown container");default:throw new Error(`Could not find a muxer for ${e}.`)}}))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=(0,i.A)((function*(e){switch(e){case u.Codec.FLAC:{const{default:e}=yield n.e(5875).then(n.bind(n,"WXk0"));return e}case u.Codec.MP3:{const{default:e}=yield Promise.resolve().then(n.bind(n,"7BwG"));return e}default:throw new Error(`Could not find a parser for ${e}.`)}}))).apply(this,arguments)}const y=["byteLength","contentLength","offset","range"];var m=(0,s.A)("container"),E=(0,s.A)("logger");class w{constructor(e,{logger:t}={}){Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),(0,a.A)(this,m)[m]=e,this.logger=t}set logger(e){(0,a.A)(this,E)[E]=(null==e||null==e.namespace?void 0:e.namespace("MuxerTransformer"))||e}transform(e,t){var n=this;return(0,i.A)((function*(){var i;const{byteLength:s,contentLength:l,offset:d,range:u}=e,A=(0,r.A)(e,y),c=(yield v((0,a.A)(n,m)[m])).mux(e),h=c.byteLength-s,f=Object.assign(o.AA.from(c,{contentLength:l,offset:d,overhead:h,range:u}),A,c,{overhead:h});null==(i=(0,a.A)(n,E)[E])||i.debug("Muxed",e.frames.length,"frames in",(0,a.A)(n,m)[m].toUpperCase(),"container","\n\t","Adding",h,"bytes of overhead"),t.enqueue(f)}))()}}var P=n("7BwG"),O=n("/HWm");const R=["byteLength","contentLength","offset","range"];var L=(0,s.A)("logger"),N=(0,s.A)("onMetadata"),M=(0,s.A)("retained");class C{constructor({logger:e,onMetadata:t}={}){Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),this.logger=e,(0,a.A)(this,N)[N]=t}set logger(e){(0,a.A)(this,L)[L]=(null==e||null==e.namespace?void 0:e.namespace("ParserTransformer"))||e}transform(e,t){var n=this;return(0,i.A)((function*(){const{contentLength:i}=e,s=(0,r.A)(e,R),l=e.lastInFile||e.lastInRange,d=yield b(e.codec);let{metadata:A}=s;if((0,a.A)(n,M)[M]&&(0,a.A)(n,M)[M].byteLength&&(e=Object.assign(o.AA.concat((0,a.A)(n,M)[M],e),s)),e.firstInFile&&void 0===A)try{var c;A=d.metadata(new Uint8Array(e)),null==(c=(0,a.A)(n,L)[L])||c.debug("Parsed metadata",A);const{codec:t,container:r}=e;var f,v;Object.assign(A,{codec:t,container:r,filesize:i}),(A.duration||!Number.isFinite(i))&&(null==(f=(v=(0,a.A)(n,N))[N])||f.call(v,A))}catch(t){if(t instanceof O.yw)return void((0,a.A)(n,M)[M]=e);throw t}const p=d.frames(new Uint8Array(e),A),g=p.reduce(((e,t)=>e+t.size),0);if(g){var y;if(A&&e.codec===u.Codec.MP3){if(e.firstInFile){if(!A.duration&&Number.isFinite(i)){var m,E;const{bitrate:e,offset:t}=p[0];let r=0;if(e){var w;r=8*(i-t)/(1e3*e),null==(w=(0,a.A)(n,L)[L])||w.warn(`There were no duration in the metadata so it has been estimated based on the first frame's bitrate (${e} kbps):`,"\n\t","File size:",i,"\n\t","First frame's offset:",t,"\n\t",`Estimated duration ((${i} - ${t}) * 8) / (${e} * 1000):`,r)}else{var C;const{length:e}=p,{samples:s,sampling:o,size:l}=p.reduce(((t,n,r)=>{const i=r===e-1?e:1;return{samples:(t.samples+n.samples)/i,sampling:(t.sampling+n.sampling)/i,size:(t.size+n.size)/i}}),{samples:0,sampling:0,size:0}),d=(i-t)/l;r=s*d/o,null==(C=(0,a.A)(n,L)[L])||C.warn(`There were no duration in the metadata so it has been estimated based on ${e} frame${e>1?"s":""} (${g} bytes):`,"\n\t","Average number of samples per frames:",s,"\n\t","Average sampling rate:",o,"\n\t","Average frame size:",l,"\n\t","File size:",i,"\n\t","First frame's offset:",t,"\n\t",`Estimated number of frames in the file ((${i} - ${t}) / ${l}):`,d,"\n\t",`Estimated duration ((${s} * ${d}) / ${o}):`,r)}Object.assign(A,{duration:r}),null==(m=(E=(0,a.A)(n,N))[N])||m.call(E,A)}const e=A.layout.find((e=>e.type===P.MetadataBlockTypes.INFO));if(e&&p[0].offset===e.offset&&p[0].size===e.size&&(p[0]=h(p[0],{samples:0})),A.delays.start)for(let e=0,t=p.length,n=A.delays.start;e<t&&n>0;e++){const t=Math.max(p[e].samples-n,0);n-=p[e].samples-t,p[e]=h(p[e],{samples:t})}}if(e.lastInFile&&A.delays.end)for(let e=p.length-1,t=A.delays.end;e&&t>0;e--){const n=Math.max(p[e].samples-t,0);t-=p[e].samples-n,p[e]=h(p[e],{samples:n})}}null==(y=(0,a.A)(n,L)[L])||y.debug("Parsed",p.length,"frames in chunk: bytes",e.byteLength,"@",e.offset,"\n\t","Can enqueue",g,"bytes @",e.offset+p[0].offset,"\n\t",p);const r=Object.assign(e.slice(p[0].offset,l?void 0:p[0].offset+g),s,{frames:p.map((e=>h(e,{offset:e.offset-p[0].offset}))),metadata:A});(0,a.A)(n,M)[M]=e.slice(p[0].offset+g),t.enqueue(r)}else if(l){var j;null==(j=(0,a.A)(n,L)[L])||j.debug("Enqueuing the last chunk even if no frame where found","\n\t",e.byteLength,"bytes @",e.offset),t.enqueue(e)}else(0,a.A)(n,M)[M]=e}))()}}var j=n("yZHM"),k=n("WzpB");const T=["logger","offset","size"],D=(0,k.JZ)(300),S=2,F=3e3,x=function(){var e=(0,i.A)((function*(e,t={}){var n,i;let{logger:a,offset:s=0,size:d}=t,u=(0,r.A)(t,T);const[,A]=e;a=(null==(n=a)||null==n.namespace?void 0:n.namespace("Requester"))||a;const c=[...A.sources].filter((({url:e})=>e)),h=c.values(),{value:v}=h.next();if(!v)throw new Error("No suitable source");const{format:p}=A,{url:b}=v,g=d?s+d-1:0,y=new Headers;(s||g)&&y.set("range",`bytes=${s}-${g||""}`);const m=u.chunkSize||(()=>{const e=f(p);return({iteration:t})=>t<1?Math.max(o.WI,e/2):e})(),E="delay"in u?u.delay:D,w="retries"in u?u.retries:S,P="timeout"in u?u.timeout:F;null==(i=a)||i.debug("Fetching",b,"with those options:",(0,l.A)({},u,{chunkSize:m,delay:E,headers:[...y.entries()],retries:w,timeout:P}));const O=yield(0,o.Ay)(b,(0,l.A)({},u,{chunkSize:m,delay:E,headers:y,retries:w,timeout:P}));if(!O.ok)throw new Error;const R=new j.Rv({transform(e,t){var n;null==(n=a)||n.debug("Fetched and enqueued a chunk of",e.byteLength,"bytes @",e.buffer.offset,e.buffer),t.enqueue(e.buffer)}});return O.body.pipeThrough(R)}));return function(t){return e.apply(this,arguments)}}(),_=x;var U=n("lKw8");function G(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new B(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function B(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return B=function(e){this.s=e,this.n=e.next},B.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new B(e)}const I=e=>e&&"object"==typeof e&&"logger"in e,z=e=>Boolean(e);var H=(0,s.A)("logger"),$=(0,s.A)("readable"),q=(0,s.A)("requester"),V=(0,s.A)("steps"),W=(0,s.A)("stepsBuilder"),Y=(0,s.A)("underlyingSource");class J{constructor({logger:e,requester:t=_,stepsBuilder:n=((e,t)=>t)}={}){Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),this.logger=e,(0,a.A)(this,q)[q]=t,(0,a.A)(this,W)[W]=n}set logger(e){var t;(0,a.A)(this,H)[H]=(null==e||null==e.namespace?void 0:e.namespace("Pipeline"))||e,I((0,a.A)(this,$)[$])&&((0,a.A)(this,$)[$].logger=e),null==(t=(0,a.A)(this,V)[V])||t.filter(z).filter(I).forEach((t=>t.logger=e)),I((0,a.A)(this,Y)[Y])&&((0,a.A)(this,Y)[Y].logger=e)}getMetadata(e,{codec:t,container:n,signal:r,size:s=65536}){var l=this;return(0,i.A)((function*(){const i=yield b(t);let d,u=0,A=null,c=0;const h=t=>(0,a.A)(l,q)[q](e,{logger:(0,a.A)(l,H)[H],offset:t*s,signal:r,size:Math.max(c-t*s,0)||s});var f,v=!1,p=!1;try{for(var g,y=G((0,o.Nm)(h));v=!(g=yield y.next()).done;v=!1){let e=g.value;try{e=d?o.AA.concat(d,e):e,u=e.contentLength,A=i.metadata(new Uint8Array(e));break}catch(t){if(t instanceof O.yw){c=t.needed||c,d=e;continue}throw t}}}catch(e){p=!0,f=e}finally{try{v&&null!=y.return&&(yield y.return())}finally{if(p)throw f}}return A&&(A.codec=t,A.container=n,u&&void 0!==A.filesize&&(A.filesize=u)),A}))()}load(e,{codec:t,container:n,metadata:r,mime:s,offset:l,onMetadata:d,signal:A}){var c=this;return(0,i.A)((function*(){const i=(0,a.A)(c,H)[H],h={codec:t,container:n,frames:[],metadata:r,mime:s},f={metadata:r};let v;switch(Object.defineProperty(h,"metadata",{get:()=>f.metadata}),(0,a.A)(c,$)[$]=yield(0,a.A)(c,q)[q](e,{logger:i,offset:l,signal:A}),s){case U.b.FLAC_IN_MP4:case U.b.FLAC_IN_MP4_CASE:case U.b.MP3_IN_MP4:v=new w(u.Container.MP4,{logger:i})}const p=new o.gW(h),b=new C({logger:i,onMetadata:e=>{f.metadata=e,null==d||d(e)}});(0,a.A)(c,V)[V]=(0,a.A)(c,W)[W](e,[p,b,v],{logger:i}).filter(Boolean);const g=(0,a.A)(c,V)[V].findIndex((e=>e===p)),y=(0,a.A)(c,V)[V].findIndex((e=>e===b)),m=(0,a.A)(c,V)[V].findIndex((e=>e===v));if(-1===g)throw new TypeError("The `MarkerTransformer` is missing from the pipeline steps.");if(-1===y)throw new TypeError("The `ParserTransformer` is missing from the pipeline steps.");if(v&&-1===m)throw new TypeError("The `MuxerTransformer` is missing from the pipeline steps.");if(v?Math.min(g,y,m)!==g||Math.min(y,m)!==y:Math.min(g,y)!==g)throw new TypeError("The pipeline steps are in the wrong order. The `MarkerTransformer` must come before the `ParserTransformer`."+(v?" The `ParserTransformer` must come before the `MuxerTransformer`.":""));return(0,a.A)(c,Y)[Y]=new o.T$((0,a.A)(c,$)[$],{logger:(0,a.A)(c,H)[H],min:10240,max:102400}),(0,a.A)(c,V)[V].reduce(((e,t)=>e.pipeThrough(new j.Rv(t),{signal:A})),new j.ZY((0,a.A)(c,Y)[Y]))}))()}sniff(e,{signal:t}={}){var n=this;return(0,i.A)((function*(){let r=u.Codec.MP3;const i=u.Container.NONE,s=yield(0,a.A)(n,q)[q](e,{logger:(0,a.A)(n,H)[H],signal:t,size:1024});var l,d=!1,A=!1;try{for(var c,h=G((0,o.PY)(s));d=!(c=yield h.next()).done;d=!1){const e=c.value;1716281667===new DataView(e).getUint32(0)&&(r=u.Codec.FLAC);break}}catch(e){A=!0,l=e}finally{try{d&&null!=h.return&&(yield h.return())}finally{if(A)throw l}}return{codec:r,container:i}}))()}}},lKw8:(e,t,n)=>{n.d(t,{b:()=>r});let r=function(e){return e.AAC="audio/aac",e.AAC_IN_MP4='audio/mp4; codecs="mp4a.40.2"',e.FLAC="audio/flac",e.FLAC_IN_MP4='audio/mp4; codecs="flac"',e.FLAC_IN_MP4_CASE='audio/mp4; codecs="fLaC"',e.MP3="audio/mpeg",e.MP3_IN_MP4='audio/mp4; codecs="mp3"',e}({})},wL2u:(e,t,n)=>{n("lQVW")}}]);
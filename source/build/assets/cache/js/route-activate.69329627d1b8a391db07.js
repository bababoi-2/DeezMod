"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[3212],{D0rv:(e,t,n)=>{n.d(t,{A:()=>i}),n("/eM8");var a=n("nrKQ");const i=class{fetchAll(){return new Promise(((e,t)=>{a.A.call({method:"activate.getPartners",data:{},success:t=>{e(t)},error:e=>{t(e)}})}))}fetchOneBySlug(e){return new Promise(((t,n)=>{a.A.call({method:"activate.getPartnersActivationPageData",data:{PARTNER_SLUG:e},success:e=>{t(e)},error:e=>{n(e)}})}))}validateSubscriptionBySms(e,t,n,i){return new Promise(((r,o)=>{a.A.call({method:"activate.validateSubscription",data:{MSISDN:e,ACTIVATION_TYPE:"msisdn",PARTNER_ID:t,PARTNER_LEGACY_ID:n,COUNTRY:i},success:e=>{r(e)},error:e=>{o(e)}})}))}validateSubscriptionByCode(e,t,n){return new Promise(((i,r)=>{a.A.call({method:"activate.validateSubscriptionCode",data:{CODE:e,ACTIVATION_TYPE:"code",PARTNER_ID:t,PARTNER_LEGACY_ID:n},success:e=>{i(e)},error:e=>{r(e)}})}))}validateSubscriptionByEmail(e,t,n){return new Promise(((i,r)=>{a.A.call({method:"activate.validateSubscriptionEmail",data:{EMAIL:e,ACTIVATION_TYPE:"email",PARTNER_ID:t,PARTNER_LEGACY_ID:n},success:e=>{i(e)},error:e=>{r(e)}})}))}validateActivationLink(e,t){return new Promise(((n,i)=>{a.A.call({method:"activate.validateActivationLink",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{n(e)},error:e=>{i(e)}})}))}linkSubscriber(e,t){return new Promise(((n,i)=>{a.A.call({method:"activate.linkSubscriber",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{n(e)},error:e=>{i(e)}})}))}}},BUPU:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("+9dH"),i=n("HmE0"),r=n("q1tI");const o=({children:e,reversed:t,marginTop:n=0,...o})=>r.createElement(i.$n,(0,a.A)({type:"submit",alignItems:"center",backgroundColor:t?"white":"background.accent.primary.default",border:t?"1px solid background.accent.primary.default":"0",borderRadius:"md",color:t?"background.accent.primary.default":"white",display:"flex",fontSize:"sm",fontWeight:"600",justifyContent:"center",lineHeight:6,minWidth:{base:"100%",md:"350px"},paddingY:"spacing.l",paddingX:"spacing.xl",textAlign:"center",textTransform:"uppercase",marginTop:n},o),e)},oqWs:(e,t,n)=>{n.d(t,{A:()=>l});var a=n("+9dH"),i=n("NSet"),r=n("koXx"),o=n("q1tI"),s=n("nRPM");const l=({children:e,...t})=>o.createElement(i.az,(0,a.A)({backgroundColor:"white",minHeight:"730px",position:"relative"},t),o.createElement(r._V,{src:s,position:"absolute",top:"0",right:"0",objectFit:"contain",display:{base:"none",md:"block"}}),o.createElement(i.so,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",padding:{base:"80px 20px",md:"40px 15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"780px",lg:"1050px",xl:"1270px"}},o.createElement(i.az,{margin:"0 auto",marginRight:{base:0,md:"400px"}},e)))},Cl2C:(e,t,n)=>{n.d(t,{A:()=>m});var a,i=n("+9dH"),r=n("NSet"),o=n("LSdk"),s=n("koXx"),l=n("q1tI");const c=e=>l.createElement(r.az,{as:"svg",viewBox:"0 0 1164 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Deezer logo",sx:{width:e.width,height:e.height,marginTop:e.marginTop,...e.sx},"data-testid":"activate-landing-deezer-logo"},a||(a=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M382.887 200H218.197V0H382.887V54.026H295.866V77.1428H377.692V121.299H295.866V145.974H382.887V200ZM566.28 200H401.59V0H566.28V54.026H479.259V77.1428H561.085V121.299H479.259V145.974H566.28V200ZM1164 200C1152.78 169.418 1137.08 136.787 1115.97 100.21C1140.66 92.9688 1155.43 77.4026 1155.43 53.5065C1155.43 17.1429 1121.92 0 1068.92 0H959.824V200H1037.75V117.27C1055.07 146.429 1067.82 173.943 1076.2 200H1164ZM1037.75 89.3506V54.026H1064.77C1076.2 54.026 1082.69 60.2597 1082.69 71.6883C1082.69 83.1169 1076.2 89.3506 1064.77 89.3506H1037.75ZM941.122 200H776.432V0H941.122V54.026H854.101V77.1428H935.927V121.299H854.101V145.974H941.122V200ZM584.985 54.026H665.395C632.034 81.3195 604.577 112.234 583.427 145.974V200H760.326V145.974H671.908C692.169 116.499 720.481 87.148 760.326 54.026V0H584.985V54.026ZM-0.00146484 3.60461e-06H100.268C162.351 3.60461e-06 206.251 41.2987 206.251 100C206.251 158.701 162.351 200 100.268 200H-0.00146484V3.60461e-06ZM77.9278 145.974H96.1113C115.594 145.974 125.984 132.987 125.984 100C125.984 67.013 115.594 54.026 96.1113 54.026H77.9278V145.974Z",fill:"black"})));var d=n("tZCQ");const m=({children:e,partner:t,...n})=>l.createElement(r.az,(0,i.A)({display:"flex",marginBottom:{base:12,md:20}},n),l.createElement(r.az,{paddingY:0,paddingX:4},l.createElement(r.N_,{href:"/"},d.A.isAllowed("revamp2023")?l.createElement(c,{height:{base:4,md:6},marginTop:{base:"spacing.s",md:"spacing.m"},"data-testid":"activate-landing-deezer-logo"}):l.createElement(o.T,{height:{base:6,md:10},marginTop:{base:"6px",md:"spacing.s"},"data-testid":"activate-landing-deezer-logo"}))),t&&l.createElement(r.az,{paddingY:0,paddingX:4,borderLeft:"1px solid",borderColor:"border.neutral.primary.default"},l.createElement(s._V,{src:t.partnerLogos[t.PARTNER_LOGO_THEME_LIGHT][t.PARTNER_LOGO_DEFAULT_SIZE],"data-testid":"activate-landing-partner-logo",alt:t.brandName,height:{base:8,md:12}})))},Rm4k:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("+9dH"),i=n("NSet"),r=n("q1tI");const o=({children:e,...t})=>r.createElement(i.DZ,(0,a.A)({"data-testid":"activate-common-heading",fontSize:{base:"4xl",md:"6xl"},fontWeight:"bold",marginBottom:12},t),e)},"y+AQ":(e,t,n)=>{n.d(t,{A:()=>o});var a=n("+9dH"),i=n("q1tI"),r=n("NSet");const o=({children:e,...t})=>i.createElement(r.EY,(0,a.A)({"data-testid":"activate-common-paragraph"},t),e)},miiT:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("+9dH"),i=n("NSet"),r=n("q1tI");const o=({children:e,...t})=>r.createElement(i.EY,(0,a.A)({as:"h2",fontSize:{base:"md",md:"lg"},marginBottom:8,"data-testid":"activate-landing-subheader"},t),e)},"6A/S":(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a,i,r,o,s,l,c,d,m,p,u,g=n("q1tI"),h=n("X6oL"),_=n("Wp0Y"),b=n("oqWs"),E=n("Cl2C"),v=n("Rm4k"),f=n("miiT"),y=n("BUPU"),k=n("5pmF"),x=n("r2ys"),A=n("Zah6"),w=n("E6Gc");n("gkSg"),n("f4Bz");const C=(0,h.Ay)()(a=class extends g.Component{constructor(e){super(e),this.activationLink=void 0,this.error=void 0,this.partnerName=void 0,this.error=this.props.location.query.error,this.activationLink=this.props.location.query.activationLink,this.partnerName=this.props.location.query.partnerName}render(){if(this.partnerName&&"SUBSCRIPTION_ALREADY_LINKED"===this.error){const e=`https://deezer.page.link/?link=https://www.deezer.com/login?origin=activation-journey&utm_source=uaj-${this.partnerName}&utm_medium=deezer-website&utm_campaign=subscription-already-linked&apn=deezer.android.app&amv=6190600&isi=292738169&ibi=com.deezer.Deezer&efr=1`;return g.createElement("div",{id:"activate__error"},i||(i=g.createElement(w.Q,null)),g.createElement(b.A,null,r||(r=g.createElement(E.A,null)),g.createElement(v.A,{"data-testid":"activate-link-error-message"},(0,_.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[this.partnerName]})),g.createElement(f.A,null,(0,_.AP)("Merci de vous connecter à votre compte Deezer")),g.createElement("a",{href:e,onClick:()=>{var e;this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"login",eventaction:"click",eventcategory:"partner-activation",partner_name:null===(e=this.activationLink)||void 0===e?void 0:e.split("/")[2]})}},g.createElement(y.A,{"data-testid":"activate-link-error-resend-cta"},(0,_.AP)("Connexion")))),o||(o=g.createElement(k.A,null)),s||(s=g.createElement(x.A,null)),l||(l=g.createElement(A.A,null)))}return g.createElement("div",{id:"activate__error"},c||(c=g.createElement(w.Q,null)),g.createElement(b.A,null,d||(d=g.createElement(E.A,null)),g.createElement(v.A,{"data-testid":"activate-link-error-message"},(0,_.AP)("uajerrormessage_title_activationlinknotvalidanymore_web")),g.createElement(f.A,null,(0,_.AP)("uajerrormessage_text_toreceivenewlinkclickbelow_web")),g.createElement("a",{href:this.activationLink||"/"},g.createElement(y.A,{"data-testid":"activate-link-error-resend-cta"},(0,_.AP)("uajerrormessage_title_getnewactivationlink_web")))),m||(m=g.createElement(k.A,null)),p||(p=g.createElement(x.A,null)),u||(u=g.createElement(A.A,null)))}})||a},Xuhg:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_e}),n("/eM8");var a=n("q1tI"),i=n("mwIZ"),r=n.n(i),o=n("X6oL"),s=n("E6Gc"),l=n("FSqQ"),c=(n("gkSg"),n("f4Bz"),n("6XPn")),d=n("D0rv"),m=n("Wp0Y"),p=n("oqWs"),u=n("Cl2C"),g=n("Rm4k"),h=n("miiT"),_=n("/tpP");const b=({steps:e})=>a.createElement(_.t,{hasLine:!0,discSize:70},e.map(((e,t)=>a.createElement(_.E,{key:t,"data-testid":`activate-landing-steps-${t}`},e))));var E=n("r2ys"),v=n("Zah6"),f=n("+9dH"),y=n("NSet");const k=({children:e,...t})=>a.createElement(y.az,(0,f.A)({borderRadius:"sm",marginBottom:4,paddingY:4,paddingX:5,backgroundColor:"rgb(223 60 60 / 8%)",color:"text.feedback.error.default"},t),e),x=({children:e,...t})=>a.createElement(y.az,(0,f.A)({borderRadius:"4px",marginBottom:"4",padding:"4",backgroundColor:"green.100",color:"green.500"},t),e);var A,w,C,S,P,z=n("5pmF"),N=n("yCtO"),I=n("koXx"),T=n("nRPM");class L extends a.Component{render(){const{heading:e,subheading:t,partner:n,success:i,error:r,formMessagesPosition:o,steps:s,children:l}=this.props,c=a.createElement(a.Fragment,null,r&&r.message&&a.createElement(k,{"data-testid":"activate-landing-error-message"},r.message),i&&i.message&&a.createElement(x,{"data-testid":"activate-landing-success-message"},i.message));return a.createElement(y.az,{bg:"white",paddingX:{base:4,sm:0}},a.createElement(p.A,null,a.createElement(u.A,{partner:n}),a.createElement(g.A,{"data-testid":"activate-landing-success-message"},e),a.createElement(h.A,null,t),"top"===o&&c,l,"bottom"===o&&c,n.helpRedirectUrl&&a.createElement(y.az,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10"},a.createElement(y.N_,{"data-testid":"partner-help-link",href:n.helpRedirectUrl,isExternal:!0,color:"accent.main",_hover:{textDecoration:"underline"}},n.texts.activate.help_redirect)),n.disclaimer&&a.createElement(y.az,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10",color:"text.accent.onLight.default",_hover:{textDecoration:"underline"},dangerouslySetInnerHTML:{__html:n.disclaimer},sx:{a:{color:"accent.main",_hover:{textDecoration:"underline"}}}}),a.createElement(y.N_,{alignItems:"center",display:{base:"flex",md:"none"},href:"#activate__steps",position:"relative",zIndex:"100"},A||(A=a.createElement(N.e,{mr:3})),a.createElement(y.EY,{color:"text.accent.secondary.default",fontSize:"sm"},(0,m.AP)("generic_title_howdoesitwork_web"))),a.createElement(I._V,{src:n.activationPageBackgroundUrl?n.activationPageBackgroundUrl:T,objectFit:"cover",paddingTop:16,margin:"-36px",minWidth:"100vw",display:{base:"block",md:"none"}}),a.createElement(y.az,{as:"a",href:"#activate__steps",alignItems:"center",position:"absolute",bottom:"0",display:{base:"none",lg:"flex"}},w||(w=a.createElement(N.e,{mr:3})),a.createElement(y.EY,{color:"text.accent.secondary.default",fontSize:"sm"},(0,m.AP)("generic_title_howdoesitwork_web")))),a.createElement(y.DZ,{id:"activate__steps",color:"text.accent.onLight.default",fontSize:{base:"2xl",md:"4xl"},fontWeight:"bold",marginBottom:8,marginTop:{base:8,md:0},textAlign:"center"},n.texts.activate.step_title),a.createElement(y.az,{paddingX:{base:0,md:16},paddingTop:8,paddingBottom:16},a.createElement(b,{steps:s})),C||(C=a.createElement(z.A,null)),S||(S=a.createElement(E.A,null)),P||(P=a.createElement(v.A,null)))}}L.defaultProps={formMessagesPosition:"bottom"};const R=L;var D=n("QIHo"),M=n("c+bj");const F=n.p+"js/Activate/components/landing/phone-input/international.82041fd7caf50574116c.svg";var H;const B=M.A,O=a.forwardRef((function({name:e,value:t,onChange:n},i){return a.createElement("div",{className:"activate__landing__phone-input__country-select--container",ref:i},a.createElement("div",{className:"react-phone-number-input__icon"},a.createElement("img",{alt:t,className:"react-phone-number-input__icon-image",src:t?`https://flagicons.lipis.dev/flags/4x3/${t.toLowerCase()}.svg`:""})),a.createElement("label",{className:"activate__landing__phone-input__label",htmlFor:"custom-select"},t?`+${(0,D.Ko)(t)}`:H||(H=a.createElement("img",{src:F,className:"activate__landing__phone-input__country-select__intertional-icon"}))),a.createElement("select",{id:"custom-select",name:e,value:t,onChange:e=>n(e.target.value||void 0),className:"activate__landing__phone-input__country-select__select"},a.createElement("option",{value:""},M.A.ZZ),(0,D.X6)().map((e=>a.createElement("option",{key:e,value:e},B[e]," +",(0,D.Ko)(e))))))}));var U=n("juqV");n("ZN3Q");const j=({partner:e,value:t,initialCountryCode:n,countryCode:i,error:r,handleSubmit:s,onChange:l,onCountryChange:c})=>{const d=(0,o.z1)();return a.createElement("div",{className:"activate__landing__phone-input--container"},a.createElement("form",{onSubmit:s},a.createElement(D.Ay,{countrySelectComponent:O,"data-testid":"activate-landing-phone-input",className:(0,U.A)("activate__landing__phone-input",r&&"activate__landing__phone-input--error"),addInternationalOption:!1,defaultCountry:i||n,value:t,onChange:e=>l(e),onCountryChange:e=>{try{c(e)}catch(e){}}}),a.createElement("button",{"data-testid":"activate-landing-cta",onClick:()=>{d.trackEvent({event:"click",eventlabel:"send-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},type:"submit",className:(0,U.A)("activate__landing__send-button",t&&"valid"),disabled:Boolean(!t)},e.texts.activate.input_cta)))},Y={ERROR_GENERATING_ACTIVATION_LINK:()=>"Error generating activation link",ERROR_SHORTENING_LINK:()=>"Error shortening link",ERROR_SENDING_ACTIVATION_CODE:()=>"Error sending activation code",PARTNER_NOT_FOUND:()=>"Partner not found",UNEXPECTED_ERROR:()=>"Unexpected error",GATEWAY_ERROR:()=>"Gateway error"},G={INVALID_MSISDN:e=>(0,m.AP)("uajerrormessage_text_enteravalidphonenumber_web",e),SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e)},W={SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e)},X={SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e)},V=(e,t,n)=>{if(Y[e])return Y[e](t);if("msisdn"===n&&G[e])return G[e](t);if("code"===n&&W[e])return W[e](t);if("email"===n&&W[e])return X[e](t);throw new Error},$={LINK_SENT:"",LINK_RESENT:(0,m.AP)("generic_text_newlinksentviaSMS_web")},q=({children:e,onClick:t,...n})=>a.createElement(y.az,(0,f.A)({color:"text.accent.primary.default",cursor:"pointer",fontSize:"md",marginBottom:4,onClick:t},n),e);var Q,Z=n("Ty5D"),K=n("iooo"),J=n("Qyje"),ee=n.n(J);function te({partnerName:e,errorName:t}){return(0,K.jd)(`/activate/error?${ee().stringify({error:t,partnerName:e})}`)}let ne=(0,o.Ay)()(Q=class extends a.Component{constructor(e){super(e),this.initialCountryCode=void 0,this._onCountryChange=e=>{this.setState({countryCode:e})},this._onPhoneNumberChange=e=>{this.setState({phoneNumber:e})},this._handleResendSmsLink=async()=>{const{partner:e,repository:t}=this.props;try{if(e&&this.state.countryCode){await t.validateSubscriptionBySms(this.state.phoneNumber,e.id,e.legacyId,this.state.countryCode);const n={name:"LINK_RESENT",message:(0,m.AP)("generic_text_newlinksentviaSMS_web")};this._handleSuccess(n)}}catch(e){this._handleError(e)}},this._handleChangePhoneNumber=()=>{const{partner:e,history:t}=this.props;this.setState({phoneNumber:"",success:void 0,error:void 0}),t.push((0,K.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:n,history:a}=this.props;e.preventDefault();try{t&&this.state.countryCode&&(await n.validateSubscriptionBySms(this.state.phoneNumber,t.id,t.legacyId,this.state.countryCode),a.push((0,K.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}},this.initialCountryCode=e.partner.countryCodes&&e.partner.countryCodes[0],this.state={phoneNumber:"",countryCode:this.initialCountryCode,success:void 0,error:void 0}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),n="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&n){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{phoneNumber:t,countryCode:n,success:i,error:r}=this.state,o=Boolean(i);let s=e.texts.activate.title,l=e.texts.activate.subtitle;return o&&(s=(0,m.AP)("uajlandingpage_title_activationlinksent_web"),l=(0,m.AP)("uajlandingpage_text_clickonlinksentviaSMStocomplete_web",{sprintf:[t]})),a.createElement(R,{heading:s,subheading:l,partner:e,success:i,error:r,formMessagesPosition:o?"top":"bottom",steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},o?a.createElement(a.Fragment,null,a.createElement(q,{"data-testid":"activate-landing-success-resend-link",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"resend-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),this._handleResendSmsLink()}},(0,m.AP)("generic_action_resendSMS_web")),a.createElement(q,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangePhoneNumber()}},(0,m.AP)("Changer le numéro de téléphone"))):a.createElement(j,{partner:e,initialCountryCode:this.initialCountryCode,countryCode:n,value:t,error:r,handleSubmit:this._handleSubmit,onChange:this._onPhoneNumberChange,onCountryChange:this._onCountryChange}))}_handleError(e){const{partner:t,history:n}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=te({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const i=V(e.name,a,"msisdn");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=$[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||Q;const ae=(0,Z.y)(ne);var ie=n("XkdG"),re=n("HmE0");class oe extends a.Component{constructor(...e){super(...e),this.state={code:"",error:void 0},this._handleCodeChange=e=>{this.setState({code:e.target.value})},this._handleSubmit=async e=>{const{partner:t,repository:n}=this.props,{code:a}=this.state;e.preventDefault();try{if(t&&a){const e=await n.validateSubscriptionByCode(a,t.id,t.legacyId);if(!e)return void this._handleError({name:"UNEXPECTED_ERROR",message:""});this._handleSuccess(e)}}catch(e){this._handleError(e)}}}render(){const{partner:e}=this.props,{code:t,error:n}=this.state;return a.createElement(R,{heading:e.texts.activate.title,subheading:e.texts.activate.subtitle,partner:e,error:n,steps:[e.texts.activate.step_1,e.texts.activate.step_2]},a.createElement(y.az,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:this._handleSubmit},a.createElement(ie.p,{"data-testid":"activate-landing-code-input",value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleCodeChange,_invalid:{borderColor:"accent.main"},bg:"white",borderRadius:"full",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),a.createElement(re.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"accent.main":"lightGrey.100",borderColor:t?"accent.main":"lightGrey.700",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"accent.main":"lightGrey.700"},_focus:{borderColor:t?"accent.main":"lightGrey.700"},zIndex:"overlay"},e.texts.activate.input_cta))))}_handleError(e){const{partner:t,history:n}=this.props;if("SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=te({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const i=V(e.name,a,"code");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){window.location.replace(e)}}const se=(0,Z.y)(oe);var le;let ce=(0,o.Ay)()(le=class extends a.Component{constructor(...e){super(...e),this.state={email:"",success:void 0,error:void 0},this._handleEmailChange=e=>{this.setState({email:e.target.value})},this._handleChangeEmail=()=>{const{partner:e,history:t}=this.props;this.setState({email:"",success:void 0,error:void 0}),t.push((0,K.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:n,history:a}=this.props;e.preventDefault();try{t&&this.state.email&&(await n.validateSubscriptionByEmail(this.state.email,t.id,t.legacyId),a.push((0,K.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),n="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&n){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{email:t,success:n,error:i}=this.state,r=Boolean(n);let o=e.texts.activate.title,s=e.texts.activate.subtitle;return r&&(o=(0,m.AP)("uajlandingpage_title_activationlinksent_web"),s=(0,m.AP)("uajlandingpage_text_clickonlinksentviaemailtocomplete_web",{sprintf:[t]})),a.createElement(R,{heading:o,subheading:s,partner:e,error:i,steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},r?a.createElement(a.Fragment,null,a.createElement(q,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangeEmail()}},(0,m.AP)("generic_action_changeemailaddress_web"))):a.createElement(a.Fragment,null,a.createElement(y.az,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:this._handleSubmit},a.createElement(ie.p,{value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleEmailChange,_invalid:{borderColor:"accent.main"},bg:"white",borderRadius:"full",border:"none",borderColor:"transparent",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),a.createElement(re.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"accent.main":"lightGrey.100",borderColor:t?"accent.main":"lightGrey.700",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"accent.main":"lightGrey.700"},_focus:{borderColor:t?"accent.main":"lightGrey.700"},zIndex:"overlay"},e.texts.activate.input_cta)))))}_handleError(e){const{partner:t,history:n}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=te({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const i=V(e.name,a,"email");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=$[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||le;const de=(0,Z.y)(ce);var me,pe,ue,ge,he;const _e=(0,o.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(me=class extends a.Component{constructor(e){super(e),this.slug=void 0,this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this.slug=this.props.match.params.slug,this.api=new d.A,this.repository=new c.A(this.api),this.isComponentMounted=!1,this.state={partner:void 0,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e)}catch(e){this._handleFetchEnd()}}componentWillUnmount(){this.isComponentMounted=!1}render(){const{partner:e,isFetching:t}=this.state;if(t||!e)return pe||(pe=a.createElement(l.A,null));const n=r()(e,"activationTypes.0");if("msisdn"===n)return a.createElement(a.Fragment,null,ue||(ue=a.createElement(s.Q,null)),a.createElement(ae,{partner:e,repository:this.repository}));if("code"===n)return a.createElement(a.Fragment,null,ge||(ge=a.createElement(s.Q,null)),a.createElement(se,{partner:e,repository:this.repository}));if("email"===n)return a.createElement(a.Fragment,null,he||(he=a.createElement(s.Q,null)),a.createElement(de,{partner:e,repository:this.repository}));throw new Error(`The partner uses an unsupported activation type - only "code", "msisdn" and "email" are supported - "${n}" was supplied`)}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartner(e){this.isComponentMounted&&this.setState({partner:e})}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}})||me},"2+Bo":(e,t,n)=>{n.r(t),n.d(t,{LinkPage:()=>I,default:()=>T}),n("/eM8");var a,i,r,o,s,l,c,d,m,p,u=n("q1tI"),g=n("X6oL"),h=n("Ty5D"),_=n("Wp0Y"),b=n("FSqQ"),E=n("oqWs"),v=n("Cl2C"),f=n("Rm4k"),y=n("y+AQ"),k=n("BUPU"),x=n("r2ys"),A=n("5pmF"),w=n("Zah6"),C=(n("gkSg"),n("f4Bz"),n("6XPn")),S=n("D0rv"),P=n("iooo"),z=n("E6Gc"),N=n("NSet");let I=(0,g.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(a=class extends u.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new S.A,this.repository=new C.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1,linked:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e);const t=await this.repository.linkSubscriber(this.token,e.legacyId);this._handleLinkSubscriber(t)}catch(e){this._handleError(e),this._handleFetchEnd()}}render(){const{partner:e,error:t,isFetching:n,linked:a}=this.state;return n?i||(i=u.createElement(b.A,null)):e&&t?u.createElement("div",{id:"activate__link"},r||(r=u.createElement(z.Q,null)),u.createElement(E.A,null,u.createElement(v.A,{partner:e}),u.createElement(f.A,null,(0,_.AP)("uajerrormessage_title_alreadylinkedtopayingsub_web")),u.createElement(y.A,null,(0,_.AP)("uajerrormessage_text_chooseotherorcreatenewaccount_web",{sprintf:[e.brandName,(0,_.AP)("deezerplans_title_deezerfree_web")]})),u.createElement(N.az,{marginTop:4},u.createElement(y.A,null,(0,_.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,_.AP)("deezerplans_title_deezerfree_web")]}))),u.createElement("a",{href:`/activate/${this.slug}/validate?token=${this.token}`},u.createElement(k.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,_.AP)("generic_action_chooseanotheraccount_web")))),o||(o=u.createElement(A.A,null)),s||(s=u.createElement(x.A,null)),l||(l=u.createElement(w.A,null))):e&&a?u.createElement("div",{id:"activate__link"},c||(c=u.createElement(z.Q,null)),u.createElement(E.A,null,u.createElement(v.A,{partner:e}),u.createElement(f.A,{"data-testid":"offer-activated-header"},(0,_.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[e.brandName]})),u.createElement(y.A,{"data-testid":"offer-activated-text"},(0,_.AP)("uajcongrats_text_enjoyallyourfavmusicnow_web")),u.createElement("a",{href:"/activate/success",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"start-playing",eventaction:"click",eventcategory:"partner-activation",partner_name:this.slug})}},u.createElement(k.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,_.AP)("generic_action_listennow_web")))),d||(d=u.createElement(A.A,null)),m||(m=u.createElement(x.A,null)),p||(p=u.createElement(w.A,null))):null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleLinkSubscriber(e){this.setState({linked:e})}_handleError(e){const{history:t}=this.props;this.setState({error:e}),t.push((0,P.jd)(`/activate/${this.slug}/not_eligible_account`))}})||a;const T=(0,h.y)(I)},yBQW:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ee}),n("/eM8");var a,i=n("q1tI"),r=n("Wp0Y"),o=n("X6oL"),s=n("TRpf"),l=n("JeG4"),c=n("iooo"),d=n("JFzq"),m=n("3TL7"),p=n("yiM3");class u extends i.PureComponent{render(){return i.createElement(i.Fragment,null,a||(a=i.createElement("div",{className:"burger-icon",id:"burger_menu_button"},i.createElement("span",{className:"line"}),i.createElement("span",{className:"line"}),i.createElement("span",{className:"line"}))),i.createElement("div",{className:"burger-menu burger-menu-hidden",id:"burger_menu"},i.createElement("div",null,i.createElement("div",{className:"nav-collapse",id:"backstage_navigation_collapse"},i.createElement("ul",{className:"nav"},this._renderMenuContent())))))}_renderMenuContent(){return 0!==m.default.current()?i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:"/open_app",className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,r.AP)("Lancer Deezer"))),this._renderManageMySubscription(),this._renderMenuDefaultItems(),i.createElement("li",{className:"nav-item"},i.createElement("a",{role:"button",className:"nav-main-link backstage-header-link",onClick:()=>m.default.logout()},(0,r.AP)("Déconnexion")))):i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,p.t)({route:"login"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("login-button")},(0,r.AP)("Connexion"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,p.t)({route:"register"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("signup-button")},(0,r.AP)("Inscription"))),this._renderMenuDefaultItems())}_renderManageMySubscription(){if(0!==m.default.getOfferId())return i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/payment/go.php?subscription=1"),className:"nav-main-link backstage-head er-link",onClick:()=>this._trackElementClick("manage-subscription-button","menu")},(0,r.AP)("Gérer mon abonnement")))}_renderMenuDefaultItems(){return i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:this._getOpenAppUrl(),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,r.AP)("Télécharger l'application"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/offers"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("plans-button")},(0,r.AP)("Offres"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/channels/explore"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("channels-explore-button")},(0,r.AP)("Explorer tous nos Univers"))))}_getOpenAppUrl(){const e=(0,c.Uv)(location.href),t=Object.entries(e).filter((([e])=>0===e.indexOf("utm"))).map((([e,t])=>`${e}=${t}`)).join("&");return"/open_app?page=home&source=MF_MenuDownloadApp"+(t.length?`&${t}`:"")}_trackElementClick(e,t=""){const n=d.Ay.getPageName();n&&d.Ay.pushClickEventGtm({eventcategory:n,eventaction:e,eventlabel:t})}}const g=u;var h,_,b=n("xobL"),E=n("NSet"),v=n("LSdk"),f=n("HmE0");let y=(0,o.Ay)({eventcategory:"header"})(h=class extends i.PureComponent{constructor(e){super(e),l.A.init()}render(){return i.createElement(E.az,{width:"100%",height:{base:"60px",md:"80px"},bg:"bg.main",boxShadow:"0 3px 0 0 rgba(0, 0, 0, .06)",position:"fixed",top:0,zIndex:2e3},i.createElement(E.so,{height:"100%",alignItems:"center",paddingX:{base:"spacing.xl",md:"122px"},justifyContent:{base:"flex-start",md:"space-between"}},i.createElement(E.az,null,i.createElement(E.N_,{href:"/"},i.createElement(v.T,{height:{base:8,md:10}}))),i.createElement(E.so,{width:"100%",paddingRight:"spacing.xl",justifyContent:"flex-end",className:"hidden-phone"},i.createElement(E.az,{display:{base:"none",md:"flex"}},i.createElement(E.az,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},i.createElement(E.N_,{href:(0,c.jd)("/download/?direct_dl&utm_source=device&utm_campaign=mkg-desktop_app&utm_medium=player-obj_download&utm_content=feature-desktop_app"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"download-button"):null,_hover:{color:"accent.main"},_focus:{color:"accent.main"}},(0,r.AP)("Télécharger"))),i.createElement(E.az,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},i.createElement(E.N_,{href:(0,c.jd)("/offers"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"plans-button"):null,_hover:{color:"accent.main"},_focus:{color:"accent.main"}},(0,r.AP)("Offres"))))),this._renderUnloggedButtons()),_||(_=i.createElement(g,null)))}_renderUnloggedButtons(){return this.props.userConnected?this.props.isFreemiumCountry||!this.props.isFreemiumCountry&&this.props.isPremiumUser?i.createElement("div",{className:"cell cell-profile hidden-phone"},i.createElement(f.$n,{as:"a",boxSizing:"border-box",id:"topbar-player-button",href:"/",variant:"outline",size:"md"},(0,r.AP)("Ouvrir le player"))):null:i.createElement(E.az,{className:"cell cell-profile hidden-phone"},i.createElement(E.BJ,{direction:"row",spacing:2},i.createElement(f.$n,{as:"a",boxSizing:"border-box",id:"topbar-login-button",href:(0,p.t)({route:"login",comeback:!0}),variant:"outline",size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"login-button"):null},(0,r.AP)("Connexion")),i.createElement(f.$n,{as:"a",boxSizing:"border-box",id:"topbar-register-button",href:(0,p.t)({route:"register",comeback:!0}),size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"signup-button"):null},(0,r.AP)("Inscription"))))}_onTrackingClick(e){this.props.tracking.trackEvent({event:"click",eventaction:e})}})||h;const k=(0,s.Ng)((({user:e})=>({userConnected:(0,b.UJ)(e),isFreemiumCountry:(0,b.zC)(e),isPremiumUser:(0,b.ki)(e)})))(y);var x=n("+9dH"),A=n("koXx");const w=n.p+"images/unlogged/activate/shape-desktop.88b54a27e1b17b893bfd.svg",C=n.p+"images/unlogged/activate/partners-list-default-background-image.fc374887665b1902570f.png",S=n.p+"images/unlogged/activate/partners-list-mobile-background-image.fc931d9cd2f942ffc53c.png",P=({children:e,...t})=>i.createElement(E.az,(0,x.A)({backgroundColor:"#FDFCFE",minHeight:"540px",position:"relative"},t),i.createElement(A._V,{src:C,position:"absolute",top:"0",right:"0",objectFit:"contain",maxHeight:"780px",display:{base:"none",md:"block"}}),i.createElement(A._V,{src:w,position:"absolute",top:"0",right:"400px",objectFit:"contain",maxHeight:"610px",display:{base:"none",md:"block"}}),i.createElement(E.so,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",padding:{base:"45px 20px",md:"40px 15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"580px",lg:"850px",xl:"1070px"}},i.createElement(E.az,{margin:{base:"unset",md:"0 auto"},marginRight:{base:"unset",md:"400px"}},e)),i.createElement(A._V,{src:S,width:"100%",objectFit:"contain",display:{base:"block",md:"none"}}));var z,N,I=n("Rm4k"),T=n("y+AQ"),L=n("VkUI"),R=n("6vqc");const D=({partner:e,index:t,...n})=>{const a=(0,o.z1)();if(/sync/.test(e.activationLink))return i.createElement(E.az,{gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{a.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),(e=>{L.default.open(`/${e}`)})(e.activationLink)},"data-testid":`activate-partnerlist-partner-${t}`},i.createElement(A._V,{maxHeight:8,alt:e.brandName,src:e.partnerLogos[e.PARTNER_LOGO_THEME_LIGHT][e.PARTNER_LOGO_DEFAULT_SIZE]}),i.createElement(E.EY,{fontSize:"base",fontWeight:"600"},e.brandName),z||(z=i.createElement(R.v,null)));const r=(0,c.jd)(e.activationLink);return i.createElement(E.N_,(0,x.A)({gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{a.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},href:r,"data-testid":`activate-partnerlist-partner-${t}`},n),i.createElement(A._V,{maxHeight:8,display:"flex",cursor:"pointer",alignItems:"center",alt:e.brandName,src:e.partnerLogos[e.PARTNER_LOGO_THEME_LIGHT][e.PARTNER_LOGO_DEFAULT_SIZE]}),i.createElement(E.EY,{fontSize:"base",fontWeight:"600"},e.brandName),N||(N=i.createElement(R.v,null)))},M=({partners:e})=>i.createElement(E.az,{display:"flex",flexDirection:"column",paddingLeft:{base:6,md:8}},e.map(((e,t)=>i.createElement(E.az,{marginTop:0!==t?8:0,key:t},i.createElement(D,{index:t,key:e.id,partner:e})))));var F=n("x9/P"),H=n("RhP2"),B=n("quyQ"),O=n("GFLz"),U=n("mlHu"),j=n("2Av+"),Y=n("HrDX"),G=n("QJeV"),W=n("/b/U"),X=n("nrKQ"),V=n("PKMp"),$=n("Q8Ug");const q=({groups:e})=>{const{trackEvent:t}=(0,o.z1)(),n=e=>()=>{var n;e&&("cookie-preference"===e&&(null===(n=window.consentScreenApi)||void 0===n||n.openPreferences(2,"purposes")),t({event:"click",eventaction:`click-${e}-link`,eventcategory:"footer",eventlabel:"footer-social-link"}))};return i.createElement(U.iq,{"data-cy":"footer-links"},null==e?void 0:e.map((e=>i.createElement(U.kI,{key:e.title,label:e.to?i.createElement(U.$u,{href:e.to,onClick:n(e.key)},e.title):e.title},e.entries.map((e=>{const{to:t,key:a,label:r}=e;return t?i.createElement(U.f6,{href:t,key:a,onClick:n(a)},r):i.createElement(U.f6,{as:"button",key:a,onClick:n(a)},r)}))))))};var Q;const Z={facebook:i.createElement(j.i,null),instagram:i.createElement(Y.o,null),youtube:i.createElement(G.V,null),twitter:i.createElement(W.u,null)},K=()=>{const e=(0,s.d4)((({user:e})=>(0,b.Z0)(e))),{availableLanguages:t,socialLinks:n,footerSections:a}=(()=>{const[e,t]=(0,i.useState)({socialLinks:[],availableLanguages:[],footerSections:[]});return(0,i.useEffect)((()=>{X.A.call({method:"deezer.getUnloggedData",success:t,error:V.A.error})}),[t]),e})(),{trackEvent:r}=(0,o.z1)(),l=e=>{r({event:"click",eventaction:"download-app",eventcategory:"footer",eventlabel:`${e}-logo`})},c=(0,$._C)(e);return i.createElement(U.pX,{"data-cy":"footer"},i.createElement(F.W,null,i.createElement(H.b,{"data-cy":"app-store",target:"_blank",onClick:()=>l("apple"),locale:c}),i.createElement(B.x1,{"data-cy":"google-play-store",target:"_blank",onClick:()=>l("google"),locale:c})),i.createElement(q,{groups:a}),i.createElement(U.CI,{logo:Q||(Q=i.createElement(E.N_,{href:"/","data-cy":"deezer-logo","aria-label":"deezer site"},i.createElement(v.T,null))),socialIcons:i.createElement(U.WR,null,n&&n.map((e=>i.createElement(U.Lo,{key:e.name,"aria-label":e.name,href:e.url,icon:Z[e.name]})))),languageSelector:t.length>1&&i.createElement(O.l6,{variant:"filled",value:e,onChange:e=>{const t=/\/[a-z]{2}\//,n=`${e.target.value}`;t.test(location.pathname)?location.href=location.href.replace(t,`/${n}/`):location.pathname=n+location.pathname}},t.map((e=>i.createElement("option",{key:e.label,value:e.value},e.label))))}))};var J,ee,te=n("FSqQ");class ne extends i.Component{render(){return i.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},J||(J=i.createElement("div",{className:"modal-backdrop"})),ee||(ee=i.createElement("div",{className:"modal-wrapper"})))}}const ae=ne;var ie,re,oe,se,le,ce,de,me,pe=n("5pmF"),ue=n("r2ys"),ge=n("Zah6"),he=n("E6Gc"),_e=(n("gkSg"),n("f4Bz"),n("D0rv")),be=n("6XPn");const Ee=(0,o.Ay)()(ie=class extends i.Component{constructor(e){super(e),this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this._renderPartnersList=()=>{const{isFetching:e,error:t,partners:n}=this.state;return e?re||(re=i.createElement(te.A,null)):t?i.createElement(i.Fragment,null,i.createElement(I.A,null,(0,r.AP)("generic_text_sorryoffernotavailable_web")),i.createElement(T.A,null,(0,r.AP)("Vous allez maintenant être redirigé vers la page de connexion."))):i.createElement(i.Fragment,null,i.createElement(I.A,null,(0,r.AP)("uaj_title_selectyourpartner_web")),i.createElement(M,{partners:n}))},this.api=new _e.A,this.repository=new be.A(this.api),this.isComponentMounted=!1,this.state={partners:[],error:null,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findAll();this._handleFetchEnd(),this._handlePartners(e)}catch(e){this._handleFetchEnd(),this._handleError(e)}}componentWillUnmount(){this.isComponentMounted=!1}render(){return i.createElement(he.Q,null,oe||(oe=i.createElement(k,null)),i.createElement(E.az,{mt:{base:"60px",md:"80px"}},i.createElement(P,null,this._renderPartnersList())),se||(se=i.createElement(ae,null)),le||(le=i.createElement(pe.A,null)),ce||(ce=i.createElement(ue.A,null)),de||(de=i.createElement(ge.A,null)),me||(me=i.createElement(K,null)))}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartners(e){this.isComponentMounted&&this.setState({partners:e})}_handleError(e){this.isComponentMounted&&(this.setState({error:e}),setTimeout((()=>{window.location.replace("/")}),5e3))}})||ie},"58Rl":(e,t,n)=>{n.r(t),n.d(t,{ValidatePage:()=>S,default:()=>P}),n("/eM8");var a,i,r,o,s,l,c=n("q1tI"),d=n("Ty5D"),m=n("X6oL"),p=n("Wp0Y"),u=n("iooo"),g=n("FSqQ"),h=n("oqWs"),_=n("Cl2C"),b=n("Rm4k"),E=n("y+AQ"),v=n("BUPU"),f=n("5pmF"),y=n("r2ys"),k=n("Zah6"),x=n("E6Gc"),A=(n("gkSg"),n("6XPn")),w=n("D0rv"),C=n("yiM3");let S=(0,m.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(a=class extends c.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new w.A,this.repository=new A.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handlePartner(e),await this.repository.validateActivationLink(this.token,e.legacyId)}catch(e){this._handleError(e)}finally{this._handleFetchEnd()}}buildActivationUrl(e){return this.state.partner?(0,C.t)({route:e,query:{partner:this.state.partner.id,template:"activation_journey"},redirect:`/activate/${this.slug}/link?token=${this.token}`}):"/404"}render(){const{partner:e,error:t,isFetching:n}=this.state;return t?null:n?i||(i=c.createElement(g.A,null)):e?c.createElement("div",{id:"activate__validate"},r||(r=c.createElement(x.Q,null)),c.createElement(h.A,null,c.createElement(_.A,{partner:e}),c.createElement(b.A,null,(0,p.AP)("uajlogin_title_laststeptoactivateoffer_web")),c.createElement(E.A,null,(0,p.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,p.AP)("deezerplans_title_deezerfree_web")]})),c.createElement(v.A,{as:"a",href:this.buildActivationUrl("register"),"data-testid":"activate-validate-create-account",marginTop:24},(0,p.AP)("S'inscrire")),c.createElement(v.A,{as:"a",href:this.buildActivationUrl("login"),variant:"outline","data-testid":"activate-validate-log-in",reversed:!0,marginTop:6},(0,p.AP)("Connexion"))),o||(o=c.createElement(f.A,null)),s||(s=c.createElement(y.A,null)),l||(l=c.createElement(k.A,null))):null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleError(e){this.setState({error:e});const t=this.state.partner&&this.state.partner.activationLink,n=this.state.partner&&this.state.partner.brandName;this.props.history.push((0,u.jd)(`/activate/error?error=${e.name}&activationLink=${t}&partnerName=${n}`))}})||a;const P=(0,d.y)(S)},"6XPn":(e,t,n)=>{n.d(t,{A:()=>i}),n("/eM8");const a=class{constructor({id:e,legacyId:t,name:n,brandName:a,activationLink:i,texts:r,partnerLogos:o,activationPageBackgroundUrl:s,activationPagePartnerLogoUrl:l,activationTypes:c,countryCodes:d,helpRedirectUrl:m,disclaimer:p}){this.id=void 0,this.legacyId=void 0,this.name=void 0,this.brandName=void 0,this.activationLink=void 0,this.texts=void 0,this.partnerLogos=void 0,this.activationPageBackgroundUrl=void 0,this.activationPagePartnerLogoUrl=void 0,this.activationTypes=void 0,this.countryCodes=void 0,this.helpRedirectUrl=void 0,this.disclaimer=void 0,this.PARTNER_LOGO_THEME_LIGHT="white",this.PARTNER_LOGO_THEME_DARK="dark",this.PARTNER_LOGO_DEFAULT_SIZE=48,this.PARTNER_LOGO_SIZE_96=96,this.id=e,this.legacyId=t,this.name=n,this.brandName=a,this.activationLink=i,this.texts=r,this.partnerLogos=o,this.activationPageBackgroundUrl=s,this.activationPagePartnerLogoUrl=l,this.activationTypes=c,this.countryCodes=d,this.helpRedirectUrl=m,this.disclaimer=p}},i=class{constructor(e){this.api=void 0,this.api=e}async findAll(){return(await this.api.fetchAll()).map((e=>new a(e)))}async findOneBySlug(e){const t=await this.api.fetchOneBySlug(e);return new a(t)}async validateSubscriptionBySms(e,t,n,a){await this.api.validateSubscriptionBySms(e,t,n,a)}validateSubscriptionByCode(e,t,n){return this.api.validateSubscriptionByCode(e,t,n)}validateSubscriptionByEmail(e,t,n){return this.api.validateSubscriptionByEmail(e,t,n)}async validateActivationLink(e,t){return await this.api.validateActivationLink(e,t)}async linkSubscriber(e,t){return await this.api.linkSubscriber(e,t)}}},b5wE:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J}),n("/eM8");var a=n("q1tI"),i=n("TRpf"),r=n("5pmF"),o=n("r2ys"),s=n("Zah6"),l=n("FSqQ"),c=n("nrKQ");let d=function(e){return e.Premium="premium",e.PremiumXFamily="premium x family",e.Family="family",e}({});const m_getGiftPageData=e=>new Promise(((t,n)=>{c.A.call({method:"redeem.getGiftPageData",data:{SLUG:e},success:e=>{t(e)},error:e=>{n(e)}})})),m_checkCodeValidity=e=>new Promise(((t,n)=>{c.A.call({method:"premium_checkCodeValidity",data:{CODE:e},success:e=>{t(e)},error:e=>{const t=e.payload.GIFT_CODE_ERROR;n(t)}})})),m_redeemGiftCode=e=>new Promise(((t,n)=>{c.A.call({method:"gift_redeemCode",data:{CODE:e},success:e=>{t(e)},error:e=>{n(e)}})}));var p=n("NSet"),u=n("Wp0Y");const g={premium:{name:(0,u.AP)("deezerplans_title_deezerpremium_web"),headline:[a.createElement("p",{key:0},(0,u.AP)("Sans engagement."))],content:[a.createElement(p.EY,{key:0},(0,u.AP)("fnacdartylandingpage_text_listenadfreedwnldfavoriteslistenoffline_web")),a.createElement(p.EY,{key:1},(0,u.AP)("fnacdartylandingpage_text_overXmilliontrackspodcastsliveradioalldevices_web",{sprintf:[73],count:73}))]},family:{name:(0,u.AP)("deezerplans_title_deezerfamily_web"),headline:[a.createElement("p",{key:0},(0,u.AP)("Sans engagement."))],content:[a.createElement(p.EY,{key:0},(0,u.AP)("newofferscardsusp_text_musicforeveryone_web")),a.createElement(p.EY,{key:1},(0,u.AP)("newofferscardsusp_text_getXaccountsallbenefitsofXplan_web",{sprintf:[6,(0,u.AP)("deezerplans_title_deezerpremium_web")],count:6,offername:(0,u.AP)("deezerplans_title_deezerpremium_web")})),a.createElement(p.EY,{key:2},(0,u.AP)("newofferscardsusp_text_listenmultipledevices_web"))]}},h=({offerType:e})=>a.createElement(p.az,{maxWidth:{base:"100%",md:"255px"},marginLeft:{base:0,md:"16"},marginTop:{base:8,md:0}},a.createElement(p.az,{alignItems:"center",borderRadius:"md",color:"white",display:"flex",fontSize:"xl",fontWeight:"700",justifyContent:"center",lineHeight:6,marginBottom:"spacing.2xl",maxWidth:"180px",paddingY:"spacing.m",paddingX:"spacing.l",background:"premium"===e?"linear-gradient(69.06deg, #B84FDD -26.76%, #4965F4 44.6%, #2EFB74 132.54%)":"linear-gradient(246.32deg, #FF3737 -47.6%, #FF5D31 9.71%, #FF842A 67.97%, #FAFE3A 126.23%)"},g[e].name),a.createElement(p.DZ,{color:"darkGrey.900",fontSize:"xl",marginBottom:"spacing.l"},g[e].headline),a.createElement(p.EY,{color:"lightGrey.900",fontSize:"md"},g[e].content));var _,b;const E=()=>a.createElement(p.az,{alignItems:"center",backgroundColor:"border.accent.onContent.default",display:"flex",justifyContent:"center",paddingY:{base:"spacing.2xl",md:24},paddingX:{base:"spacing.2xl",md:0},flexDirection:{base:"column",md:"row"},marginBottom:{base:0,md:"auto"}},a.createElement(p.DZ,{fontSize:"4xl",maxWidth:{base:"none",md:"500px"},marginBottom:{base:"spacing.3xl",md:0},minWidth:{base:0,md:"auto"},paddingTop:{base:"spacing.2xl",md:0},width:{base:"100%",md:"auto"},dangerouslySetInnerHTML:{__html:(0,u.AP)("fnacdartylandingpage_title_planXorplanYchoose_web",{sprintf:[(0,u.AP)("deezerplans_title_deezerpremium_web"),(0,u.AP)("deezerplans_title_deezerfamily_web")]})}}),a.createElement(p.az,{marginLeft:{base:0,md:"spacing.3xl"},paddingBottom:{base:"spacing.2xl",md:0}},a.createElement(p.az,{display:"flex",flexDirection:{base:"column",md:"row"}},a.createElement(p.az,{maxWidth:{base:"100%",md:"255px"}},_||(_=a.createElement(h,{offerType:"premium"}))),a.createElement(p.az,{marginLeft:{base:0,md:16},marginTop:{base:"spacing.2xl",md:0},maxWidth:{base:"100%",md:"255px"}},b||(b=a.createElement(h,{offerType:"family"}))))));n("aRRr");const v="Deezer Premium",f={premium:{label:"Premium",illustration:"@deezer/images/unlogged/redeem/deezer-premium-illustration.png",blocks:[{label:(0,u.AP)("deezerpremiumlandingpage_title_playondemand_web"),description:a.createElement(a.Fragment,null,a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_millionstrackpodcastradioandmore_web")}}),a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_adfreeskipcraftowncollection_web")}}))},{label:(0,u.AP)("specialofferlandingpage_subtitle_offlinelistening_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_dwnldfavmusicpodcastsanytmeanywh_web")}})},{label:(0,u.AP)("deezerpremiumlandingpage_title_meetyourmusicmatchmaker_web"),description:a.createElement(a.Fragment,null,a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_youlistenyoulovewelearn_web")}}),a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_mostpersonalizedreco_web")}}))},{label:(0,u.AP)("deezerpremiumlandingpage_title_tuneintoyourfavoritehosts_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_evergrowcatalogdedicatedshowstab_web")}})},{label:(0,u.AP)("deezerpremiumlandingpage_title_neverstopdiscovering_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerpremiumlandingpage_text_identifysongsaveasfavddtoplaylst_web")}})},{label:(0,u.AP)("deezerpremiumlandingpage_title_syncupyourlife_web"),description:a.createElement(a.Fragment,null,a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerfamilylandingpage_text_switchbetweendevicesorsync_web")}}),a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerfamilylandingpage_text_connectsmartwatchorcarsystem_web")}}))}]},hifi:{label:"Hifi",illustration:"@deezer/images/unlogged/redeem/deezer-hifi-illustration.png",blocks:[{label:(0,u.AP)("generic_title_planXbenefits_web",{sprintf:[v]}),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("sonyredeemcodepage_text_playanytrackanytimenoadsoffline_web")}})},{label:(0,u.AP)("generic_title_highfidelitysound_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerhifilandingpage_text_listenflacmusicinhifisound_web")}})},{label:(0,u.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerhifilandingpage_text_streamflacmusicaccrossalldevices_web")}})},{label:(0,u.AP)("generic_title_millionofflactracks_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("sonyredeemcodepage_text_expansivecatalogflactracks_web")}})},{label:(0,u.AP)("generic_title_highendsoundsystemcompatibility_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("sonyredeemcodepage_text_enjoycristalclearmusic_web")}})},{label:(0,u.AP)("generic_title_deluxemusicexperience_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("sonyredeemcodepage_text_excluaccess360rawith360bydeezer_web")}})}]},family:{label:"Family",illustration:"@deezer/images/unlogged/redeem/deezer-family-illustration.png",blocks:[{label:(0,u.WI)("deezerfamilylandingpage_title_Xindividualprofiles_web","deezerfamilylandingpage_title_Xindividualprofiles_web",{sprintf:["6"],count:6}),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.WI)("deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web","deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web",{sprintf:["6"],count:6})}})},{label:(0,u.AP)("yearlyoffer_action_saveonplanX_web",{sprintf:[v]}),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerfamilylandingpage_text_playforwholefamilypriceof2planX_web",{sprintf:[v]})}})},{label:(0,u.AP)("deezerfamilylandingpage_title_kidprofiles_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerfamilylandingpage_text_keepcontrolkidfriendlycontent_web",{sprintf:["Deezer Family"]})}})},{label:(0,u.AP)("generic_title_planXbenefits_web",{sprintf:[v]}),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.AP)("deezerfamilylandingpage_text_listenwithoutlimits_web",{sprintf:[v]})}})},{label:(0,u.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.WI)("deezerfamilylandingpage_text_connectuptoXdevices_web","deezerfamilylandingpage_text_connectuptoXdevices_web",{sprintf:["13"],count:13})}})},{label:(0,u.AP)("deezerfamilylandingpage_title_tailormadefeatures_web"),description:a.createElement(p.EY,{dangerouslySetInnerHTML:{__html:(0,u.WI)("deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web","deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web",{sprintf:["6"],count:6})}})}]}};var y=n("u37T"),k=n("koXx");const x={premium:{desktop:n.p+"images/unlogged/redeem/deezer-premium-illustration.43a79f40a2d9f43a82fd.png",mobile:n.p+"images/unlogged/redeem/deezer-premium-illustration-mobile.0060a50c26ba48492815.png"},family:{desktop:n.p+"images/unlogged/redeem/deezer-family-illustration.bbc752d3e936cfd3466d.png",mobile:n.p+"images/unlogged/redeem/deezer-family-illustration-mobile.5684e8387393db06dfe4.png"},hifi:{desktop:n.p+"images/unlogged/redeem/deezer-hifi-illustration.06dd9f25c629fd2675ea.png",mobile:n.p+"images/unlogged/redeem/deezer-hifi-illustration-mobile.16b40f9d4531d4b268e4.png"}},A=({id:e,offerType:t})=>{const n=f[t],i=(0,y.A)({base:x[t].mobile,sm:x[t].desktop});return n?a.createElement(p.az,{display:"flex",flexDirection:{base:"column-reverse",sm:"row"},marginBottom:{base:0,sm:24},paddingTop:{base:"spacing.2xl",sm:36},id:e},a.createElement(k._V,{objectFit:"cover",backgroundColor:"white",src:i,height:{base:"340px",sm:"300px"},marginTop:{base:0,sm:"spacing.3xl"},marginBottom:{base:"spacing.2xl",sm:0},minWidth:{base:0,sm:"550px"},width:{base:"100%",sm:"550px"}}),a.createElement(p.az,{marginLeft:{base:0,sm:"spacing.3xl"},padding:{base:"spacing.2xl",sm:0}},a.createElement(p.DZ,{fontSize:{base:"5xl",sm:"6xl"},marginBottom:{base:"spacing.3xl",sm:16},maxWidth:{base:"none",sm:"500px"},minWidth:{base:0,sm:"auto"},width:{base:"100%",sm:"auto"}},(0,u.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${n.label}`]})),a.createElement(p.az,{display:{base:"block",sm:"flex"},flexWrap:"wrap"},n.blocks.map((({label:e,description:t})=>a.createElement(p.az,{key:e,flex:{base:"1",sm:"1 0 30%"},marginBottom:"spacing.2xl",marginRight:{base:0,sm:16},maxWidth:{base:"none",sm:"300px"},width:{base:"100%",sm:"auto"}},a.createElement(p.DZ,{fontSize:"xl",marginBottom:"spacing.l"},e),a.createElement(p.EY,null,t))))))):null};var w=n("LSdk");const C=({brandName:e,logoUrl:t})=>a.createElement(p.az,{display:"flex",marginBottom:{base:"spacing.3xl",md:16}},a.createElement(p.az,{alignItems:"center",display:"flex",paddingRight:"spacing.l",paddingLeft:0},a.createElement(p.N_,{href:"/","data-testid":"deezer-logo"},a.createElement(w.T,{height:{base:6,md:8}}))),t?a.createElement(p.az,{alignItems:"center",display:"flex",paddingLeft:"spacing.l",paddingRight:0,borderLeft:"1px solid black"},a.createElement(k._V,{height:{base:8,md:12},alt:e,src:t,"data-testid":"partner-logo"})):null);var S=n("Qyje"),P=n.n(S),z=n("XkdG"),N=n("HmE0"),I=n("yiM3");const T=({placeholder:e,redirectPage:t})=>{const[n,i]=(0,a.useState)(),[r,o]=(0,a.useState)(""),s=(0,a.useCallback)((async e=>{try{await m_checkCodeValidity(e)}catch(e){i(e)}try{const t=await m_redeemGiftCode(e);window.location.assign(t.REDIRECT_URL)}catch(e){const n=e;if("USER_NOT_LOGGED"===n.name){const e=`${window.location.href.split(/[?#]/)[0]}?autoSubmit=true&code=${r}`;return void window.location.replace((0,I.t)({route:"signup"===t?"register":"login",redirect:e,query:{template:"activation_journey"}}))}const a=n.response.error[n.name];i(a)}}),[r]);return(0,a.useEffect)((()=>{const{autoSubmit:e,code:t}=P().parse(window.location.search,{ignoreQueryPrefix:!0});t&&o(t),e&&s(t)}),[s]),a.createElement(a.Fragment,null,a.createElement(p.az,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:e=>{e.preventDefault(),s(r)}},a.createElement(z.p,{placeholder:e,_placeholder:{fontSize:"sm"},value:r,onChange:e=>{o(e.target.value)},mb:{base:"spacing.m",md:0},"data-testid":"redeem-textfield"}),a.createElement(N.$n,{type:"submit",fontSize:"xs",paddingX:"spacing.l",paddingY:"spacing.s",height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:2,top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},zIndex:"overlay","data-testid":"redeem-submit-button"},(0,u.AP)("Valider mon code")))),a.createElement(p.az,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n?a.createElement(p.az,{borderRadius:"4px",marginY:"spacing.l",padding:"spacing.l spacing.xl",backgroundColor:"background.accent.onDark.default",color:"intent.error",width:"100%","data-testid":"error-container"},n):null))};var L=n("Vd8Q");function R(e){return`https://${L.default.get("host_img_url_ssl")}/${e}`}var D,M,F,H,B=n("+9dH"),O=n("nzlo");function U(e){return a.createElement(O.A,(0,B.A)({name:"chevron-down"},e),D||(D=a.createElement("path",{d:"M6.013 8.998a.6.6 0 0 0 .416-.169l2.661-2.1 2.662-2.102c.654-.517-.12-1.498-.775-.981l-2.483 1.96-2.482 1.96-4.99-3.921c-.656-.515-1.428.468-.773.983L5.597 8.83a.6.6 0 0 0 .416.168"})))}const j=({data:e,whyChooseId:t})=>a.createElement(p.az,{display:"flex",marginLeft:"auto",marginRight:"auto",minHeight:{base:"none",md:"800px"},width:"100%",flexDirection:{base:"column",md:"row"},height:{base:"auto",md:"800px"},marginBottom:{base:"spacing.2xl",md:0}},a.createElement(p.az,{display:"flex",flex:"1",flexDirection:"column",height:"100%",justifyContent:"space-between",margin:"0 auto",minHeight:"800px",marginLeft:{base:0,sm:36,md:36,lg:"250px"},marginRight:{base:0,sm:24,md:24,lg:24},maxWidth:{base:"none",sm:"none",md:"none",lg:"none"},minWidth:{base:0,sm:"450px"},paddingX:"spacing.2xl",paddingY:"spacing.3xl",width:{base:"100%",sm:"100%",md:"100%",lg:"100%"}},a.createElement(p.az,{maxWidth:"600px"},a.createElement(C,{brandName:e.partnerName,logoUrl:R(e.partnerLogo)}),a.createElement(p.DZ,{fontSize:{base:"4xl",md:"6xl"},marginBottom:"spacing.2xl","data-testid":"redeem-header"},e.mainTitle),a.createElement(p.EY,{fontSize:"lg",marginBottom:"spacing.2xl","data-testid":"redeem-heading-text"},e.subtitle),a.createElement(T,{placeholder:e.placeholderText,redirectPage:e.redirectPage}),M||(M=a.createElement(p.az,{height:"1px",marginY:"spacing.m",width:"100%"})),a.createElement(p.EY,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.codeHelperText.replace(/<a/g,'<a style="color: #a238ff;"')}}),F||(F=a.createElement(p.az,{height:"1px",marginY:"spacing.m",width:"100%"})),a.createElement(p.EY,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.helpContactText.replace(/<a/g,'<a style="color: #a238ff;"')}})),e.offerType===d.PremiumXFamily?null:a.createElement(p.az,{as:"a",display:{base:"none",md:"flex"},alignItems:"center",marginBottom:"spacing.2xl",marginTop:"spacing.l",href:`#${t}`,"data-testid":"why-choose-section"},H||(H=a.createElement(p.az,{display:"inline",marginRight:"spacing.m"},a.createElement(U,null))),a.createElement(p.EY,{fontSize:"xs"},function(e){const t=f[e];return(0,u.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${t.label}`]})}(e.offerType)))),a.createElement(k._V,{src:R(e.backgroundImage),alt:`${e.partnerName}-illustration`,backgroundColor:"white",maxWidth:{base:"none",md:"600px"},minHeight:{base:"300px",md:"800px"},minWidth:{base:0,md:"400px"},objectFit:"cover",height:{base:"100%",md:"auto"},maxHeight:{base:"600px",md:"none"},width:{base:"100%",md:"auto"}})),Y=({partnerName:e,bannerBg:t,redirectTo:n,country:i})=>t?a.createElement(p.N_,{href:n},a.createElement(p.az,{as:"img",src:R(t),alt:`${e}-promotional-banner`,mb:24,maxH:"750px",maxW:"100%",minW:"100%",objectFit:"cover",display:{base:"none",md:"block"}})):a.createElement(p.az,{bgImage:`url("@deezer/images/unlogged/redeem/${i}/player.jpg")`,bgPos:"center",bgRepeat:"no-repeat",bgSize:"contain",h:{base:"270px",md:"370px",lg:"490px",xl:"704px"},mb:24}),G=({title:e,placeholder:t,redirectPage:n})=>a.createElement(p.az,{display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",mb:{base:"spacing.2xl",md:24},mt:{base:"spacing.2xl",md:24},textAlign:"center",p:{base:"spacing.2xl",md:0}},a.createElement(p.DZ,{fontSize:{base:"3xl",md:"4xl"},mb:{base:"spacing.2xl",md:16},maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},w:"100%"},e),a.createElement(T,{placeholder:t,redirectPage:n})),W=({termsAndConditions:e})=>e?a.createElement(p.az,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:{base:"spacing.2xl",md:"spacing.3xl"},textAlign:"center",backgroundColor:"lightGrey.50",width:"100%"},a.createElement(p.EY,{color:"lightGrey.900",fontSize:"sm",lineHeight:"18px",maxWidth:"650px",minWidth:{base:0,md:"400px"},width:"100%"},e)):null;var X,V,$,q,Q,Z=n("E6Gc");const K="why-choose-section",J=(0,i.Ng)((e=>({userCountry:e.user.COUNTRY})))((e=>{const[t,n]=(0,a.useState)();(0,Z.l)("light");const i=e.match.params.slug,c=e.userCountry;return(0,a.useEffect)((()=>{(async()=>{const e=await m_getGiftPageData(i);n(e)})()}),[i]),t?a.createElement(p.az,{bg:"white",fontSize:"sm",w:"100%"},a.createElement(j,{data:t,whyChooseId:K}),t.offerType===d.PremiumXFamily?V||(V=a.createElement(E,null)):a.createElement(A,{id:K,offerType:t.offerType}),a.createElement(Y,{partnerName:t.partnerName,bannerBg:t.partnershipImage,redirectTo:t.backgroundUrl,country:c}),a.createElement(G,{title:t.subtitle,placeholder:t.placeholderText,redirectPage:t.redirectPage}),a.createElement(W,{termsAndConditions:t.termsAndConditions}),$||($=a.createElement(r.A,null)),q||(q=a.createElement(o.A,null)),Q||(Q=a.createElement(s.A,null))):X||(X=a.createElement(l.A,null))}))},r2ys:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("q1tI"),i=n("uHHB"),r=n("vGT4");const o=()=>{const{state:e}=(0,r.b)(),t=(e=>null==e?void 0:e.settings)(e);return(0,a.useEffect)((()=>{const{consentString:e,statistics:n=0,targetedAdvertising:a=0}=t||{};window.sas&&window.sas.cmd.push((()=>{window.sas.setGdprConsentData(e)})),(0,i.A)("consentStatistics",n.toString(),100),(0,i.A)("consentMarketing",a.toString(),100)}),[t]),null}},"5pmF":(e,t,n)=>{n.d(t,{A:()=>y});var a=n("q1tI"),i=n("TRpf"),r=n("xobL"),o=(n("/eM8"),n("Vd8Q"));const s=o.default.get("host_website_ssl"),l=o.default.get("host_cookie"),c=`https://${o.default.get("host_common_assets_ssl")}/js/gdpr-appliance.js`,d=o.default.get("bot_crawler"),m=new RegExp(d,"i");var g=n("zKOv"),h=n("vGT4"),_=n("39Zz"),b=n("uHHB"),E=n("wE9P"),v=n("ebSJ");const f=({locale:e,darkMode:t,userId:n})=>{const{dispatch:i}=(0,h.b)();return(0,a.useEffect)((()=>{window.location.pathname.includes("register")&&(0,v.A)(_.J)&&((0,b.A)(_.J,"",0),(0,b.A)("euconsent-v2","",0)),window.onDzrGDPRReady=a=>{(async(e,t)=>{const{lang:n="en_US",darkMode:a=!1,onConsentUpdate:i,userID:r="0"}=t||{};window.consentScreenApi=await e({cookieDomain:l,darkMode:a,gatewayHost:s,isWebview:!1,lang:n,onConsentUpdate:i,userID:r})})(a,{lang:e,darkMode:t,userID:n,onConsentUpdate:e=>{var t;i((t=e,{type:g.X,value:t})),(0,E.u)().setConsent(e)}})},((e="dzr-gdpr-script")=>{if(m.test(navigator.userAgent))return;if(document.getElementById(e))return;const t=document.createElement("script");t.async=!0,t.crossOrigin="anonymous",t.defer=!0,t.id=e,t.src=c,document.head.appendChild(t)})("gdpr-web-script")}),[]),(0,a.useEffect)((()=>{var a;null===(a=window.consentScreenApi)||void 0===a||a.update({darkMode:t,userID:n,lang:e})}),[t,e,n]),null},y=()=>{const e=(0,i.d4)((e=>(0,r.JK)(e.user))),t=(0,i.d4)((e=>e.user.id?(0,r.NF)(e.user):"dark"===document.body.dataset.theme)),n=(0,i.d4)((e=>(0,r.F6)(e.user).toString()));return a.createElement(f,{darkMode:t,userId:n,locale:e})}},FSqQ:(e,t,n)=>{n.d(t,{A:()=>o});var a,i=n("q1tI"),r=n("juqV");class o extends i.Component{render(){const{className:e}=this.props;let t=(0,r.A)("loader-container",e);return i.createElement("div",{className:t,"data-testid":"loader"},a||(a=i.createElement("div",{className:"loader animate-spin"})))}}},Zah6:(e,t,n)=>{n.d(t,{A:()=>u});var a=n("+9dH"),i=n("q1tI"),r=n("TRpf"),o=n("TqF5"),s=n("jKJc"),l=n("DdAs"),c=n("WKgy"),d=n("Qi9J");const m=e=>{switch(e){case"small":return"lg";case"medium":return"xl";default:return"3xl"}};class p extends i.Component{constructor(e){super(e),this._open=this._open.bind(this),this._close=this._close.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onOutsideMouseDown=this._onOutsideMouseDown.bind(this),this._contentRef=i.createRef()}componentDidMount(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)}render(){const{isOpen:e,data:t,name:n,size:r,variant:o,testid:c}=this.props;if(!e)return null;const p=(0,d.C)(n);return p?i.createElement(s.aF,{isOpen:e,variant:null!=o?o:"foundation",size:m(r),isCentered:!0,onClose:this._close},i.createElement(l.mH,{onClick:this._close}),i.createElement(l.$m,{ref:this._contentRef,"data-testid":c},i.createElement(i.Suspense,{fallback:null},i.createElement(p,(0,a.A)({},t,{name:n}))))):null}_onKeyDown(e){const{isOpen:t,disableClosingAction:n}=this.props;t&&!n&&27===e.keyCode&&this._close()}_onOutsideMouseDown(e){const{isOpen:t,disableClosingAction:n}=this.props;t&&!n&&"HTML"!==e.target.tagName&&e.target.contains(this._contentRef.current)&&(e.stopPropagation(),this._close())}_close(){this.props.closeModal(!0)}_open(){this.props.openModal()}}p.defaultProps={size:"large",addRadius:!1},c.A.addReducers({modal:o.Ay});const u=(0,r.Ng)((({modal:e})=>({name:e.name,data:e.props,disableClosingAction:e.disableClosingAction,isOpen:""!==e.name,size:e.size,classNameClose:e.classNameClose,addRadius:e.addRadius,variant:e.variant,testid:e.testid})),{closeModal:o.Oo,openModal:o.qf})(p)},nzlo:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("+9dH"),i=n("q1tI"),r=n("juqV");class o extends i.Component{render(){const{children:e,className:t,name:n,size:o,viewBox:s,title:l,...c}=this.props,d={className:(0,r.A)("svg-icon",{[`svg-icon-${n}`]:n&&""!==n},t),focusable:"false",height:"auto"===o?"1em":o,role:"img",width:"auto"===o?"1em":o,viewBox:s,"aria-hidden":l?"false":"true"};return"boxSize"in c&&delete c.boxSize,i.createElement("svg",(0,a.A)({},d,c),l?i.createElement("title",null,l):null,e)}}o.defaultProps={className:void 0,name:void 0,size:"12",viewBox:"0 0 12 12",title:void 0};const s=o},E6Gc:(e,t,n)=>{n.d(t,{Q:()=>o,l:()=>r});var a=n("q1tI"),i=n("D+hi");const r=e=>{const{setColorMode:t}=(0,i.G6)();(0,a.useEffect)((()=>{t(e)}),[t,e])},o=({children:e})=>(r("light"),a.createElement(a.Fragment,null,e))},JFzq:(e,t,n)=>{n.d(t,{Ay:()=>l,bg:()=>i,hQ:()=>r,wL:()=>o});var a=n("bDF2");const i=()=>{if(window.dataLayer){const e=window.dataLayer.find((e=>e.pagename));if("undefined"!==e.pagename)return e.pagename}return null},r=({eventcategory:e,eventaction:t,eventlabel:n="",...a})=>{e&&t&&window.dataLayer&&window.dataLayer.push({event:"click",eventcategory:e,eventaction:t,eventlabel:n,...a})},o=(e,t,n,a="")=>{document.getElementById(e)&&document.getElementById(e).addEventListener("click",(function(){r({eventcategory:t,eventaction:n,eventlabel:a})}))},l={trackElementClick:o,trackElementsClick:(e,t,n,a="")=>{const i=document.getElementsByClassName(e);for(let e=0;e<i.length;e++)i[e].addEventListener("click",(function(){const o=i[e].getAttribute("data-tracking-type")?i[e].getAttribute("data-tracking-type"):a;r({eventcategory:t,eventaction:n,eventlabel:o})}))},pushClickEventGtm:r,pushEventToGTM:e=>{window.dataLayer&&window.dataLayer.push(e)},getPageName:i,trackFromDatasetInfo:()=>{document.querySelectorAll("[data-tracked=true]").forEach((e=>{e.addEventListener("click",(function({currentTarget:e}){var t,n,i;if((e=>"DETAILS"===e.nodeName&&!0===e.open)(e))return;const r=null!==(t=e.getAttribute("data-tracking-category"))&&void 0!==t?t:"",o=null!==(n=e.getAttribute("data-tracking-action"))&&void 0!==n?n:"",l=null!==(i=e.getAttribute("data-tracking-label"))&&void 0!==i?i:"";(0,a.R2)({eventcategory:r,eventaction:o,eventlabel:l})}))}))}}},JeG4:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("JFzq"),i=n("Vd8Q");const r=e=>{const t=`;domain=${i.default.get("host_cookie")}`;document.cookie=e+"="+t+"; path=/"+("https:"===document.location.protocol?";SameSite=None; secure":"")},o={init:function(){document.onclick=function(e){"burger_menu_button"!==e.target.id&&"line"!==e.target.className||o.toggleMobileMenu()};const e=document.getElementById("burger-logout-btn");e&&(e.onclick=()=>{r("familyUserId"),r("euconsent-v2"),location.href="/logout.php"})},toggleMobileMenu:function(){"burger-menu burger-menu-hidden"===document.getElementById("burger_menu").className?(document.getElementById("burger_menu").classList.remove("burger-menu-hidden"),document.getElementById("burger_menu").classList.add("burger-menu-visible"),document.getElementById("burger_menu_button").classList.add("burger-icon-active"),document.body.classList.add("disabled-scroll"),o.trackElementClick("open-menu")):(document.getElementById("burger_menu").classList.remove("burger-menu-visible"),document.getElementById("burger_menu").classList.add("burger-menu-hidden"),document.getElementById("burger_menu_button").classList.remove("burger-icon-active"),document.body.classList.remove("disabled-scroll"))},trackElementClick:function(e){const t=(0,a.bg)();t&&(0,a.hQ)({eventcategory:t,eventaction:e})},initTracking(e){[{key:"launch",action:"download-app",menu:!0},{key:"download",action:"download-app",menu:!0},{key:"login",action:"login-button",menu:!1},{key:"signup",action:"signup-button",menu:!1},{key:"offers",action:"plans-button",menu:!1},{key:"explore",action:"channels-explore-button",menu:!1}].forEach((({key:t,action:n,menu:i})=>{(0,a.wL)(`burger-${t}-link`,e,n,i?"menu":"")}))}},s=o},f4Bz:()=>{},gkSg:()=>{},nRPM:(e,t,n)=>{e.exports=n.p+"images/unlogged/activate/default-background-image.b6d734fa19525c8605cf.png"}}]);